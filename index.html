<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="/lib/w3-theme-teal.css">
<link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-white.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
<script src="https://code.jquery.com/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true"></script>
<script type="text/javascript" src="https://apis.google.com/js/client.js"></script>
<script type="text/javascript"> google.load('visualization', '1', {packages: ['corechart']});</script>
<script src="dist/screenfull.min.js"></script>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link href="custombox.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.js"></script>
<script src="custombox.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js" integrity="sha512-r6rDA7W6ZeQhvl8S7yRVQUKVHdexq+GAlNkNNqVC7YyIV+NwqCTJe2hDWCiffTyRNOeGEzRRJ9ifvRm/HCzGYg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://superal.github.io/canvas2image/canvas2image.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <style>
.fullscreen {
  width:100%;
  height:85%;
  position:fixed;
  left:0;
  top:0px;
}

.overlay {
  z-index:998;
}

#cameraSelect {
  z-index:999;
  position:absolute;
}

#closeButton {
  z-index:999;
  position:absolute;
  right:0;
}

.barcode-polygon {
  fill:rgba(85,240,40,0.5);          
  stroke:green;
  stroke-width:1;
}
.inputFile {
  border: 1px solid #ccc;
  display: inline-block;
  padding: 6px 12px;
  cursor: pointer;
}
</style>
</head>
<body>
  <div id="sectionPakasAdmin">
    <table><tr>
      <td style="font-family:Raleway, sans-serif;padding-left:30px;padding-top:30px;letter-spacing:3px;font-weight:bold;">BREW ADMIN</td>
      <td id="closeFSbtn" class="w3-display-topright material-icons" style="margin:30px;display:none" onclick="closeFullscreen();cerrarModal('closeFSbtn')">fullscreen_exit</td>
    </tr></table>
    <div class="home" id="divHome" onclick="toggleFullscreen()">
      <div id="status">Initializing...</div>
      <div id="lblUsuario" style="display:none"></div>
      <!-- <h6>
        BREW ADMIN</h6> -->
      <img id="createButton" style="position:fixed;left:10px;top:60px" onclick="popDestinoBtn();initQR();" src="https://lh3.googleusercontent.com/pw/AP1GczME2EmlsrfWERASEV2pTgpWChH_haYG8UCilpmFuK_ais_yLFxQcxeU1WCeb2syPKa4Yyel-oeYuF4g2jvGE9UGumzHpgSVKWCp4qCBZo1XPffPyTG7uknc6bC4Jst0grmOeJIm2QCaTNmAWlOEdFcKtw=w500-h500-s-no-gm?authuser=0" width="170px" height="170px"></img>
      <img id="startButton" style="position:fixed;left:180px;top:60px" onclick="initQRscan('keg')" src="https://lh3.googleusercontent.com/pw/AP1GczN21lSalDHX6_MJA_oOrF_UhrSHYIkzmHe2GT6xYVU2xxxohmdKPKxCujH70TBX3J9eS-pGD_9h9kAfyF9h1drVdqUwPXHy0j7HPIKzsf6u4JkkanKblXX3t109r38fuP4nY1-2kBsjRGa5rYkLIQztqA=w500-h500-s-no-gm?authuser=0" width="170px" height="170px"></img>
      <img id="statsPopButton" style="position:fixed;left:180px;top:210px" onclick="initVentaKegs()" src="https://lh3.googleusercontent.com/pw/AP1GczPqLKIvlyT18VOIYF5BZeAUuyJ6RjiXCK1sgDSnOVA6pjAlCHhuR3QeNO5haEub5nTFRuMvYmgirKy6tWQlBUAW8FbE7XAE8d-VCWQSTcJeaK7L9Wo_NlksQRV65lC8PaHTHiaJ1GF4qm2vnALJlkQsPw=w500-h500-s-no-gm?authuser=0" width="170px" height="170px"></img>
      <img id="fermentadoresPopButton" style="position:fixed;left:10px;top:210px" onclick="initFermentadores(document.getElementById('lblSts').innerHTML)" src="https://lh3.googleusercontent.com/pw/AP1GczOClzXfhHr-QE1vtUa79s8wtSpJfCvZwMDNc1FHfVpYgqlBzogZ-0Nmcnfc5uWxdGOuyo4U1-o9JQ1NuZxsbWlI4dxZkW6kLolEKe9dfPFoJLQJ81n2pyuLb-nhkwcwFzo5otMRe6jRHkvhTJffyQPqww=w500-h500-s-no-gm?authuser=0" width="170px" height="170px"></img>
      <img id="kegsPopButton" style="position:fixed;left:10px;top:360px" onclick="initKegs(document.getElementById('lblSts').innerHTML)" src="https://lh3.googleusercontent.com/pw/AP1GczPzfs7XLYhGaaYHjGENegUasPZJh39Ppa5OMGoPYcKlFm8mWzi8FqSUnLthRA0YWq6mp-EREdFOxlfgsTmyfKDe7fD6AzhsRyUVDTZhB8P7f2qKUofcLUn4lpA5G8s5j_HGcaQsXx2kmFiOpEhZVUi-hA=w500-h500-s-no-gm?authuser=0" width="170px" height="170px"></img>
      <img id="selectedImg"/>
    </div>
    <div id="bloque" class="w3-center" style="top:85px;opacity: 0.3;position:absolute;height: 100%;background-color: white;z-index: 2;margin: auto;"></div>
    <div class="w3-center" style="width:50%;position:absolute;top:100%3%;margin: auto;left:25%;">
      <i id="refshSpin" class="material-icons w3-center w3-spin" style="position: relative;color:grey;font-size:90px;z-index: 4;">refresh</i>
    </div>
    <div class="w3-modal w3-card" id="modalScanner" style="z-index:6">
      <div class="w3-modal-content w3-center" id="modalScannerCont" style="height:540px;width:380px;background-color:black">
        <h6 style="letter-spacing:3px;padding:10px;padding-top:20px;font-weight:bold;color:white" class="">LEER QR</h6>
        <span class="w3-button w3-display-topright material-icons " style="padding-top:15px;color:white;" onclick="closeScanner();">close</span>
        <div class="w3-container w3-center" style="margin: 0 auto;text-align:center;">
          <div id="reader" style="width:320px;background-color:black;"></div>
          <h6 id="lblScanBanner" style="padding:20px;color:white"></h6><br>
        </div>
        <div class="w3-container">
          <!-- <h6 id="lblScanBanner" style="padding:20px"></h6> -->
        </div>
      </div>
    </div>

    <div class="scanner w3-container" style="display:none;background-color:black" id="divScanner">
        <header class="w3-container w3-black"> 
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px" class="">LEER QR</h6>
          <span id="closeButton" class="w3-button w3-display-topright material-icons w3-white" style="padding-top:15px;" onclick="">close</span>
          <!-- <button id="closeButton" class="material-icons w3-button w3-black">close</button> -->
        </header>
        <div id="reader" style="width: 380px;background-color:black"></div>
      <!-- <select id="cameraSelect" style="display:none"></select>
        <button id="closeButton" class="material-icons w3-button w3-white">close</button>
      <svg class="overlay fullscreen"></svg>
      <video class="camera fullscreen" muted autoplay="autoplay" playsinline="playsinline" webkit-playsinline></video> -->
    </div>
    <!-- *****************************************************************************************************************
    ********************************************************************************************************************** modalCont
    *******************************************************************************************************************-->
    <div id="modalCont" class="modal"style="padding-top: 88px;">
      <div  style="width: 100%;text-align:center;">
        <div class="modal-content">
          <div style="background:orange;padding:5px 5px 5px 30px;">
            <table style="width:100%;">
                <tr>
                  <td style="width:80%;text-align:left;">
                    <h>Recetas</h>
                  </td>
                  <td style="width:20%;padding-right : 25px;padding-top:10px;text-align:right;">
                    <i class="material-icons" onclick="cerrarModal('modalReceta')">close</i>
                  </td>
                  <a id="lblIndiceR" style="display:none;"></a>
                </tr>
            </table>
          </div >
        </div>
        <div class="w3-cell w3-container">
          <form id="buscador"class="form-style-8" style="z-index:4;cursor:pointer;background-color: white;background-position: 10px 25px; background-repeat: no-repeat; background-size: 30px 30px;background-image: url('https://lh3.googleusercontent.com/NcMeHRB4NYuHSvOTEAVeXUn_Q5sjH-5bM4Pl7Nu6hnC4NzxNl57phG_20dIyu_uVcEcdd7Hc0yykIvlwsO1Tcc6j-bAsZPKKMC6WzTNTRjkM15xRI5UGTrGCI9pexOw7kWc7CwEf4S5OL2YwLlHi_t32-HYbDAlBZKS_ZMDnp8xsfW9aAjFr12V4fLsP1zbNaCCYEj-15JHsIzPSxLBd-gXcBnfzJsUn20AYC_7DgHykjrOmBo8Ssu36NECMq3XSlb_n-MFMGy9TU7aqq_wHnT_622TmQovL6Y0rLgYkE1lPTs1ufEMJik67DW07yFqLYNNUfyfrru1pf-P9vRD7cuulKrRvwoqYOsqutsLSbn37DM8qnId3GDyY5XxHm2rIMRSezreIeAiv9ZsMQ7mzT5MNmc2ku1u3l-tZqO-OJop28xGw2gV_QI7keD3HswnEnXftAHk4itcT18XPdtmcRBrhH24I3IougB76Bdg2tpFiW3Y48pc0WaDJg9q9Jb33HvjsE9gZLXOCFhFmYYOV7FxAkA3wRl6mG8qYckWqhYFIIsx9YfO2DWRpdp0VtXgEHzFoTGFi5BldDoP3aIOacCAwyGOplg6R8BPkhhuJa_PMUxOqWDnxaonZ=s64-no')">
            <input style="padding-top:25px;width:90%;left: 25px;color:#2d2d2d;background-color: white;" type="text" id="wo" onkeyup="filtrarResultados();" onchange="filtrarResultados();" placeholder="Buscar...">
          </form>
        </div>
        <div id="fila" class="w3-container w3-centered">
          <table id="tabla" class="w3-table w3-bordered w3-hoverable w3-responsive w3-centered w3-large">
          </table>
          <table id="tabla2" class="w3-table-all w3-hoverable table-css-border-1" style="display:block;position: absolute;padding:5px 5px 5px 5px;">
            <thead style="background:#2595EF;color:white;fontWeight:bold"></thead>
          </table>
          <div id="bannTrabajadas"style="display:none;font-size: 14 px;color:white;background:#AAAAAA;absolute;padding:5px 5px 5px 50px;box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 3px 16px 0 rgba(0, 0, 0, 0.19);">
            <a id="lblTrabajadas" style="" onclick="regresarModal();cambiaModal('modalCont','modalIngresarPaso');">Cantidad Trabajadas</a>
          </div>
          <table id="tabla3" class="w3-table-all w3-hoverable table-css-border-1" style="display:none;position: absolute;padding:5px 5px 5px 5px;">
            <thead style="background:#2595EF;color:white;fontWeight:bold"></thead>
          </table>
          <div id="bannMovimientos"style="display:none;font-size: 14 px;color:white;background:#AAAAAA;absolute;padding:5px 5px 5px 50px;box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1), 0 3px 16px 0 rgba(0, 0, 0, 0.19);">
            <a id="lblMovimientos" style="" onclick="regresarModal();cambiaModal('modalCont','modalIngresarPaso');">Movimientos</a>
          </div>
          <table id="tabla4" class="w3-table-all w3-hoverable table-css-border-1" style="display:none;position: absolute;padding:5px 5px 5px 5px;">
            <thead style="background:#2595EF;color:white;fontWeight:bold"></thead>
          </table>
        </div>
                <a id="lblMenu"style="display:none;"></a>
                <a id="lblIndex"style="display:none;"></a>
                <a id="lblStatus"style="display:none;"></a>
                <a id="lblKey"style="display:none;"></a>
                <a id="lblTiempoTimer"style="display:none;"></a>
                <a id="lblTimer"style="color:white;display:none;"></a>        
      </div>
      
    </div>

    <!-- *****************************************************************************************************************
    ********************************************************************************************************************** modalReceta
    *******************************************************************************************************************-->
    <div id="modalReceta" class="w3-modal" style="padding-top: 83px;">
      <div class="w3-modal-content" style="height:1270px;">
        <div style="background:orange;padding:5px 5px 5px 30px;">
          <table style="width:100%;">
              <tr>
                <td style="width:80%;text-align:left;">
                  <input class='w3-textbox w3-round-large' type='text' style='width:250px;text-align:left ;' id='txtTitulo' placeholder="Nombre...">
                </td>
                <td style="width:20%;padding-right : 25px;padding-top:10px;text-align:right;">
                  <i class="material-icons" onclick="cerrarModal('modalReceta')">close</i>
                </td>
                <a id="lblIndiceR" style="display:none;"></a>
              </tr>
          </table>
        </div >
          <div id="conten" style="background:#FFFFCF;"><br>
            <table> <!-- ********************************************************************************************************************* Volumen de agua Dough-in ********* -->
              <tr >
                <td style="width:35%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Volumen de Agua Mash:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVADR").select()' id='txtVADR' value='0'>
                  <a style='cursor:pointer;'  id='lblVADR' onclick='convertVol(document.getElementById("txtVADR").value,"lblVADR","txtVADR","lblTASm")'> L</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;font-size:18px;color:grey;">
                </td>
              </tr>
            <!-- </table>
            <table>  -->
              <!--********************************************************************************************************************* Temperatura de agua Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Temperatura de Agua Dough-in:</a>
                </td>
                <td style="width:55%;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTADR").select()' id='txtTADR' value='0'>
                  <a style='cursor:pointer;'  id='lblTADR' onclick='convertTemp(document.getElementById("txtTADR").value,"lblTADR","txtTADR","lblTASm")'> C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* pH de agua Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>pH de agua Dough-in:</a>
                </td>
                <td style="width:25%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtPADR").select()' id='txtPADR' value='0'>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Tiempo de Mash ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Tiempo de Mash:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTDMR").select()' id='txtTDMR' value='0'>
                  <a> min</a>
                </td>
                </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Temperatura Despues de Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Temp Despues de Dough-in:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTDDR").select()' id='txtTDDR' value='0'>
                  <a style='cursor:pointer;'  id='lblTDDR' onclick='convertTemp(document.getElementById("txtTDDR").value,"lblTDDR","txtTDDR","lblTASm")'> C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* pH Despues de Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>pH Despues de Dough-in:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtPDDR").select()' id='txtPDDR' value='0'>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Tiempo de Vorlauff ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Tiempo de Vorlauff:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTDVR").select()' id='txtTDVR' value='0'>
                  <a> min</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Volumen de agua Sparge ********* -->
              <tr >
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Volumen de Agua Sparge:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVASR").select()' id='txtVASR' value='0'>
                  <a style='cursor:pointer;'  id='lblVASR' onclick='convertVol(document.getElementById("txtVASR").value,"lblVASR","txtVASR","lblTASm")'> L</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Temperatura Antes de Sparge ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Temperatura Antes de Sparge:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTASR").select()' id='txtTASR' value='0'>
                  <a style='cursor:pointer;'  id='lblTASR' onclick='convertTemp(document.getElementById("txtTASR").value,"lblTASR","txtTASR","lblTASm")'> C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Tiempo de Sparge ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Tiempo de Sparge:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTDSR").select()' id='txtTDSR' value='0'>
                  <a> min</a>
                </td>
                </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Densidad First Run ********* -->
              <tr>
                <td style="width:45%;padding-top: 5px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Densidad First Run:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtDFRR").select()' id='txtDFRR' value='0'>
                  <a style='cursor:pointer;'  id='lblDFR' onclick='convertDens(document.getElementById("txtDFRR").value,"lblDFR","txtDFRR","lblTASm")'> P</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Densidad Last Run ********* -->
              <tr>
                <td style="width:45%;padding-top: 5px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Densidad Last Run:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtDLRR").select()' id='txtDLRR' value='0'>
                  <a style='cursor:pointer;'  id='lblDLRR' onclick='convertDens(document.getElementById("txtDLRR").value,"lblDLRR","txtDLRR","lblTASm")'> P</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Densidad Antes Boil ********* -->
              <tr>
                <td style="width:45%;padding-top: 5px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Densidad Antes de Boil:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtDABR").select()' id='txtDABR' value='0'>
                  <a style='cursor:pointer;'  id='lblDABR' onclick='convertDens(document.getElementById("txtDABR").value,"lblDABR","txtDABR","lblTASm")'> P</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Volumen Antes Boil ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Volumen Antes de Boil:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVABR").select()' id='txtVABR' value='0'>
                  <a style='cursor:pointer;'  id='lblVABR' onclick='convertVol(document.getElementById("txtVABR").value,"lblVABR","txtVABR","lblTASm")'> L</a>
                </td>
              </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Hop 1 ********* -->
              <tr>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='text' style='width:140px;text-align:left ;' onclick='document.getElementById("txtHopR1").select()' id='txtHopR1' placeholder="Lupulo 1...">
                </td>
                <td style="text-align:center;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtHopW1").select()' id='txtHopW1' value='0' >
                        <a style='cursor:pointer;'  id='lblHopW1' onclick='convertPesoR(document.getElementById("txtHopW1").value,"lblHopW1","txtHopW1")'> gr</a><br>
                </td>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:40px;text-align:left ;' onclick='document.getElementById("txtHopT1").select()' id='txtHopT1' value='0' >
                        <a> min</a><br>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Hop 2 ********* -->
              <tr>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='text' style='width:140px;text-align:left ;' onclick='document.getElementById("txtHopR2").select()' id='txtHopR2' placeholder="Lupulo 2...">
                </td>
                <td style="text-align:center;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtHopW2").select()' id='txtHopW2' value='0' >
                        <a style='cursor:pointer;'  id='lblHopW2' onclick='convertPesoR(document.getElementById("txtHopW2").value,"lblHopW2","txtHopW2")'> gr</a><br>
                </td>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:40px;text-align:left ;' onclick='document.getElementById("txtHopT2").select()' id='txtHopT2' value='0' >
                        <a> min</a><br>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Hop 3 ********* -->
              <tr>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='text' style='width:140px;text-align:left ;' onclick='document.getElementById("txtHopR3").select()' id='txtHopR3' placeholder="Lupulo 3...">
                </td>
                <td style="text-align:center;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtHopW3").select()' id='txtHopW3' value='0' >
                        <a style='cursor:pointer;'  id='lblHopW3' onclick='convertPesoR(document.getElementById("txtHopW3").value,"lblHopW3","txtHopW3")'> gr</a><br>
                </td>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:40px;text-align:left ;' onclick='document.getElementById("txtHopT3").select()' id='txtHopT3' value='0' >
                        <a> min</a><br>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Adj 1 ********* -->
              <tr>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='text' style='width:140px;text-align:left ;' onclick='document.getElementById("txtAdjR1").select()' id='txtAdjR1' placeholder="Adjunto 1...">
                </td>
                <td style="text-align:center;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtAdjW1").select()' id='txtAdjW1' value='0' >
                        <a style='cursor:pointer;'  id='lblAdjW1' onclick='convertPesoR(document.getElementById("txtAdjW1").value,"lblAdjW1","txtAdjW1")'> pz</a><br>
                </td>
                <td style="text-align:left;font-size:16px;padding:10px;">
                        <input class='w3-textbox w3-round-large' type='number' style='width:40px;text-align:left ;' onclick='document.getElementById("txtAdjT1").select()' id='txtAdjT1' value='0' >
                        <a> min</a><br>
                </td>
              </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Volumen de Transferencia ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Volumen de Transferencia:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVDTR").select()' id='txtVDTR' value='0'>
                  <a style='cursor:pointer;'  id='lblVDTR' onclick='convertVol(document.getElementById("txtVDTR").value,"lblVDTR","txtVDTR","lblTASm")'> L</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Temperatura de Transferencia ********* -->
              <tr>
                <td style="width:45%;padding:5px;text-align:right;font-size:18px;">
                  <a>Temperatura de Transferencia:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtTDTR").select()' id='txtTDTR' value='0'>
                  <a style='cursor:pointer;'  id='lblTDTR' onclick='convertTemp(document.getElementById("txtTDTR").value,"lblTDTR","txtTDTR","lblTASm")'> C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* pH Despues de Transferencia ********* -->
              <tr>
                <td style="width:45%;padding:5px;text-align:right;font-size:18px;">
                  <a>pH Despues de Transferencia:</a>
                </td>
                <td style="width:55%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtPDTR").select()' id='txtPDTR' value='0'>
                </td>
                </tr>
            </table>
            <div class="w3-center" id="bntGuardarReceta">
              <button class="w3-btn w3-round-xlarge w3-red" onclick="addReceta();">GUARDAR</button>
            </div><br>
            <div class="w3-center" id="bntIniciarLote">
              <button class="w3-btn w3-round-xlarge w3-red" onclick="addReceta();">INICIAR</button>
            </div><br>
          </div>
      </div>
    </div>
    <div id="modalBrewSheet" class="w3-modal" style="padding-top: 83px;display:none">
      <div class="w3-modal-content" style="height:1770px;">
        <div style="background:orange;padding:5px 5px 5px 30px;">
          <table style="width:100%;">
              <tr>
                <td style="width:80%;text-align:left;">
                  <a style="font: 24px Arial, Helvetica, sans-serif;color:#000;">IPA Citra 1 BBL</a>
                </td>
                <td style="width:20%;padding-right : 25px;padding-top:10px;text-align:right;">
                  <i class="material-icons" onclick="cerrarModal('modalBrewSheet')">close</i>
                </td>
              </tr>
          </table>
        </div >
          <div id="conten" style="background:#FFFFCF;"><br>
            <table> <!-- ********************************************************************************************************************* Volumen de agua Dough-in ********* -->
              <tr >
                <td style="width:35%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Volumen de Agua Mash:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVAD").select()' id='txtVAD' value='0'>
                  <a style='cursor:pointer;'  id='lblVAD' onclick='convertVol(document.getElementById("txtVAD").value,"lblVAD","txtVAD","lblVADm")'> L</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblVADm'>156.5 L</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Caletar agua de Mash ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Calentar agua de mash:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblCAMf","lblCAMh");setCAMSW();'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblCAMf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblCAMh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
              <div class="w3-round-large w3-center" id="divCAMTimer" style="display:none;width:70%;margin:0 auto;">
                <div class="w3-card w3-center w3-round-large" style="background:grey;">
                  <table>
                    <tr>
                      <td style="width:75%;text-align:right;font-size:18px;color:white;">
                        <a>Calentando Agua:</a>
                      </td>
                      <td style="width:25%;text-align:right;color:white;font-size:18px;">
                        <b><a id="lblCAMTimer">00:00:00</a></b>
                      </td>
                    </tr>
                  </table>
                        <a id="lblCAMTimeout" style="display:none">on</a>
                </div><br>
              </div> 
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Temperatura de agua Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Temperatura de Agua Dough-in:</a>
                </td>
                <td style="width:25%;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtTAD").select()' id='txtTAD' value='0'>
                  <a style='cursor:pointer;'  id='lblTAD' onclick='convertTemp(document.getElementById("txtTAD").value,"lblTAD","txtTAD","lblTADm")'> C</a>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblTADm'>156.5 C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* pH de agua Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>pH de agua Dough-in:</a>
                </td>
                <td style="width:25%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtPAD").select()' id='txtPAD' value='0'>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblPADm'>4.5</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Iniciar Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 15px;text-align:right;font-size:18px;">
                  <a>Iniciar Dough-in:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblIDIf","lblIDIh");setTimerout("lblCAMTimeout");'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblIDIf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblIDIh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Temperatura Despues de Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Temp Despues de Dough-in:</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtTDD").select()' id='txtTDD' value='0'>
                  <a style='cursor:pointer;'  id='lblTDD' onclick='convertTemp(document.getElementById("txtTDD").value,"lblTDD","txtTDD","lblTDDm")'> C</a>
                </td>
                <td style="width:25%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblTDDm'>156.5 C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* pH Despues de Dough-in ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>pH Despues de Dough-in:</a>
                </td>
                <td style="width:25%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtPDD").select()' id='txtPDD' value='0'>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblPDDm'>4.5</a>
                </td>
                </tr>
            </table>
            <div id="divMashTimer">
                  <table>
                    <tr>
                      <td style="width:75%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                        <a ondblclick="addToBoil()">Restante Mash:</a>
                      </td>
                      <td style="width:25%;padding-top: 15px;padding-bottom: 15px;text-align:right;color:#800000">
                        <b><a id="lblMashTimer">00:40:00</a></b>
                        <a id="lblMashTime" style="display:none;">40</a>
                      </td>
                    </tr>
                  </table>
            </div>
            <table> <!-- ********************************************************************************************************************* Inicio De Maceracion ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Inicio De Maceracion:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblIDMf","lblIDMh");setMashTimer();'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblIDMf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblIDMh"></a></b>
                      </td>
                    </tr>
                  </table>
                    <a id="lblMashTimeout" style="display:none">on</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Volumen de agua Sparge ********* -->
              <tr >
                <td style="width:35%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Volumen de Agua Sparge:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVAS").select()' id='txtVAS' value='0'>
                  <a style='cursor:pointer;'  id='lblVAS' onclick='convertVol(document.getElementById("txtVAS").value,"lblVAS","txtVAS","lblVASm")'> L</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblVASm'>156.5 L</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Calentar Agua de Sparge ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Calentar Agua de Sparge:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check w3-green' type='checkbox' style='cursor:pointer' onchange='saveDate("lblCASf","lblCASh");setCASSW()'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblCASf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblCASh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
              <div class="w3-round-large w3-center" id="divCASTimer" style="display:none;width:70%;margin:0 auto;">
                <div class="w3-card w3-center w3-round-large" style="background:grey;">
                  <table>
                    <tr>
                      <td style="width:75%;text-align:right;font-size:18px;color:white;">
                        <a>Calentando Agua:</a>
                      </td>
                      <td style="width:25%;text-align:right;color:white;font-size:18px;">
                        <b><a id="lblCASTimer">00:00:00</a></b>
                      </td>
                    </tr>
                  </table>
                        <a id="lblCASTimeout" style="display:none">on</a>
                </div><br>
              </div> 
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Inicio De Vorlauff ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;text-align:right;font-size:18px;">
                  <a>Inicio De Vorlauff:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblIDVf","lblIDVh");setTimerout("lblMashTimeout");reloadMashTimer();setVorlauffSW();'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblIDVf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblIDVh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
              <div class="w3-round-large w3-center" id="divVorlauffTimer" style="display:none;width:70%;background:grey;margin:0 auto">
                <div class="w3-card w3-center w3-round-large">
                  <table>
                    <tr>
                      <td style="width:75%;text-align:right;font-size:18px;color:white;">
                        <a>Tiempo en Vorlauff:</a>
                      </td>
                      <td style="width:25%;text-align:right;color:white;font-size:18px;">
                        <b><a id="lblVorlauffTimer">00:00:00</a></b>
                      </td>
                    </tr>
                  </table>
                        <a id="lblVorlauffTimeout" style="display:none">on</a>
                </div>
              </div> 
            <table> <!-- ********************************************************************************************************************* Temperatura Antes de Sparge ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Temperatura Antes Sparge:</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtTAS").select()' id='txtTAS' value='0'>
                  <a style='cursor:pointer;'  id='lblTAS' onclick='convertTemp(document.getElementById("txtTAS").value,"lblTAS","txtTAS","lblTASm")'> C</a>
                </td>
                <td style="width:25%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblTASm'>156.5 C</a>
                </td>
                </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Inicio De Sparge ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Inicio De Sparge:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblIDSf","lblIDSh");setTimerout("lblVorlauffTimeout");setTimerout("lblCASTimeout");'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblIDSf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblIDSh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Transfer a Coccion ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Transfer a Boil:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblTACf","lblTACh")'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblTACf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblTACh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Densidad First Run ********* -->
              <tr>
                <td style="width:35%;padding-top: 5px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Densidad First Run:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:70px;text-align:right ;' onclick='document.getElementById("txtDFR").select()' id='txtDFR' value='0'>
                  <a style='cursor:pointer;'  id='lblDFR' onclick='convertDens(document.getElementById("txtDFR").value,"lblDFR","txtDFR","lblDFRm")'> P</a>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblDFRm'>12 P</a>
                </td>
              </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Densidad Last Run ********* -->
              <tr>
                <td style="width:35%;padding-top: 5px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Densidad Last Run:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:70px;text-align:right ;' onclick='document.getElementById("txtDLR").select()' id='txtDLR' value='0'>
                  <a style='cursor:pointer;'  id='lblDLR' onclick='convertDens(document.getElementById("txtDLR").value,"lblDLR","txtDLR","lblDLRm")'> P</a>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblDLRm'>12 P</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Densidad Antes Boil ********* -->
              <tr>
                <td style="width:35%;padding-top: 5px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Densidad Antes de Boil:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:80px;text-align:right ;' onclick='document.getElementById("txtDAB").select()' id='txtDAB' value='0'>
                  <a style='cursor:pointer;'  id='lblDAB' onclick='convertDens(document.getElementById("txtDAB").value,"lblDAB","txtDAB","lblDABm")'> P</a>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblDABm'>12 P</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Volumen Antes Boil ********* -->
              <tr>
                <td style="width:35%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Volumen Antes de Boil:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVAB").select()' id='txtVAB' value='0'>
                  <a style='cursor:pointer;'  id='lblVAB' onclick='convertVol(document.getElementById("txtVAB").value,"lblVAB","txtVAB","lblVABm")'> L</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblVABm'>156.5 L</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Calentar agua de Boil ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Calentar agua de Boil:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblCABf","lblCABh");setCABSW();'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblCABf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblCABh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
              <div class="w3-round-large w3-center" id="divCABTimer" style="display:none;width:70%;margin:0 auto;">
                <div class="w3-card w3-center w3-round-large" style="background:grey;">
                  <table>
                    <tr>
                      <td style="width:75%;text-align:right;font-size:18px;color:white;">
                        <a>Calentando Agua:</a>
                      </td>
                      <td style="width:25%;text-align:right;color:white;font-size:18px;">
                        <b><a id="lblCABTimer">00:00:00</a></b>
                      </td>
                    </tr>
                  </table>
                        <a id="lblCABTimeout" style="display:none">on</a>
                </div><br>
              </div> 
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <div id="divBoilTimer">
                  <table>
                    <tr>
                      <td style="width:75%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                        <a ondblclick="addToBoil()">Restante Boil:</a>
                      </td>
                      <td style="width:25%;padding-top: 15px;padding-bottom: 15px;text-align:right;color:#800000">
                        <b><a id="lblBoilTimer">01:30:00</a></b>
                        <a id="lblBoilTime" style="display:none;">90</a>
                      </td>
                    </tr>
                  </table>
            </div>
            <table> <!-- ********************************************************************************************************************* Iniciar Boil ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a ondblclick="addToBoil()">Iniciar Boil:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblIBf","lblIBh");setBoilTimer();setTimerout("lblCABTimeout");'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblIBf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblIBh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Hop 1 ********* -->
              <tr>
                <td style="width:55%;padding-right:10px;text-align:right;font-size:16px;">
                  <a>Chinook</a><br>
                  <a id='lblHop1m'>180.5 gr</a><br>
                  <a>60 min</a>
                </td>
                <td style="width:45%;text-align:left;font-size:16px;padding-top:10px;padding-bottom:10px;">
                  <table>
                    <tr>
                      <td>
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtHop1").select()' id='txtHop1' value='0'>
                      </td>
                      <td>
                        <a style='cursor:pointer;'  id='lblHop1' onclick='convertPeso(document.getElementById("txtHop1").value,"lblHop1","txtHop1","lblHop1m")'> gr</a><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <input class='w3-check' type='checkbox' style='cursor:pointer;text-align:left' onchange='saveDate("lblHop1f","lblHop1h")'>
                      </td>
                      <td>
                        <b><a id="lblHop1f" style="display:none;"></a></b>
                        <b><a id="lblHop1h"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Hop 2 ********* -->
              <tr>
                <td style="width:55%;padding-right:10px;text-align:right;font-size:16px;">
                  <a>Chinook</a><br>
                  <a id='lblHop2m'>180.5 gr</a><br>
                  <a>60 min</a>
                </td>
                <td style="width:45%;text-align:left;font-size:16px;padding-top:10pxpadding-bottom:10px;">
                  <table>
                    <tr>
                      <td>
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtHop2").select()' id='txtHop2' value='0'>
                      </td>
                      <td>
                        <a style='cursor:pointer;'  id='lblHop2' onclick='convertPeso(document.getElementById("txtHop2").value,"lblHop2","txtHop2","lblHop2m")'> gr</a><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <input class='w3-check' type='checkbox' style='cursor:pointer;text-align:left' onchange='saveDate("lblHop2f","lblHop2h")'>
                      </td>
                      <td>
                        <b><a id="lblHop2f" style="display:none;"></a></b>
                        <b><a id="lblHop2h"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Hop 3 ********* -->
              <tr>
                <td style="width:55%;padding-right:10px;text-align:right;font-size:16px;">
                  <a>Chinook</a><br>
                  <a id='lblHop3m'>180.5 gr</a><br>
                  <a>60 min</a>
                </td>
                <td style="width:45%;text-align:left;font-size:16px;padding-top:10pxpadding-bottom:10px;">
                  <table>
                    <tr>
                      <td>
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtHop3").select()' id='txtHop3' value='0'>
                      </td>
                      <td>
                        <a style='cursor:pointer;'  id='lblHop3' onclick='convertPeso(document.getElementById("txtHop3").value,"lblHop3","txtHop3","lblHop3m")'> gr</a><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <input class='w3-check' type='checkbox' style='cursor:pointer;text-align:left' onchange='saveDate("lblHop3f","lblHop3h")'>
                      </td>
                      <td>
                        <b><a id="lblHop3f" style="display:none;"></a></b>
                        <b><a id="lblHop3h"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Adj 1 ********* -->
              <tr>
                <td style="width:55%;padding-right:10px;text-align:right;font-size:16px;">
                  <a>Chinook</a><br>
                  <a id='lblAdj1m'>180.5 gr</a><br>
                  <a>60 min</a>
                </td>
                <td style="width:45%;text-align:left;font-size:16px;padding-top:10pxpadding-bottom:10px;">
                  <table>
                    <tr>
                      <td>
                        <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtAdj1").select()' id='txtAdj1' value='0'>
                      </td>
                      <td>
                        <a style='cursor:pointer;'  id='lblAdj1' onclick='convertPeso(document.getElementById("txtAdj1").value,"lblAdj1","txtAdj1","lblAdj1m")'> gr</a><br>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <input class='w3-check' type='checkbox' style='cursor:pointer;text-align:left' onchange='saveDate("lblAdj1f","lblAdj1h")'>
                      </td>
                      <td>
                        <b><a id="lblAdj1f" style="display:none;"></a></b>
                        <b><a id="lblAdj1h"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Iniciar Whirlpool ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Iniciar Whirlpool:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblIWf","lblIWh");setTimerout("lblBoilTimout");reloadBoilTimer();setIWSW();'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblIWf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblIWh"></a></b>
                      </td>
                    </tr>
                    <a id="lblBoilTimout" style="display:none">on</a>
                  </table>
                </td>
              </tr>
            </table>
              <div class="w3-round-large w3-center" id="divIWTimer" style="display:none;width:70%;margin:0 auto;">
                <div class="w3-card w3-center w3-round-large" style="background:grey;">
                  <table>
                    <tr>
                      <td style="width:75%;text-align:right;font-size:18px;color:white;">
                        <a>Tiempo en Whirlpool:</a>
                      </td>
                      <td style="width:25%;text-align:right;color:white;font-size:18px;">
                        <b><a id="lblIWTimer">00:00:00</a></b>
                      </td>
                    </tr>
                  </table>
                        <a id="lblIWTimeout" style="display:none">on</a>
                </div><br>
              </div> 
            <table> <!-- ********************************************************************************************************************* Volumen de Transferencia ********* -->
              <tr>
                <td style="width:35%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Volumen de Transferencia:</a>
                </td>
                <td style="width:35%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:90px;text-align:right ;' onclick='document.getElementById("txtVDT").select()' id='txtVDT' value='0'>
                  <a style='cursor:pointer;'  id='lblVDT' onclick='convertVol(document.getElementById("txtVDT").value,"lblVDT","txtVDT","lblVDTm")'> L</a>
                </td>
                <td style="width:30%;padding: 5px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblVDTm'>156.5 L</a>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Transferir a Fermentador ********* -->
              <tr>
                <td style="width:45%;padding:5px;text-align:right;font-size:18px;">
                  <a>Transferir a Fermentador:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblTAFf","lblTAFh");setTimerout("lblIWTimeout");'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblTAFf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblTAFh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Temperatura de Transferencia ********* -->
              <tr>
                <td style="width:45%;padding:5px;text-align:right;font-size:18px;">
                  <a>Temperatura de Transferencia:</a>
                </td>
                <td style="width:25%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtTDT").select()' id='txtTDT' value='0'>
                  <a style='cursor:pointer;'  id='lblTDT' onclick='convertTemp(document.getElementById("txtTDT").value,"lblTDT","txtTDT","lblTDTm")'> C</a>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblTDTm'>156.5 C</a>
                </td>
                </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* pH Despues de Transferencia ********* -->
              <tr>
                <td style="width:45%;padding:5px;text-align:right;font-size:18px;">
                  <a>pH Despues de Transferencia:</a>
                </td>
                <td style="width:25%;padding: 5px;text-align:left;" >
                  <input class='w3-textbox w3-round-large' type='number' style='width:60px;text-align:right ;' onclick='document.getElementById("txtPDT").select()' id='txtPDT' value='0'>
                </td>
                <td style="width:30%;padding-top:-10px;text-align:left;font-size:18px;color:grey;">
                  <a style="font-size:14px">Meta:</a><br>
                  <a id='lblPDTm'>4.5</a>
                </td>
                </tr>
            </table>
            <div style="border-bottom: 1px solid grey;width:100%"></div>
            <table> <!-- ********************************************************************************************************************* Agregar Levadura ********* -->
              <tr>
                <td style="width:45%;padding-top: 15px;padding-bottom: 15px;text-align:right;font-size:18px;">
                  <a>Agregar Levadura:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblALf","lblALh")'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblALf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblALh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Iniciar Limpieza ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Iniciar Limpieza de Cocina:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblILCf","lblILCh")'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblILCf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblILCh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            <table> <!-- ********************************************************************************************************************* Finalizar Limpieza ********* -->
              <tr>
                <td style="width:45%;padding: 5px;text-align:right;font-size:18px;">
                  <a>Finalizar Limpieza de Cocina:</a>
                </td>
                <td style="width:10%;padding: 5px;text-align:left;">
                  <input class='w3-check' type='checkbox' style='cursor:pointer' onchange='saveDate("lblFLCf","lblFLCh")'>
                </td>
                <td style="width:45%;padding: 5px;text-align:left;">
                  <table>
                    <tr>
                      <td>
                        <b><a id="lblFLCf"></a></b>
                      </td>
                    </tr>
                    <tr>
                      <td>
                        <b><a id="lblFLCh"></a></b>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>
            
          </div>
      </div>
    </div>
    
    <div class="w3-modal" id="modalKegscaneada">
      <div class="w3-modal-content w3-card" id="modalKegscanCont">
        <header class="w3-container w3-black"> 
          <table>
            <tr>
              <td>
                <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">INFORMACION DE KEG</h6>
              </td>
              <td style="position:absolute;right:80px;padding-top:7px">
                <span onclick="kegToQR()" class="w3-button material-icons" style=";">qr_code_2</span>
              </td>
              <td style="position:absolute;right:80px;padding-top:7px;display:none">
                <span onclick="popKegs(document.getElementById('lblSts').innerHTML);document.getElementById('modalKegscaneada').style.display='none';initQRscan('editPaka')" class="w3-button material-icons" style=";">edit</span>
              </td>
              <td style="position:absolute;right:40px;padding-top:7px">
                <span onclick="popKegs(document.getElementById('lblSts').innerHTML);document.getElementById('modalKegscaneada').style.display='none';document.getElementById('modalKegs').style.display='block';" class="w3-button material-icons" style=";">west</span>
              </td>
              <td>
                <span onclick="document.getElementById('modalKegscaneada').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:17px;">close</span>
              </td>
            </tr>
          </table>
        </header>      
        <div >
          <form style="font-size:16px;letter-spacing:1px;color:#002D3E;padding:20px;text-transform:uppercase">
            <div class="">
              <h5 id="lblKegTitulo" style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-bottom:20px"></h5>
              <table>
                <tr>
                  <td colspan="3" >
                    <a><img src="https://lh3.googleusercontent.com/pw/AP1GczPflFo1mJL3uESUsetaLZymcecNzD1tB23k2LqqDNuQG_PEHx7jdO6HKbRgtpVvKwj7I9ksbKro0m4exp2mABraZnL6mDR8uBYrm6OAQfQNBvGvSa_5mC1QzCiTs9nlSBQPd4vvRuEImtUUn44C3GLScg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                    <b><a id="lblFechaScanK">10/Abr/2024 20:10:00</a></b>
                  </td>
                </tr>
                <tr>
                  <td style="padding-top:10px">
                    <a><img src="https://lh3.googleusercontent.com/pw/AP1GczOfVYKsphW-Jg40dFW-KMkjO537VauVsSYZa5-ztDx05McFPxfXZX5fuaW8Hm9YARFArGXncU8CCUyoTaPcaoNIzpvpf6P28FAbdH0TI8Lw5-Bkq_l51HZ_LxHNh6Imf86-KVWaQBj8T68Sz65pjUi3Ug=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                    <b><a id="lblStatusScanK"></a></b><br><br>
                    <a><img src="https://lh3.googleusercontent.com/pw/AP1GczOKZM3WX_1W23huHtCBqQoUBKHqfdihJ9hlX7TADe5yPyjQnvnpfFNyhocqXwg0bDOpIyS6ostDn8TBx_vIOL423DnFTtjj_48yH6N3GScCdzOqXarBLg5GmKKLSRuIIOEc4yFCreiQL_bDAHL84-v-gA=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                    <b><a id="lblCapacidadScanK"></a><a> L, </a><a id="lblCapacidadTotalK"></a><a> L</a></b><br>
                    <b><a id="lblContenidoScanK" style="padding-left:35px"></a></b><br>
                    <b><a id="lblLoteScanK" style="padding-left:35px"></a></b><br><br>
                    <a><img src="https://lh3.googleusercontent.com/pw/AP1GczM1beb8QzHgq5PgAJVvNw3t1YfnRk07SrRYlMVSisRtephLppjLurgjJQIFhfYyUr0kQYUBtwYkXvvCEvrSYokuh2JYA9k8-mUitWGreFiHmbgCOeMM9ilT_pp7gJPCXCQIEXtjImHy47ldQwq9pSC2ww=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                    <b><a id="lblUbicacionScan"></a></b><br><br>
                  </td>      
                  <td style="padding:10px;display:" colspan="3" >
                      <a style="display:none" id="lblURLScanK"></a>
                    <div class="" style="padding:10px">
                      <img id="imgScanK" src="https://drive.google.com/thumbnail?id=1USjjJQOAv9IoKaondysaiO-r48QJcJ8u" width="100px" onclick="window.open(document.getElementById('lblURLScanK').innerHTML)"/>
                    </div>
                  </td>
                </tr>
              </table>
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-top:20px;padding-bottom:20px;">REGISTRAR PASO</h5>
              <table>
                <tr>
                  <td style="display:none">
                    <input name="paso" id="txtPasoScan">
                  </td>                      
                  <td style="padding-bottom:10px" colspan="2">
                    <div class="w3-dropdown-hover">
                      <button id="btnPasoScan" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('divPasoScan')">PASO</button>
                      <table class="w3-dropdown-content w3-border w3-card" id="divPasoScan" style="font-family: Raleway, sans-serif;font-size:12px;display:none">
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','LAVAR KEG');hidePasos()">
                            <a>LAVAR KEG</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','LLENAR KEG');closeMenuBtn('divPasoScan');abrirModal('divCantidadScanK');cerrarModal('divClienteScan');abrirModal('divFuenteScanK');cerrarModal('divCobroScan');">
                            <a>LLENAR KEG</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','VENDER KEG');closeMenuBtn('divPasoScan');cerrarModal('divCantidadScanK');abrirModal('divClienteScan');cerrarModal('divFuenteScanK');cerrarModal('divCobroScan');">
                            <a>VENDER KEG</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','COBRAR KEG');closeMenuBtn('divPasoScan');cerrarModal('divCantidadScanK');cerrarModal('divClienteScan');cerrarModal('divFuenteScanK');abrirModal('divCobroScan');">
                            <a>COBRAR KEG</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','RECOGER KEG');closeMenuBtn('divPasoScan');cerrarModal('divCantidadScanK');cerrarModal('divClienteScan');cerrarModal('divFuenteScanK');cerrarModal('divCobroScan');">
                            <a>RECOGER KEG</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','DESACTIVAR KEG');closeMenuBtn('divPasoScan');cerrarModal('divCantidadScanK');cerrarModal('divClienteScan');cerrarModal('divFuenteScanK');cerrarModal('divCobroScan');">
                            <a>DESACTIVAR KEG</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScan','txtPasoScan','REACTIVAR KEG');closeMenuBtn('divPasoScan');cerrarModal('divCantidadScanK');cerrarModal('divClienteScan');cerrarModal('divFuenteScanK');cerrarModal('divCobroScan');">
                            <a>REACTIVAR KEG</a>
                          </td>  
                        </tr>
                      </table>
                    </div>
                  </td>
                </tr>
              </table>
              <table>
                <!-- <br> -->
                <tr >
                  <td style="display:none">
                    <input name="cliente" id="txtClienteScan">
                  </td>                      
                  <td style="padding-bottom:10px;display:none" colspan="4" id="divClienteScan">
                    <div class="w3-dropdown-hover">
                      <button id="btnClienteScan" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('tblClientesScan')">CLIENTES</button>
                      <table class="w3-dropdown-content w3-border w3-card" id="tblClientesScan" style="display:none"></table>
                    </div>
                  </td>
                  <td style="display:none">
                    <input name="estilo" id="txtFuenteScanK">
                  </td>                      
                  <td style="padding-bottom:10px;display:none;" colspan="4" id="divFuenteScanK">
                    <table>
                      <tr>
                        <td>
                          <div class="w3-dropdown-hover" style="">
                            <button id="btnFuenteScan" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:90px;" type="button" onclick="closeMenuBtnD('tblFuenteScanK','tblFuenteScanK1');">FUENTE</button>
                            <table>
                              <tr>
                                <td>
                                  <table class="w3-dropdown-content w3-border w3-card" id="tblFuenteScanK" style="display:none"></table>
                                  <table class="w3-dropdown-content w3-border w3-card" id="tblFuenteScanK1" style="display:none"></table>
                                </td>
                              </tr>
                            </table>
                          </div>
                        </td>
                        <td>
                          <table>
                            <tr>
                              <td id="lblFuenteLote" style="font-family: Raleway, sans-serif;font-size:12px;font-weight:bold;"></td>
                            </tr>
                            <tr>
                              <td id="lblFuenteEstilo" style="font-family: Raleway, sans-serif;font-size:12px;font-weight:bold;"></td>
                            </tr>
                            <tr>
                              <td id="lblFuenteLitros" style="font-family: Raleway, sans-serif;font-size:12px;font-weight:bold;"></td>
                              <!-- <td> L</td> -->
                            </tr>
                          </table>
                        </td>
                        <td style="padding-left:10px;display:none" colspan="4" id="divCantidadScanK">
                          <table>
                            <tr>
                              <td>
                                <input name="cantidad" id="txtCantidadScanK" type="number" style="width:55px;font-size:14px;text-align:right;text-transform:uppercase;font-weight:bold;letter-spacing:1px;text-align:right" class="w3-input" placeholder="Cantidad" value="0">
                              </td>
                              <td style="text-align:left"> L</td>
                            </tr>
                          </table>
                        </td>
                      </tr>
                    </table>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:0px;display:none" colspan="4" id="divCobroScan">
                    <table>
                      <tr>
                        <td>
                          <input name="cobro" id="txtCobroScan" type="text" style="width:85px;font-size:14px;text-align:right;text-transform:uppercase;font-weight:bold;letter-spacing:1px;text-align:right" class="w3-input" placeholder="Cantidad" value="0" onkeyup="document.getElementById('txtCobroScan').value = formatCurrency(this.value)">
                        </td>
                        <td style="display:none">
                          <input name="metodo" id="txtMetodoScan" value="EFECTIVO">
                        </td>     
                        <td style="padding-bottom:10px" colspan="4">
                          <div class="w3-dropdown-hover">
                            <button id="btnMetodoScan" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('tblMetodoScan')">EFECTIVO</button>
                            <table class="w3-dropdown-content w3-card" id="tblMetodoScan" style="font-family: Raleway, sans-serif;font-size:12px;display:none;width:50px;">
                              <tr>
                                <td class="w3-bar-item w3-button" onclick="setDropdown('btnMetodoScan','txtMetodoScan','EFECTIVO');closeMenuBtn('tblMetodoScan');">
                                  <a>EFECTIVO</a>
                                </td>  
                              </tr>
                              <tr>
                                <td class="w3-bar-item w3-button" onclick="setDropdown('btnMetodoScan','txtMetodoScan','TARJETA');closeMenuBtn('tblMetodoScan');">
                                  <a>TARJETA</a>
                                </td>  
                              </tr>
                              <tr>
                                <td class="w3-bar-item w3-button" onclick="setDropdown('btnMetodoScan','txtMetodoScan','TRANSFERENCIA');closeMenuBtn('tblMetodoScan');">
                                  <a>TRANSFERENCIA</a>
                                </td>  
                              </tr>
                            </table>
                          </div>
                        </td>
                        <td style="display:none">
                          <input name="moneda" id="txtMonedaScan" value="PESOS">
                        </td>                      
                        <td style="padding-bottom:10px;" colspan="4">
                          <div class="w3-dropdown-hover">
                            <button id="btnMonedaScan" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('tblCobroScan')">PESOS</button>
                            <table class="w3-dropdown-content w3-card" id="tblCobroScan" style="font-family: Raleway, sans-serif;font-size:12px;display:none;width:120px;">
                              <tr>
                                <td class="w3-bar-item w3-button" onclick="setDropdown('btnMonedaScan','txtMonedaScan','PESOS');closeMenuBtn('tblCobroScan');">
                                  <a>PESOS</a>
                                </td>  
                              </tr>
                              <tr>
                                <td class="w3-bar-item w3-button" onclick="setDropdown('btnMonedaScan','txtMonedaScan','DOLARES');closeMenuBtn('tblCobroScan');">
                                  <a>DOLARES</a>
                                </td>  
                              </tr>
                            </table>
                          </div>
                        </td>
                      <!-- </tr>
                      <tr>                  -->
                      </tr>
                    </table>
                    <table>
                      <tr>
                        <td style="padding-left:60px">
                          <input id="chkInvoice" type="checkbox" style="color:black;border-radius:3px" checked>
                        </td>
                        <td colspan="3" style="padding-left:10px;font-size:14px;font-family:Raleway, sans-serif;letter-spacing:2px;font-weight:bold"> ENVIAR REMISION</td>
                        <!-- <td><button onclick="sendInvoice()">SEND</button></td> -->
                      </tr>
                    </table>
                  </td>
                </tr>
                  <td style="padding-left:20px;display:none">
                    <div class="">
                      <input type="button" class="w3-button w3-black material-icons" onclick="document.getElementById('FormControlFile').click()" value="photo_camera"/>   
                      <input name="imgEvidenciaScan" class="w3-button" type="file" id="FormControlFile" style="display:"/>
                    </div>
                  </td>
                </tr>
              </table>
              <table style="padding-top:20px">
                <tr>
                  <td style="padding-bottom:10px;">
                    <div class="">
                      <a style="display:none" id="lblIndexEvi"></a>
                      <!-- <h6 for="nota">NOTA</h6> -->
                      <textarea style="font-size:14px;text-transform:uppercase;letter-spacing:1px;color:#002D3E;width:320px;font-weight:bold" name="nota" placeholder="Nota" rows="3" id="txtNotaScan" class="w3-input"></textarea>
                    </div>                      
                  </td>
                </tr>
                <!-- <tr style="padding-top:20px">
                  <td>
                    <button type="submit" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%">GUARDAR</button>
                  </td>
                </tr> -->
              </table>
              <button onclick="document.getElementById('modalKegscaneada').style.display='none';initQRscan('paso');" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%">GUARDAR</button>
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-top:20px;padding-bottom:20px;">PASOS</h5>
              <table class="w3-table" id="tablaKegscan">
              </table>
            </div>
          </form>
        </div>

      </div>
    </div>

    <div class="w3-modal" id="modalVentaKegs">
      <div class="w3-modal-content w3-card" id="modalVentaKegsCont">
        <header class="w3-container w3-black"> 
          <table>
            <tr>
              <td>
                <h6 id="lblVentaTitulo" style="letter-spacing:1px;padding:10px;padding-top:20px">VENTA DE KEGS</h6>
              </td>
              <td style="position:absolute;right:40px;padding-top:7px;display:none" id="btnBackVenta">
                <span onclick="popVentaKegs();cerrarModal('btnBackVenta')" class="w3-button material-icons" style=";">west</span>
              </td>
              <td>
                <span onclick="cerrarModal('modalVentaKegs');cerrarModal('btnBackVenta')" class="w3-button w3-display-topright material-icons" style="padding-top:17px;">close</span>
              </td>

            </tr>
          </table>
        </header>      
        <div >
          <form style="font-size:16px;letter-spacing:1px;color:#002D3E;padding-left:00px;padding-right:20px;text-transform:uppercase">
            <div class="w3-container">
              <div class="">
                <div id="divFiltrarVentaKegs" style="padding-top:0px;padding-bottom:10px">
                  <div style="width:100%;padding-left: 5px;padding-top:10px;text-align:left;">
                    <input class="w3-input" type="text" id="txtFiltrarVentaKegs" placeholder="Buscar..." onclick="txtSelect()" onkeyup="filtrarTabla('txtFiltrarVentaKegs','tablaVentaKegs');"/>
                  </div>
                </div>
              </div>
              <table id="tablaVentaKegs" style="padding:20px"></table>
            </div>
          </form>
        </div>
        <h6 style="color:white;user-select:none">hello world</h6>
      </div>
    </div>

    <div class="w3-modal" id="modalFermentadorScaneado">
      <div class="w3-modal-content w3-card" id="modalFermentadorScanCont">
        <header class="w3-container w3-black"> 
          <table>
            <tr>
              <td>
                <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">INFORMACION DE FV/BT</h6>
              </td>
              <!-- <td style="position:absolute;right:120px;padding-top:7px">
                <span onclick="popFermentador(vesselToKey(document.getElementById('lblFermentadorTitulo').innerHTML))" class="w3-button material-icons" style=";">refresh</span>
              </td> -->
              <td style="position:absolute;right:80px;padding-top:7px">
                <span onclick="fermentadorToQR()" class="w3-button material-icons" style=";">qr_code_2</span>
              </td>
              <td style="position:absolute;right:80px;padding-top:7px;display:none">
                <span onclick="popKegs(document.getElementById('lblSts').innerHTML);document.getElementById('modalFermentadorScaneado').style.display='none';initQRscan('editPaka')" class="w3-button material-icons" style=";">edit</span>
              </td>
              <td style="position:absolute;right:40px;padding-top:7px">
                <span onclick="popFermentadores(document.getElementById('lblSts').innerHTML);document.getElementById('modalFermentadorScaneado').style.display='none';document.getElementById('modalFermentadores').style.display='block';" class="w3-button material-icons" style=";">west</span>
              </td>
              <td>
                <span onclick="document.getElementById('modalFermentadorScaneado').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:17px;">close</span>
              </td>
            </tr>
          </table>
        </header>      
        <div >
          <form  style="font-size:16px;letter-spacing:1px;color:#002D3E;padding:20px;text-transform:uppercase">
            <div class="">
              <h5 id="lblFermentadorTitulo" style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-bottom:20px"></h5><h6 id="lblCategoriaV" style="display:none"></h6>
              <table>
                <tr >
                  <td style="width:210px;vertical-align:top;font-size:14px" colspan="3">
                    <table>
                      <tr>
                        <td style="padding-top:10px;vertical-align:top">
                          <a><img src="https://lh3.googleusercontent.com/pw/AP1GczPflFo1mJL3uESUsetaLZymcecNzD1tB23k2LqqDNuQG_PEHx7jdO6HKbRgtpVvKwj7I9ksbKro0m4exp2mABraZnL6mDR8uBYrm6OAQfQNBvGvSa_5mC1QzCiTs9nlSBQPd4vvRuEImtUUn44C3GLScg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="top"></a>
                        </td>
                        <td>
                          <b><a id="lblFechaScanV" >10/Abr/2024 20:10:00</a></b>
                        </td>
                      </tr>
                    <!-- </table>
                    <table> -->
                      <tr>
                        <td style="padding-top:20px;vertical-align:top;">
                          <a><img src="https://lh3.googleusercontent.com/pw/AP1GczPTkdmODXZVEPmmnJUrquoO7YevWIIEd06dZ2cMmPgUd4RJSH6qOQYB5saWL25njV290K-mqKx7TPlq5MTimGb_Ui2bNCh7itguRH5EzkLL0H4vPHz1zqq_Xwo0CceePkSshB5wdzAkLt3ET2HRJkdGGg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                        </td>
                        <td style="padding-top:20px;">
                          <b><a id="lblCapacidadScanV"></a><a> L | </a><a id="lblContenidoScanV"></a><a> L </a></b><br>
                          <b><a id="lblLoteScanV">LOTE001</a></b><br>
                          <a id="lblEstiloScanV"></a>
                        </td>
                      </tr>
                      <tr>
                        <td style="padding-top:20px">
                          <a><img src="https://lh3.googleusercontent.com/pw/AP1GczOfVYKsphW-Jg40dFW-KMkjO537VauVsSYZa5-ztDx05McFPxfXZX5fuaW8Hm9YARFArGXncU8CCUyoTaPcaoNIzpvpf6P28FAbdH0TI8Lw5-Bkq_l51HZ_LxHNh6Imf86-KVWaQBj8T68Sz65pjUi3Ug=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                        </td>
                        <td style="padding-top:20px;">
                          <b><a id="lblStatusScanV"></a></b>
                        </td>
                      </tr>
                    </table>
                  </td>
                  <td style="width:90px;vertical-align:top;padding-left:0px;padding-bottom:20px" >
                      <a style="display:none" id="lblURLScanV"></a>
                    <div class="" style="padding:10px">
                      <img id="imgScanV" src="https://drive.google.com/thumbnail?id=1USjjJQOAv9IoKaondysaiO-r48QJcJ8u" width="110px" onclick="window.open(document.getElementById('lblURLScanV').innerHTML)"/>
                    </div>
                  </td>
                </tr>
              </table>
              <table style="padding-top:20px;width:300px;text-align:left">
                <tr>
                  <td style="vertical-align:top;padding-top:10px;width:10%;">
                    <a><img src="https://lh3.googleusercontent.com/pw/AP1GczNQJPdnP978UN2AlZ_i8TYwQjPiAR56rEPrQgh2AIiFlBfmBu5DdKZGBOOIRDG7vgv5YCfsaAjK4QUyFESD-WhVogeRyoG9PazsNY5QaB6MWu43IozSR_BDMhEt0o8euSoT00XJLFz8B8aX_sM6ICcHKw=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></a>
                  </td>
                  <td id="lblNotaScanV" style="text-align:left;padding-left:10px;font-size:12px;width:90%">
                    <a  style="text-align:left"></a>
                  </td>
                </tr>
              </table>
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-top:20px;padding-bottom:20px;">REGISTRAR PASO</h5>
              <table>
                <tr>
                  <td style="display:none">
                    <input name="paso" id="txtPasoScanV">
                  </td>                      
                  <td style="padding-bottom:10px" colspan="4">
                    <div class="w3-dropdown-hover">
                      <button id="btnPasoScanV" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('divPasoScanV')">PASO</button>
                      <table class="w3-dropdown-content w3-border w3-card" id="divPasoScanV" style="font-family: Raleway, sans-serif;font-size:12px;display:none">
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','LAVAR FERMENTADOR');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>LAVAR FERMENTADOR</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','BAJAR TEMP');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>BAJAR TEMP</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','HARVEST');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>HARVEST</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','INICIAR COLD CRASH');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>INICIAR COLD CRASH</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','INICIAR CARB');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>INICIAR CARB</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','TERMINAR CARB');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>TERMINAR CARB</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','TRANSFER');closeMenuBtn('divPasoScanV');abrirModal('divCantidadScanV');">
                            <a>TRANSFER</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','DESACTIVAR FERMENTADOR');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>DESACTIVAR FERMENTADOR</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPasoScanV','txtPasoScanV','REACTIVAR FERMENTADOR');closeMenuBtn('divPasoScanV');cerrarModal('divCantidadScanV');">
                            <a>REACTIVAR FERMENTADOR</a>
                          </td>  
                        </tr>
                      </table>
                    </div>
                  </td>
                </tr>

                <br>
                <tr >
                  <td style="padding-left:0px;display:none" colspan="4" id="divCantidadScanV">
                    <table>
                      <tr>
                        <td style="display:none">
                          <input name="kegSelect" id="txtKegSelect" value="">
                        </td>                      
                        <td style="padding-bottom:10px" colspan="4">
                          <div class="w3-dropdown-hover">
                            <button id="btnKegSelect" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('tblKegSelect')">DESTINO</button>
                            <table class="w3-dropdown-content w3-border w3-card" id="tblKegSelect" style="font-family: Raleway, sans-serif;font-size:12px;display:none;width:50px;">
                            <table class="w3-dropdown-content w3-border w3-card" id="tblKegSelect1" style="font-family: Raleway, sans-serif;font-size:12px;display:none;width:50px;">
                            </table>
                          </div>
                        </td>
                        <td style="padding-left:20px;">
                          <input name="cantidad" id="txtCantidadScanV" type="number" style="width:55px;font-size:14px;text-align:right;text-transform:uppercase;font-weight:bold;letter-spacing:1px;text-align:right" class="w3-input" placeholder="Cantidad" value="0">
                        </td>
                        <td style="text-align:left"> L</td>
                      </tr>
                    </table>
                  </td>
                  <td style="padding-left:20px;display:none">
                    <div class="">
                      <input type="button" class="w3-button w3-black material-icons" onclick="document.getElementById('FormControlFile').click()" value="photo_camera"/>   
                      <input name="imgEvidenciaScan" class="w3-button" type="file" id="FormControlFile" style="display:"/>
                    </div>
                  </td>
                </tr>
              </table>
              <table style="padding-top:20px">
                <tr>
                  <td style="padding-bottom:10px;">
                    <div class="">
                      <a style="display:none" id="lblIndexEvi"></a>
                      <!-- <h6 for="nota">NOTA</h6> -->
                      <textarea style="font-size:14px;text-transform:uppercase;letter-spacing:1px;color:#002D3E;width:320px;font-weight:bold" name="nota" placeholder="Nota" rows="3" id="txtNotaScanV" class="w3-input"></textarea>
                    </div>                      
                  </td>
                </tr>
              </table>
              <button onclick="document.getElementById('modalFermentadorScaneado').style.display='none';initQRscan('pasoV');" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%">GUARDAR</button>
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-top:20px;padding-bottom:20px;">PASOS</h5>
              <table class="w3-table" id="tablaFermentadorScan">
              </table>
            </div>
          </form>
        </div>        

      </div>
    </div>





    <div class="w3-modal" id="modalPakaEdit">
      <div class="w3-modal-content" id="modalKegscanCont">
        <header class="w3-container w3-black"> 
          <table>
            <tr>
              <td>
                <h6 id="lblKegTituloEdit" style="letter-spacing:1px;padding:10px;padding-top:20px">PAKA000077</h6>
              </td>
              <td>
                <span onclick="document.getElementById('modalPakaEdit').style.display='none';document.getElementById('modalKegscaneada').style.display='block';" class="w3-button w3-display-topright material-icons" style="padding-top:17px;">close</span>
              </td>
            </tr>
          </table>
        </header>      
        <div class="">
          <form id="frmPakaEdit" onsubmit="handleFormSubmitEdit(this)" style="font-size:16px;letter-spacing:1px;color:#002D3E;padding:20px;text-transform:uppercase">
            <div style="display:">
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-bottom:20px">EDITAR INFORMACION</h5>
              <table>
                <tr>
                  <td colspan="3" style="text-transform:uppercase">
                    <a>ALTA: </a>
                    <b><a id="lblFechaEdit">10/Abr/2024 20:10:00</a></b><br>
                    <a>CANT: </a>
                    <input name="peso" id="txtCantidadEdit" class="w3-input" style="text-align:right;width:55px;"><br>
                    <a>UBICACION: </a><br>
                    <input name="material" id="txtEstiloEdit" class="w3-input" style="text-align:right;width:100px;text-transform:uppercase"><br>
                    <a>NOTA: </a><br>
                    <textarea name="nota" id="txtNotaEdit" class="w3-input" style="text-align:left;width:140px;text-transform:uppercase"></textarea><br><br>
                    <button type="submit" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%;display:none">IMPRIMIR QR</button>
                  </td>      
                  <td style="padding:10px" colspan="3" onclick="window.open(document.getElementById('lblURLEdit').innerHTML)">
                    <input name="keyEdit" id="txtIDedit" style="display:none">
                      <a style="display:none" id="lblURLEdit"></a>
                    <div class="w3-card" style="padding:10px">
                      <img id="imgEdit" src="https://drive.google.com/thumbnail?id=1USjjJQOAv9IoKaondysaiO-r48QJcJ8u" width="180px"/>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td><h6 style="text-align:right;">CAMBIAR FOTO: </h6></td>
                </tr>
                <tr>
                  <td style="padding:0px" colspan="7">
                    <div class="">
                      <input name="archivo" type="file" id="FormEditFile" value="Archivo">
                    </div>
                  </td>
                </tr>
              </table>
              <h6 style="color:white;user-select:none">_</h6>
              <button type="submit" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%">GUARDAR</button>
            </div>
          </form>
          <div style="padding:20px">
            <button onclick="reactivatePaka()" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%;">REACTIVAR PAKA</button>
          </div>
          <div style="padding:20px">
            <button onclick="eliminarPaka()" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%;">ELIMINAR PAKA</button>
          </div>
        </div>
      </div>
    </div>
    <div class="w3-modal" id="modalEmpleadoEdit">
      <div class="w3-modal-content">
        <header class="w3-container w3-black"> 
          <table>
            <tr>
              <td>
                <h6 id="lblEmpleadoTituloEdit" style="letter-spacing:1px;padding:10px;padding-top:20px"></h6>
              </td>
              <td>
                <span onclick="document.getElementById('modalEmpleadoEdit').style.display='none';document.getElementById('modalEmpleadoScan').style.display='block';" class="w3-button w3-display-topright material-icons" style="padding-top:17px;">close</span>
              </td>
            </tr>
          </table>
        </header>      
        <div class="">
          <form id="frmEmpleadoEdit" onsubmit="handleFormSubmitEditEmp(this)" style="font-size:16px;letter-spacing:1px;color:#002D3E;padding:20px;text-transform:uppercase">
            <div style="display:">
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-bottom:20px">EDITAR INFORMACION</h5>
              <table>
                <tr>
                  <td colspan="3" style="text-transform:uppercase">
                    <a>ALTA: </a>
                    <b><a id="lblFechaEdit">10/Abr/2024 20:10:00</a></b><br>
                    <a>NOMBRE: </a>
                    <input name="nombre" id="txtNombreEdit" class="w3-input" style="text-align:right;width:120px;"><br>
                    <a>PUESTO: </a><br>
                    <input name="puesto" id="txtPuestoEdit" class="w3-input" style="text-align:right;width:120px;text-transform:uppercase"><br>
                  </td>      
                  <td style="padding:10px" colspan="3" onclick="window.open(document.getElementById('lblURLEditEmp').innerHTML)">
                    <input name="keyEdit" id="txtIDeditEmp" style="display:none">
                      <a style="display:none" id="lblURLEditEmp"></a>
                    <div class="w3-card" style="padding:10px">
                      <img id="imgEditEmp" src="https://drive.google.com/thumbnail?id=1USjjJQOAv9IoKaondysaiO-r48QJcJ8u" width="180px"/>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td><h6 style="text-align:right;">CAMBIAR FOTO: </h6></td>
                </tr>
                <tr>
                  <td style="padding:0px" colspan="7">
                    <div class="">
                      <input name="archivo" type="file" id="FormEditFileEmp" value="Archivo">
                    </div>
                  </td>
                </tr>
              </table>
              <h6 style="color:white;user-select:none">_</h6>
              <button type="submit" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%">GUARDAR</button>
            </div>
          </form>
          <div style="padding:20px">
            <button onclick="eliminarEmpleado()" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%;">ELIMINAR EMPLEADO</button>
          </div>
        </div>
      </div>
    </div>
    <!-- MODALES -->
    <div id="modalCrearQR" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalCrearQR').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">CREAR LOTE</h6>
        </header>
        <div class="w3-container">
          <form id="frmAltaPaka" onsubmit="handleFormSubmit(this)" style="font-size:12px;letter-spacing:1px;color:#002D3E;padding:0px;">
            <div style="display:">
              <!-- <label for="peso">Peso</label> -->
              <table>
                <tr>
                  <td style="display:none">
                    <input name="fecha" id="txtFecha">
                  </td>                      
                  <td style="display:none">
                    <input name="estilo" id="txtEstilo">
                  </td>                      
                  <td style="display:none">
                    <input name="fermentador" id="txtFermentador">
                  </td>                      
                  <td style="display:none">
                    <input name="emp" id="txtEmpleado">
                  </td>                      
                </tr>
                <tr>
                  <td style="padding-left:0px;padding-top:10px">
                    <div class="w3-dropdown-hover">
                      <button id="btnEstilo" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:1px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('divEstilo')">ESTILO</button>
                      <table class="w3-dropdown-content w3-border w3-card" id="divEstilo" style="font-family: Raleway, sans-serif;font-size:12px;display:none">
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnEstilo','txtEstilo','MEXICAN LAGER');cerrarModal('divEstilo');">
                            <a>MEXICAN LAGER</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnEstilo','txtEstilo','SIPA');cerrarModal('divEstilo');">
                            <a>SIPA</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnEstilo','txtEstilo','SUPER DRY');cerrarModal('divEstilo');">
                            <a>SUPER DRY</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnEstilo','txtEstilo','AMBER LAGER');cerrarModal('divEstilo');">
                            <a>AMBER LAGER</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnEstilo','txtEstilo','STOUT');cerrarModal('divEstilo');">
                            <a>STOUT</a>
                          </td>  
                        </tr>
                        <tr>
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnEstilo','txtEstilo','GUAYABA SOUR');cerrarModal('divEstilo');">
                            <a>GUAYABA SOUR</a>
                          </td>  
                        </tr>
                      </table>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td style="padding-left:0px;padding-top:10px">
                    <div class="w3-dropdown-hover">
                      <button id="btnFermentador" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:1px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('divFermentador')">FERMENTADOR</button>
                      <table class="w3-dropdown-content w3-border w3-card" id="divFermentador" style="font-family: Raleway, sans-serif;font-size:12px;display:none"></table>
                    </div>
                  </td>
                </tr>
              </table>
              <table>
                <tr>
                  <td style="padding-top:10px" >
                    CANTIDAD: 
                  </td>
                  <td style="padding-top:10px" >
                    <input name="cantidad" id="txtCantidad" type="text" style="width:80px;font-size:14px;text-align:right;text-transform:uppercase;font-weight:bold;letter-spacing:1px;" class="w3-input" placeholder="Litros"  onkeyup="document.getElementById('txtCantidad').value = formatCurrency(this.value)">
                  </td>
                </tr>
              </table>
              <table style="display:none">
                <tr>
                  <td style="padding-top:10px">BREWSHEET:
                  </td>
                </tr>
                <tr>
                  <td style="padding:10px" colspan="7">
                    <div class="">
                      
                      <input name="myFile" class="" type="file" id="FormControlFile" value="Archivo">
                    </div>
                  </td>
                </tr>
              </table>    
            </div><br>
            <div class="">
              <a style="display:none" id="lblIndexEvi"></a>
              <!-- <h6 for="nota">NOTA</h6> -->
              <textarea style="font-size:14px;text-transform:uppercase;letter-spacing:1px;color:#002D3E;width:320px;font-weight:bold" name="nota" placeholder="Nota" rows="3" id="txtNotaEvolucion" class="w3-input"></textarea>
            </div>                      
            <br>
            <button type="submit" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%;margin-bottom:20px">GENERAR</button>
          </form>
        </div>
      </div>
    </div>
    <!-- <div id="modalFermentadores" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalFermentadores').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">FERMENTADORES ACTIVOS</h6>
        </header>
      </div>
    </div> -->
    <div id="modalCrearQREmp" class="w3-modal">
      <div class="w3-modal-content">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalCrearQREmp').style.display='none';document.getElementById('modalEmpleados').style.display='block';" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">ALTA DE EMPLEADO</h6>
        </header>
        <div class="w3-container">
          <form id="frmAltaEmp" onsubmit="handleFormSubmitEmp(this)" style="font-size:14px;letter-spacing:1px;color:#002D3E;padding:0px;">
            <div style="display:">
              <!-- <label for="peso">Peso</label> -->
              <table>
                <tr><td><h6 style="color:white;user-select:none">_</h6></td><td><h6 style="color:white;user-select:none">_</h6></td></tr>          
                <tr>
                  <td style="display:none">
                    <input name="fecha" id="txtFechaEmp">
                  </td>                      
                  <td style="display:none">
                    <input name="puesto" id="txtPuesto">
                  </td>                      
                  <td style="width:220px;">
                    <input name="nombre" id="txtNombre" style="width:210px;letter-spacing:1px;font-weight:bold;text-transform:uppercase;padding-left:10px;" placeholder="NOMBRE (S)">
                  </td>         
                  <td style="padding-left:10px">
                    <div class="w3-dropdown-hover">
                      <button id="btnPuesto" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:1px;background-color:black;color:white;font-weight:bold" type="button" onclick="closeMenuBtn('divPuesto')">PUESTO</button>
                      <table class=" w3-card" id="divPuesto" style="font-family: Raleway, sans-serif;font-size:14px;display:none;position:absolute;background-color:white;right:0px;">
                        <tr style="background-color:white">
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPuesto','txtPuesto','CARDERO');cerrarModal('divPuesto');">
                            <a>CARDERO</a>
                          </td>  
                        </tr>
                        <tr style="background-color:white">
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPuesto','txtPuesto','BATIENTERO');cerrarModal('divPuesto');">
                            <a>BATIENTERO</a>
                          </td>  
                        </tr>
                        <tr style="background-color:white">
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPuesto','txtPuesto','OPENERO');cerrarModal('divPuesto');">
                            <a>OPENERO</a>
                          </td>  
                        </tr>
                        <tr style="background-color:white">
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPuesto','txtPuesto','MECANICO');cerrarModal('divPuesto');">
                            <a>MECANICO</a>
                          </td>  
                        </tr>
                        <tr style="background-color:white">
                          <td class="w3-bar-item w3-button" onclick="setDropdown('btnPuesto','txtPuesto','ADMIN');cerrarModal('divPuesto');">
                            <a>ADMIN</a>
                          </td>  
                        </tr>
                      </table>
                    </div>
                  </td>
                </tr>
                <tr>             
                  <td style="width:320px;padding-top:10px;" colspan="2">
                    <input name="apellidos" id="txtApellidos" style="width:310px;letter-spacing:1px;font-weight:bold;text-transform:uppercase;padding-left:10px;" placeholder="APELLIDOS">
                  </td>                
                </tr>
                <tr><td><h6 style="color:white;user-select:none">_</h6></td><td><h6 style="color:white;user-select:none">_</h6></td></tr>
                <tr>
                  <td><h6>FOTO: </h6></td>
                </tr>
                <tr>
                  <td style="padding:0px" colspan="7">
                    <div class="">
                      
                      <input name="myFileEmp" class="" type="file" id="FormControlFileEmp" value="ArchivoEmp">
                    </div>
                  </td>
                </tr>
              </table>
            </div><br>
            <!-- <div class="">
              <a style="display:none" id="lblIndexEvi"></a>
              <textarea style="font-size:14px;text-transform:uppercase;letter-spacing:1px;color:#002D3E;width:320px;font-weight:bold" name="nota" placeholder="Nota" rows="3" id="txtNotaEvolucion" class="w3-input"></textarea>
            </div>                       -->
            <br>
            <button type="submit" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%">GENERAR</button>
          </form>
          <h6 style="color:white;user-select:none;">_</h6>
        </div>
      </div>
    </div>
    <div id="modalKegs" class="w3-modal">
      <div class="w3-modal-content" style="height:800px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalKegs').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px" id="lblKegsTitulo">INVENTARIO</h6>
        </header>
        <div class="w3-container" style="display:none">
          <a id="lblSts" style="display:none">Activo</a>
          <table id="" class="w3-table">
            <tr style="letter-spacing:1px;padding:10px;border-bottom:3px solid black">
              <th style="padding-top:20px;padding-bottom:20px;" onclick="initKegs('Activo')">ACTIVAS</th>
              <th style="padding-top:20px;padding-bottom:20px;" onclick="initKegs('Terminado')">TERMINADAS</th>
              <th style="padding-top:20px;padding-bottom:20px;" onclick="initKegs('Cancelado')">CANCELADAS</th>
            </tr>
          </table>
        </div>
        <div class="w3-container">
          <div id="divFiltrarKegs" style="padding-top:0px">
            <div style="width:100%;padding-left: 5px;padding-top:10px;text-align:left;">
              <input class="w3-input" type="text" id="txtFiltrarKegs" placeholder="Buscar..." onclick="txtSelect()" onkeyup="filtrarTabla('txtFiltrarKegs','tablaKegs');"/>
            </div>
          </div>
        </div>
        <div>
          <table id="tablaKegs" class="" style="overflow-y:scroll;height:640px;display:block;font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;"></table>
        </div>
      </div>
    </div>
    <div id="modalFermentadores" class="w3-modal">
      <div class="w3-modal-content" style="height:800px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalFermentadores').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px" id="lblFermentadoresTitulo">INVENTARIO</h6>
        </header>
        <div class="w3-container">
          <div id="divFiltrarFVBT" style="padding-top:10px">
            <td style="width:100%;padding-left: 5px;padding-top:10px;text-align:left;">
              <input class="w3-input" type="text" id="txtFiltrarFVBT" placeholder="Buscar..." onclick="txtSelect()" onkeyup="filtrarTabla('txtFiltrarFVBT','tablaFermentadores');"/>
            </td>
          </div>
        </div>
        <div class="">
          <table id="tablaFermentadores" class="" style="overflow-y:scroll;height:640px;display:block"></table>
        </div>
      </div>
    </div>
    <div id="modalEmpleados" class="w3-modal">
      <div class="w3-modal-content" style="height:800px;" id="modalEmpleadosCont">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalEmpleados').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px" id="lblKegsTitulo">EMPLEADOS ACTIVOS</h6>
        </header>
        <div style="text-align:right;letter-spacing:2px;margin:10px;" class="w3-container">
          <button style="border:2px solid black;border-radius:3px;padding:7px;letter-spacing:1px;font-weight:bold;"
          onclick="initQREmp()" class="w3-button">ALTA DE EMPLEADO</button>
        </div>
        <div class="w3-container">
        </div>
        <div class="w3-container">
          <table id="tablaEmpleados" class="" style="overflow-y:scroll;height:640px;display:block"></table>
          <table id="tablaEmpleadosRef" class="" style="overflow-y:scroll;height:640px;display:none"></table>
        </div>
        <h6 style="color:white;user-select:none;">_</h6>
        <div class="w3-container">
          <div>
            <button class="w3-button w3-black" style="width:100%;font-weight:bold;letter-spacing:1px;" onclick="initQREmp();">ALTA DE EMPLEADO</button>
          </div>
        </div>
      </div>
    </div>
    <div id="modalPrintQR" class="w3-modal" style="display:none">
      <div class="w3-modal-content" style="width:380px;background-color:white">
        <header class="w3-container w3-black" id="headerPrintQR"> 
          <span onclick="document.getElementById('modalPrintQR').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">IMPRIMIR QR</h6>
        </header>
        <div id="divQRprint">
          <div class="w3-container w3-center" style="margin: 0 auto;text-align:center;background-color:white;">
            <img id="qrcodeDiv" width="360px"><br>
            <a id="qrcode"></a>
            <h1 id="lblKegTituloPrint" style="font-size:64px;letter-spacing:7px;"></h1>
            <h2 style="display:none" id="lblPakaFechaPrint"></h2>
            <h2 style="display:none" id="lblKegCapacidadPrint"></h2>
            <h2 style="display:none" id="lblKegContenidoPrint"></h2>
          </div>
        </div>
        <div class="w3-container">
          <div>
            <button id="btnGuardarQR" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%" onclick="saveQR()">GUARDAR</button>
          </div>
          <h5 style="color:white;user-select:none">_</h5>
          <!-- <div>
            <button id="btnPrintQR" class="w3-button" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;width:100%" onclick="printQR('modalPrintQR')">IMPRMIR</button>
          </div> -->
        </div>
      </div>
      <br>
    </div>
    <div class="w3-modal" id="modalEmpleadoScan">
      <div class="w3-modal-content" id="modalEmpleadoScanCont">
        <header class="w3-container w3-black"> 
          <table>
            <tr>
              <td>
                <h6 id="lblEmpleadoTitulo" style="letter-spacing:1px;padding:10px;padding-top:20px">EMPLEADO</h6>
              </td>
              <td style="position:absolute;right:120px;padding-top:7px">
                <span onclick="getQRcodeEmp2()" class="w3-button material-icons" style=";">qr_code_2</span>
              </td>
              <td style="position:absolute;right:80px;padding-top:7px">
                <span onclick="document.getElementById('modalEmpleadoScan').style.display='none';document.getElementById('modalEmpleadoEdit').style.display='block';" class="w3-button material-icons" style=";">edit</span>
              </td>
              <td style="position:absolute;right:40px;padding-top:7px">
                <span onclick="document.getElementById('modalEmpleadoScan').style.display='none';document.getElementById('modalEmpleados').style.display='block';popEmpleados();" class="w3-button material-icons" style=";">west</span>
              </td>
              <td>
                <span onclick="document.getElementById('modalEmpleadoScan').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:17px;">close</span>
              </td>
            </tr>
          </table>
          <a id="lblEmpleadoScan" style="display:none"></a>
          <a id="lblAuthScan" style="display:none"></a>
        </header>      
        <div class="">
          <form id="frmEmpleadoScan" style="font-size:16px;letter-spacing:1px;color:#002D3E;padding:20px;text-transform:uppercase">
            <div style="display:">
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-bottom:20px">INFORMACION DE EMPLEADO</h5>
              <table>
                <tr>
                  <td colspan="3" >
                    <a>NOMBRE: </a>
                    <b><a id="lblNombre"></a></b><br>
                    <a>ALTA: </a>
                    <b><a id="lblFechaEmp">10/Abr/2024 20:10:00</a></b><br>
                    <a>PUESTO: </a><br>
                    <b><a id="lblPuesto"></a></b><br>
                  </td>      
                  <td style="padding:10px" colspan="3" onclick="window.open(document.getElementById('lblURLEmp').innerHTML)">
                      <a style="display:none" id="lblURLEmp"></a>
                    <div class="w3-card" style="padding:10px">
                      <img id="imgEmp" src="" width="180px"/>
                    </div>
                  </td>
                </tr>
              </table>
              <h5 style="user-select:none;letter-spacing:2px;font-weight:bold;border-bottom: 3px solid black;padding-top:20px;padding-bottom:20px;">ACTIVIDAD RECIENTE</h5>
              <table class="w3-table" id="tablaEmpleadoScan">
              </table>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div id="modalStats" class="w3-modal">
      <div class="w3-modal-content" style="width:300px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalStats').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">PAKA STATS</h6>
        </header>
        <table id="tablaStats" style="display:none"></table>
        <table id="tablaStatsTemp" style="display:none"></table>
        <div class="w3-container">
          <h6 style="color:white;user-select:none">_</h6>
          <table class="w3-center" style="width:100%">
            <tr>
              <th style="width:20%">
                <div class="w3-dropdown-hover" style="background-color:white;">
                  <button id="btnPeriodoStats" class="w3-button w3-round-xxlarge w3-black material-icons" style="padding:15px;border-radius:35px;" onclick="closeMenuBtn('divPeriodoStats')">today</button>
                  <a id="lblPeriodoStats" style="display:block"></a>
                  <table class=" w3-card" id="divPeriodoStats" style="font-family: Raleway, sans-serif;font-size:14px;display:none;position:absolute;background-color:white;left:0px;width:132px">
                    <tr style="background-color:white;" onclick="cerrarModal('divMaterialStats');">
                      <td style="padding-left:10px">
                        <input id="lblHoyStats" type="radio" name="periodo" class="w3-input" style="padding-left:10px;" onclick="setDtps('hoy')" checked>
                      </td>
                      <td style="padding:10px;text-align:left">
                        <label for="lblHoyStats" onclick="setDtps('hoy');getStats()">HOY</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;" onclick="cerrarModal('divMaterialStats');">
                      <td style="padding-left:10px">
                        <input id="lblAyerStats" type="radio" name="periodo" class="w3-input" style="padding-left:10px;" onclick="setDtps('ayer');getStats()">
                      </td>
                      <td style="padding:10px;text-align:left">
                        <label for="lblAyerStats" onclick="setDtps('ayer');getStats()">AYER</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;" onclick="cerrarModal('divMaterialStats');">
                      <td style="padding-left:10px">
                        <input id="lblSemanaStats" type="radio" name="periodo" class="w3-input" style="padding-left:10px;" onclick="setDtps('semana');getStats();">
                      </td>
                      <td style="padding:10px;text-align:left">
                        <label for="lblSemanaStats" onclick="setDtps('semana');getStats();">SEMANA</label>
                      </td>  
                    </tr>
                    </tr>
                    <tr style="background-color:white;" >
                      <td style="padding-left:10px">
                        <input id="chkPeriodoStats" type="radio" name="periodo" class="w3-input" style="padding-left:10px;"  onclick="document.getElementById('dtpInicioStats').click()">
                      </td>
                      <td style="padding:10px;text-align:left">
                        <label for="lblPeriodoStats" onclick="document.getElementById('dtpInicioStats').click()">PERIODO</label>
                      </td>  
                    </tr>
                    <tr>
                      <td colspan="2">
                        <table class="w3-container" style="padding:10px">
                          <tr style="padding:10px"><td style="text-align:left"><label for="lblPeriodoStats" style="padding-left:10px">INICIO:</label></td></tr>
                          <tr><td><input id="dtpInicioStats" class="w3-input" type="date" style="width:130px;" onchange="setPeriodo();getStats()"></td></tr>
                          <tr style="padding:10px"><td style="text-align:left"><label for="lblPeriodoStats" style="padding-left:10px">FIN:</label></td></tr>
                          <tr><td><input id="dtpFinStats" class="w3-input" type="date" style="width:130px" onchange="setPeriodo();getStats()"></td></tr>
                        </table>
                      </td>
                    </tr>
                  </table>
                </div>
              </th>
              <th style="width:20%">
                <div class="w3-dropdown-hover" style="background-color:white;">
                  <a id="lblTurnoStats" style="display:none"></a>
                  <button id="btnTurnoStats" class="w3-button w3-round-xxlarge w3-black material-icons" style="padding:15px;border-radius:35px;" onclick="closeMenuBtn('divTurnoStats')">hourglass_empty</button>
                  <table class="w3-card" id="divTurnoStats" style="font-family: Raleway, sans-serif;font-size:14px;display:none;position:absolute;background-color:white;left:0px;width:125px;">
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="lbl1erStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="1ER TURNO"  onclick="saveChkStats('lbl1erStats','lblTurnoStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('lbl1erStats','lblTurnoStats')">1ER TURNO</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="lbl2doStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="2DO TURNO" onclick="saveChkStats('lbl2doStats','lblTurnoStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('lbl2doStats','lblTurnoStats')">2DO TURNO</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="lbl3erStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="3ER TURNO"  onclick="saveChkStats('lbl3erStats','lblTurnoStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('lbl3erStats','lblTurnoStats')">3ER TURNO</label>
                      </td>  
                    </tr>
                  </table>
                </div>
              </th>
              <th style="width:20%">
                <div class="w3-dropdown-hover" style="background-color:white;">
                  <button id="btnEmpleadoStats" class="w3-button w3-round-xxlarge w3-black material-icons" style="padding:15px;border-radius:35px;" onclick="closeMenuBtn('divEmpleadoStats')">badge</button>
                  <a id="lblEmpleadoStats" style="display:none"></a>
                  <table class=" w3-card" id="divEmpleadoStats" style="font-family: Raleway, sans-serif;font-size:14px;display:none;position:absolute;background-color:white;right:0px;">
                  </table>
                </div>
              </th>
              <th style="width:20%">
                <div class="w3-dropdown-hover" style="background-color:white;">
                  <button id="btnMaterialStats" class="w3-button w3-round-xxlarge w3-black material-icons" style="padding:15px;border-radius:35px;font-size:30px;" onclick="closeMenuBtn('divMaterialStats')">token</button>
                  <a id="lblMaterialStats" style="display:none"></a>
                  <table class=" w3-card" id="divMaterialStats" style="font-family: Raleway, sans-serif;font-size:14px;display:none;position:absolute;background-color:white;right:0px;">
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="chkAlgodonStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="ALGODON"  onclick="saveChkStats('chkAlgodonStats','lblMaterialStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('chkAlgodonStats','lblMaterialStats')">ALGODON</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="chkPolyesterStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="POLYESTER"  onclick="saveChkStats('chkPolyesterStats','lblMaterialStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('chkPolyesterStats','lblMaterialStats')">POLYESTER</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="chkMezclaStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="MEZCLA"  onclick="saveChkStats('chkMezclaStats','lblMaterialStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('chkMezclaStats','lblMaterialStats')">MEZCLA</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="chkAcrilicoStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="ACRILICO"  onclick="saveChkStats('chkAcrilicoStats','lblMaterialStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('chkAcrilicoStats','lblMaterialStats')">ACRILICO</label>
                      </td>  
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding-left:10px">
                        <input id="chkFibraStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="FIBRA"  onclick="saveChkStats('chkFibraStats','lblMaterialStats')">
                      </td>
                      <td style="padding:10px;">
                        <label onclick="checarChk('chkFibraStats','lblMaterialStats')">FIBRA</label>
                      </td>  
                    </tr>
                  </table>
                </div>
              </th>
              <th style="width:20%">
                <div class="w3-dropdown-hover" style="background-color:white;">
                  <button id="btnColorStats" class="w3-button w3-round-xxlarge w3-black material-icons" style="padding:15px;border-radius:35px;font-size:30px;" onclick="closeMenuBtn('divColorStats')">palette</button>
                  <a id="lblColorStats" style="display:none"></a>
                  <table class=" w3-card" id="divColorStats" style="font-family: Raleway, sans-serif;font-size:14px;display:none;position:absolute;background-color:white;right:0px;">
                    <tr style="background-color:blue;">
                      <td style="padding:15px">
                        <input id="chkBlueStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="blue"  onclick="saveChkStats('chkBlueStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:red;">
                      <td style="padding:15px">
                        <input id="chkRedStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="red"  onclick="saveChkStats('chkRedStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:green;">
                      <td style="padding:15px">
                        <input id="chkGreenStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="green"  onclick="saveChkStats('chkGreenStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:brown;">
                      <td style="padding:15px">
                        <input id="chkBrownStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="brown"  onclick="saveChkStats('chkBrownStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:yellow;">
                      <td style="padding:15px">
                        <input id="chkYellowStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="yellow"  onclick="saveChkStats('chkYellowStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:orange;">
                      <td style="padding:15px">
                        <input id="chkOrangeStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="orange"  onclick="saveChkStats('chkOrangeStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:pink;">
                      <td style="padding:15px">
                        <input id="chkPinkStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="pink"  onclick="saveChkStats('chkPinkStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:purple;">
                      <td style="padding:15px">
                        <input id="chkPurpleStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="purple"  onclick="saveChkStats('chkPurpleStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:#be5a02;">
                      <td style="padding:15px">
                        <input id="chkChedronStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="#be5a02"  onclick="saveChkStats('chkChedronStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:white;">
                      <td style="padding:15px">
                        <input id="chkWhiteStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="white"  onclick="saveChkStats('chkWhiteStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:grey;">
                      <td style="padding:15px">
                        <input id="chkGreyStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="grey"  onclick="saveChkStats('chkGreyStats','lblColorStats')">
                      </td>
                    </tr>
                    <tr style="background-color:black;">
                      <td style="padding:15px">
                        <input id="chkBlackStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="black"  onclick="saveChkStats('chkBlackStats','lblColorStats')">
                      </td>
                    </tr>
                  </table>
                </div>
              </th>
            </tr>
          </table>
          <!-- <h6 style="color:white;user-select:none">_</h6>
          <h6 style="color:white;user-select:none">_</h6> -->
          <table class="w3-table" style="letter-spacing:2px;">
            <!-- <tr>
              <th><h6 style="">PAKAS ACTIVAS: </h6></th><th style="text-align:right"><h6>24</h6></th><th><h6>PK</h6></th>
            </tr>
            <tr style="border-bottom:3px solid black;">
              <th><h6 style="">PESO TOTAL: </h6></th><th style="text-align:right"><h6>2,680</h6></th><th><h6>KG</h6></th>
            </tr>
            <tr><a style="color:white;user-select:none;font-size:15pk;">_</a></tr> -->
            <tr>
              <th><h6 style="margin-top:10px">PAKAS PROCESADAS: </h6></th><th><h6 id="lblPakasProcesadas" style="text-align:right;margin-top:10px">0</h6></th><th><h6 style="margin-top:10px">PK</h6></th>
            </tr>
            <tr>
              <th><h6 style="">PESO TOTAL: </h6></th><th style="text-align:right"><h6 id="lblPesoProcesadas">0</h6></th><th><h6>KG</h6></th>
            </tr>
            <tr>
              <th><h6 style="">SCRAP TOTAL: </h6></th><th style="text-align:right"><h6 id="lblScrapProcesadas">0</h6></th><th><h6>KG</h6></th>
            </tr>
          </table>
          <div class="w3-center"><h6 class="material-icons">arrow_drop_down</h6></div>
          <table class="w3-table" style="letter-spacing:2px;">
            <tr>
              <th><h6>1ER TURNO:</h6></th><th style="text-align:right"><h6 id="lblPrimerTurnoCont">0</h6></th><th><h6>PK</h6></th><th style="text-align:right"><h6 id="lblPrimerTurnoPeso">0</h6></th><th><h6>KG</h6></th>
            </tr>
            <tr>
              <td style="text-align:right"><h6>SCRAP:</h6></td><td style="text-align:right"><h6 id="lblPrimerTurnoScrapCont">0</h6></td><td><h6>PK</h6></td><th style="text-align:right"><h6 id="lblPrimerTurnoScrapPeso">0</h6></td><td><h6>KG</h6></td>
            </tr>
            <tr>
              <th><h6>2DO TURNO:</h6></th><th style="text-align:right"><h6 id="lblSegundoTurnoCont">0</h6></th><th><h6>PK</h6></th><th style="text-align:right"><h6 id="lblSegundoTurnoPeso">0</h6></th><th><h6>KG</h6></th>
            </tr>
              <td style="text-align:right"><h6>SCRAP:</h6></td><td style="text-align:right"><h6 id="lblSegundoTurnoScrapCont">0</h6></td><td><h6>PK</h6></td><th style="text-align:right"><h6 id="lblSegundoTurnoScrapPeso">0</h6></td><td><h6>KG</h6></td>
            </tr>
            <tr>
              <th><h6>3ER TURNO:</h6></th><th style="text-align:right"><h6 id="lblTercerTurnoCont">0</h6></th><th><h6>PK</h6></th><th style="text-align:right"><h6 id="lblTercerTurnoPeso">0</h6></th><th><h6>KG</h6></th>
            </tr>
            <tr>
            <!-- <tr style="border-bottom:3px solid black;"> -->
              <td style="text-align:right"><h6>SCRAP:</h6></td><td style="text-align:right"><h6 id="lblTercerTurnoScrapCont">0</h6></td><td><h6>PK</h6></td><th style="text-align:right"><h6 id="lblTercerTurnoScrapPeso">0</h6></td><td><h6>KG</h6></td>
            </tr>
          </table>
          <h6 style="color:white;user-select:none">_</h6>
          <!-- <div class=" w3-center ">
            <button class="w3-button w3-black" style="letter-spacing:1px;font-weight:bold;width:100%;">DESCARGAR INFORMACION</button>
          </div> -->
          <h6 style="color:white;user-select:none">_</h6>
        </div>
      </div>
    </div>
    
    <div id="modalReactivarPaka" class="w3-modal" style="padding-top:400px;">
      <div class="w3-modal-content" style="width:300px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalReactivarPaka').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">REACTIVAR PAKA</h6>
        </header>
        <div class="w3-container">
          <h6 style="color:white;user-select:none">_</h6>
          <table class="w3-table">
            <tr>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="reactivarPaka()">CONFIRMAR</button>
              </td>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="document.getElementById('modalReactivarPaka').style.display='none'">CANCELAR</button>
              </td>
            </tr>
          </table>
          <h6 style="color:white;user-select:none">_</h6>
        </div>
      </div>
    </div>
    <div id="modalBorrarPaka" class="w3-modal" style="padding-top:400px;">
      <div class="w3-modal-content" style="width:300px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalBorrarPaka').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">BORRAR PAKA</h6>
        </header>
        <div class="w3-container">
          <h6 style="color:white;user-select:none">_</h6>
          <table class="w3-table">
            <tr>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="borrarPaka()">CONFIRMAR</button>
              </td>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="document.getElementById('modalBorrarPaka').style.display='none'">CANCELAR</button>
              </td>
            </tr>
          </table>
          <h6 style="color:white;user-select:none">_</h6>
        </div>
      </div>
    </div>
    <div id="modalBorrarEmpleado" class="w3-modal" style="padding-top:400px;">
      <div class="w3-modal-content" style="width:300px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalBorrarEmpleado').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">BORRAR EMPLEADO</h6>
        </header>
        <div class="w3-container">
          <h6 style="color:white;user-select:none">_</h6>
          <table class="w3-table">
            <tr>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="borrarEmpleado()">CONFIRMAR</button>
              </td>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="document.getElementById('modalBorrarEmpleado').style.display='none'">CANCELAR</button>
              </td>
            </tr>
          </table>
          <h6 style="color:white;user-select:none">_</h6>
        </div>
      </div>
    </div>
    <div id="modalTerminarPaka" class="w3-modal" style="padding-top:400px;">
      <div class="w3-modal-content" style="width:300px;">
        <header class="w3-container w3-black"> 
          <span onclick="document.getElementById('modalTerminarPaka').style.display='none'" class="w3-button w3-display-topright material-icons" style="padding-top:15px;">close</span>
          <h6 style="letter-spacing:1px;padding:10px;padding-top:20px">TERMINAR PAKA</h6>
        </header>
        <div class="w3-container">
          <h6 style="color:white;user-select:none">_</h6>
          <table class="w3-table">
            <tr>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="terminarPaka()">CONFIRMAR</button>
              </td>
              <td>
                <button class="w3-button w3-black" style="font-size:14px;text-transform:uppercase;letter-spacing:2px;background-color:black;color:white;font-weight:bold;" onclick="document.getElementById('modalTerminarPaka').style.display='none'">CANCELAR</button>
              </td>
            </tr>
          </table>
          <h6 style="color:white;user-select:none">_</h6>
        </div>
      </div>
    </div>
  </div>

  <script>
    document.getElementById("status").style.display = "none"
    refreshAll(false)
    const html5Qrcode = new Html5Qrcode('reader');

    function initQRscan(sts){
      if (sts=="paso"){
        refreshAll(true)
        document.getElementById('lblEmpleadoScan').innerHTML=document.getElementById('lblUsuario').innerHTML;
        guardarPaso()
      } else if (sts=="pasoV"){
        refreshAll(true)
        document.getElementById('lblEmpleadoScan').innerHTML=document.getElementById('lblUsuario').innerHTML;
        guardarPasoV()
      } else {
        // alert(sts)
        const qrCodeSuccessCallback = (decodedText, decodedResult)=>{
          if(decodedText){
            if (decodedText.includes("KEG") && sts=="keg"){
              document.getElementById('modalScanner').style.display='none';
              refreshAll(true)
              html5Qrcode.stop();
              beep();
              // alert(decodedText)
              initKeg(decodedText)
            } else if (decodedText.includes("FV") && sts=="keg" || decodedText.includes("BT") && sts=="keg"){
              document.getElementById('modalScanner').style.display='none';
              refreshAll(true)
              html5Qrcode.stop();
              beep();
              var key;
              key = vesselToKey(decodedText)
              popPasosV(decodedText)
              popFermentador(key)
            } else if (decodedText.includes("KEG") && sts=="origen"){
              document.getElementById('modalScanner').style.display='none';
              refreshAll(true)
              html5Qrcode.stop();
              beep();
              // alert(decodedText)
              initKeg(decodedText)
            } else if (sts=="kegSelect"){
              document.getElementById('modalScanner').style.display='none';
              html5Qrcode.stop();
              beep();
              document.getElementById("txtKegSelect").value = decodedText
              document.getElementById("btnKegSelect").innerHTML = decodedText

            } else if (decodedText.includes("FV") && sts=="destinoSelect" || decodedText.includes("FV") && sts=="destinoSelect"){
              document.getElementById('modalScanner').style.display='none';
              html5Qrcode.stop();
              beep();
              setDropdown("btnFermentador",'txtFermentador',decodedText)
              // document.getElementById("txtFermentador").value = decodedText
              // document.getElementById("btnFermentador").innerHTML = decodedText

            } else if (decodedText.includes("KEG") && sts=="fuenteSelect" || decodedText.includes("FV") && sts=="fuenteSelect" || decodedText.includes("BT") && sts=="fuenteSelect"){
              document.getElementById('modalScanner').style.display='none';
              html5Qrcode.stop();
              beep();
              document.getElementById("txtFuenteScanK").value = decodedText
              document.getElementById("btnFuenteScan").innerHTML = decodedText
              if (decodedText.includes("KEG")){
                getFuenteKeg(decodedText)
              } else {
                // alert(decodedText)
                getFuenteVessel(decodedText)
              }
              cerrarModal("tblFuenteScanK")
              cerrarModal("tblFuenteScanK1")
            } else if (decodedText.includes("EMP") && sts=="editPaka"){
              var key = checkAuth(decodedText)
              if (key>3){
                document.getElementById('modalScanner').style.display='none';
                html5Qrcode.stop();
                beep();
                document.getElementById('modalPakaEdit').style.display='block';
              } else {
                document.getElementById("lblScanBanner").innerHTML = "ACCESO NO AUTORIZADO"
              }
            } else if (decodedText.includes("EMP") && sts=="pakaStats"){
              var key = checkAuth(decodedText)
              if (key>3){
                document.getElementById('modalScanner').style.display='none';
                html5Qrcode.stop();
                beep();
                initStats();
                // document.getElementById("modalStats").style.display='block';
              } else {
                document.getElementById("lblScanBanner").innerHTML = "ACCESO NO AUTORIZADO"
              }
            } else if (decodedText.includes("EMP") && sts=="editEmpleado"){
              var key = checkAuth(decodedText)
              if (key>3){
                document.getElementById('modalScanner').style.display='none';
                html5Qrcode.stop();
                beep();
                initEmpleados()
                // document.getElementById("modalEmpleados").style.display='block';
              } else {
                document.getElementById("lblScanBanner").innerHTML = "ACCESO NO AUTORIZADO"
              }
            } else if (decodedText.includes("EMP") && sts=="paso"){
              var key = checkAuth(decodedText)
              if (key>0){
                document.getElementById('modalScanner').style.display='none';
                document.getElementById('lblEmpleadoScan').innerHTML=decodedText;
                refreshAll(true)
                html5Qrcode.stop();
                beep();
                guardarPaso()
              } else {
                document.getElementById("lblScanBanner").innerHTML = "ACCESO NO AUTORIZADO"
              }
            } else {
              document.getElementById("lblScanBanner").innerHTML = decodedText
            }
          }
        }
        const config = {fps:10, qrbox:{width:300, height:300}}
        html5Qrcode.start({facingMode:"environment"}, config,qrCodeSuccessCallback );
        document.getElementById("modalScanner").style.display = "block"
      }
    }
    function closeScanner(){
      // const html5Qrcode = new Html5Qrcode('reader');
      html5Qrcode.stop();
      document.getElementById('modalScanner').style.display='none';
    }
    // var barcodeDetector;
    // var decoding = false;
    // var localStream;
    // var interval;
    // var scannerContainer = document.querySelector(".scanner");
    // var home = document.querySelector(".home");
    // var startButton = document.querySelector("#startButton");
    // startButton.onclick = function() {
    //   scannerContainer.style.display = "";
    //   home.style.display = "none";
    //   loadDevicesAndPlay();
    // }
    // var fileInput = document.querySelector("#fileInput")
    // fileInput.onchange = function(event) {
    //   var file = event.target.files[0];
    //   var reader = new FileReader();
            
    //   reader.onload = function(e){
    //     var img = document.getElementById("selectedImg");
    //     img.src = e.target.result;
    //     img.onload = async function() {
    //       var detectedCodes = await barcodeDetector.detect(img);
    //       var json = JSON.stringify(detectedCodes, null, 2);
    //       console.log(json);
    //       alert(json);
    //     }
    //   };
        
    //   reader.onerror = function () {
    //     console.warn('oops, something went wrong.');
    //   };
        
    //   reader.readAsDataURL(file);	
    // }

    // var closeButton = document.querySelector("#closeButton");
    // closeButton.onclick = function() {
    //   stop();
    //   scannerContainer.style.display = "none";
    //   home.style.display = "";
    // }
    // document.getElementsByClassName("camera")[0].addEventListener('loadeddata',onPlayed, false);
    // document.getElementById("cameraSelect").onchange = onCameraChanged;
    // initBarcodeDetector();
    // // alert("hola")
    // // **************************************************************************************************************** Inicio
    

    // async function initBarcodeDetector(){
    //   var barcodeDetectorUsable = false;
    //   if ('BarcodeDetector' in window) {
    //     let formats = await window.BarcodeDetector.getSupportedFormats();
    //     if (formats.length > 0) {
    //       barcodeDetectorUsable = true;
    //     }
    //   }

    //   if (barcodeDetectorUsable === true) {
    //     // alert('Barcode Detector supported!');
    //   }else{
    //     // alert('Barcode Detector is not supported by this browser, using the Dynamsoft Barcode Reader polyfill.');
        
    //     BarcodeDetectorPolyfill.setLicense("DLS2eyJoYW5kc2hha2VDb2RlIjoiMjAwMDAxLTE2NDk4Mjk3OTI2MzUiLCJvcmdhbml6YXRpb25JRCI6IjIwMDAwMSIsInNlc3Npb25QYXNzd29yZCI6IndTcGR6Vm05WDJrcEQ5YUoifQ==");
    //     let reader = await BarcodeDetectorPolyfill.init();
    //     console.log(reader); // You can modify the runtime settings of the reader instance.
    //     window.BarcodeDetector = BarcodeDetectorPolyfill;
    //   }
      
    //   barcodeDetector = new window.BarcodeDetector();
      
    //   document.getElementById("status").innerHTML = "";
    //   refreshAll(false)
    //   //       scannerContainer.style.display = "";
    //   // home.style.display = "none";
    //   // loadDevicesAndPlay();

    // }

    // function loadDevicesAndPlay(){
    //   var constraints = {video: true, audio: false};
    //   navigator.mediaDevices.getUserMedia(constraints).then(stream => {
    //       localStream = stream;
    //       var cameraselect = document.getElementById("cameraSelect");
    //       cameraselect.innerHTML="";
    //       navigator.mediaDevices.enumerateDevices().then(function(devices) {
    //           var count = 0;
    //           var cameraDevices = [];
    //           var defaultIndex = 0;
    //           for (var i=0;i<devices.length;i++){
    //               var device = devices[i];
    //               if (device.kind == 'videoinput'){
    //                   cameraDevices.push(device);
    //                   var label = device.label || `Camera ${count++}`;
    //                   cameraselect.add(new Option(label,device.deviceId));
    //                   if (label.toLowerCase().indexOf("back") != -1) {
    //                     defaultIndex = cameraDevices.length - 1;
    //                   }
    //               }
    //           }

    //           if (cameraDevices.length>0) {
    //             cameraselect.selectedIndex = defaultIndex;
    //             play(cameraDevices[defaultIndex].deviceId);
    //           }else{
    //             alert("No camera detected.");
    //           }
    //       });

    //   });
    // }

    // function play(deviceId, HDUnsupported) {
    //   stop();
    //   var constraints = {};

    //   if (!!deviceId){
    //       constraints = {
    //           video: {deviceId: deviceId},
    //           audio: false
    //       }
    //   }else{
    //       constraints = {
    //           video: true,
    //           audio: false
    //       }
    //   }

    //   navigator.mediaDevices.getUserMedia(constraints).then(function(stream) {
    //       localStream = stream;
    //       var camera = document.getElementsByClassName("camera")[0];
    //       // Attach local stream to video element
    //       camera.srcObject = stream;

    //   }).catch(function(err) {
    //       console.error('getUserMediaError', err, err.stack);
    //       alert(err.message);
    //   });
    // }

    // function stop(){
    //   clearInterval(interval);
    //   try{
    //       if (localStream){
    //           localStream.getTracks().forEach(track => track.stop());
    //       }
    //   } catch (e){
    //       alert(e.message);
    //   }
    // }

    // function onCameraChanged(){
    //   var cameraselect = document.getElementById("cameraSelect");
    //   var deviceId = cameraselect.selectedOptions[0].value;
    //   play(deviceId);
    // }

    // function onPlayed() {
    //   updateSVGViewBoxBasedOnVideoSize();
    //   startDecoding();
    // }

    // function updateSVGViewBoxBasedOnVideoSize(){
    //   var camera = document.getElementsByClassName("camera")[0];
    //   var svg = document.getElementsByTagName("svg")[0];
    //   svg.setAttribute("viewBox","0 0 "+camera.videoWidth+" "+camera.videoHeight);
    // }

    // function startDecoding(){
    //   clearInterval(interval);
    //   //1000/25=40
    //   interval = setInterval(decode, 40);
    // }

    // async function decode(){
    //   if (decoding === false) {
    //     console.log("decoding");
    //     var video = document.getElementsByClassName("camera")[0];
    //     decoding = true;
    //     var barcodes = await barcodeDetector.detect(video);
    //     decoding = false;
    //     console.log(barcodes);
    //     drawOverlay(barcodes);
    //   }
    // }

    // function drawOverlay(barcodes){
    //   var svg = document.getElementsByTagName("svg")[0];
    //   svg.innerHTML = "";
    //   for (var i=0;i<barcodes.length;i++) {
    //     var barcode = barcodes[i];
    //     console.log(barcode);
    //     var lr = {};
    //     lr.x1 = barcode.cornerPoints[0].x;
    //     lr.x2 = barcode.cornerPoints[1].x;
    //     lr.x3 = barcode.cornerPoints[2].x;
    //     lr.x4 = barcode.cornerPoints[3].x;
    //     lr.y1 = barcode.cornerPoints[0].y;
    //     lr.y2 = barcode.cornerPoints[1].y;
    //     lr.y3 = barcode.cornerPoints[2].y;
    //     lr.y4 = barcode.cornerPoints[3].y;
    //     // var points = getPointsData(lr);
    //     var points = getPointsData2(lr);
    //     var polygon = document.createElementNS("http://www.w3.org/2000/svg","polygon");
    //     polygon.setAttribute("points",points);
    //     polygon.setAttribute("class","barcode-polygon");
    //     var text = document.createElementNS("http://www.w3.org/2000/svg","text");

    //     text.innerHTML = barcode.rawValue
    //     text.setAttribute("x",lr.x1+20);
    //     text.setAttribute("y",lr.y4 - 20);
    //     text.setAttribute("fill","white");
    //     // text.setAttribute("backgroundColor","black");
    //     svg.append(polygon);
    //     svg.append(text);
    //   }
    // }

    // function getPointsData(lr){
    //   var pointsData = lr.x1+","+lr.y1 + " ";
    //   pointsData = pointsData+ lr.x2+","+lr.y2 + " ";
    //   pointsData = pointsData+ lr.x3+","+lr.y3 + " ";
    //   pointsData = pointsData+ lr.x4+","+lr.y4;
    //   return pointsData;
    // }
    // function getPointsData2(lr){
    //   lr.y3 = parseInt(lr.y3) + 30
    //   lr.y4 = parseInt(lr.y4) + 30
    //   var pointsData = lr.x1+","+lr.y1 + " ";
    //   pointsData = pointsData+ lr.x2+","+lr.y2 + " ";
    //   pointsData = pointsData+ lr.x3+","+lr.y3 + " ";
    //   pointsData = pointsData+ lr.x4+","+lr.y4;
    //   // alert(pointsData)
    //   return pointsData;
    // }







  window.onload = inicializar;
  function inicializar(){
    popEmpleadoFiltro();
    popClientes();
    // alert('')
    // alert(Session.getActiveUser().getEmail())
    google.script.run.withSuccessHandler(getUsuario).getUserName();
    setTimeout(function(){
      // toggleFullscreen()
      popEmpleadosRef();
    }, 1500);
  }
  setInterval(function() {
    var elem = document.fullscreenElement;
    if (elem != null){
      abrirModal("closeFSbtn")
    } else {
      cerrarModal("closeFSbtn")
    }
  }, 1000);


  function getUsuario(user){
    document.getElementById("lblUsuario").innerHTML = "luis.echavarria@brewadmin.com"
    // alert(user)
  }
  let qrScanWindow;
  let qrScanWindow2;
  let qrScanWindow3;

  function openPaka() {
    qrScanWindow = window.open("https://script.google.com/macros/s/AKfycbw5CKygZLT5KlzJ6qIUjFqlWdgDb88pBgXv-4TGyXMxLEgtoJJg-AH1PyPplCh5A0SR/exec","_blank", "width=786,height=786");
    findPaka();
  }
  function closePaka() {
    qrScanWindow.close();
  }   
  function openClearance(sts) {
    qrScanWindow2 = window.open("https://script.google.com/macros/s/AKfycbzNc4_FZM_UnGh_zd7jMNFfKPSSi9ITq966AHf90r0z9VT_ZtBTd0v70AyzR_PYJCku7w/exec","_blank", "width=786,height=786");
    findEmpleado(sts);
  }
  function closeClearance() {
    qrScanWindow2.close();
  }   
  function findPaka(){
    var interval = setInterval(function(){
      var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1e46r8fT5OGcdtToc6XvxcMUvnMsirC3ien89yySff1Y/edit#gid=0')
      var queryf = "SELECT A"
      // alert(queryf)
      query.setQuery(queryf);
      query.send(function(response){
        var data = response.getDataTable();
        var paka = data.getValue(0, 0)
        // alert(paka)
        if (data.getNumberOfRows()>0){
          // beep();
          refreshAll(true)
          paka = kegToKey(paka)
          initKeg(paka)
          popPasos(keyToKeg(paka))
          closePaka()
          google.script.run.clearPaka()
          clearInterval(interval)
        }
      });
    },100)
  }
  function findEmpleado(sts){
    var interval2 = setInterval(function(){
      var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1soXANrgHHGQrFniwyEuzh1B0iaQV4GZRXxlzddN8zPg/edit#gid=0')
      var queryf = "SELECT A"
      // alert(queryf)
      query.setQuery(queryf);
      query.send(function(response){
        var data = response.getDataTable();
        var emp = data.getValue(0, 0)
        // alert(data.getNumberOfRows())
        if (data.getNumberOfRows()>0){
          refreshAll(true)
          var key = checkAuth(emp)
          if (sts=="paso" && key>0){
            document.getElementById("lblEmpleadoScan").innerHTML = emp
            guardarPaso()
            var paka = document.getElementById("lblKegTitulo").innerHTML
            popPasos(paka)
            paka = kegToKey(paka)
            initKeg(paka)
          } else if (sts=="editPaka" && key>3){
            document.getElementById('modalPakaEdit').style.display='block';
          } else if (sts=="editEmpleado" && key>3){
            initEmpleados();
          } else if (sts=="pakaStats" && key>3){
            initStats();
          }
          google.script.run.clearEmpleado()
          clearInterval(interval2)
          closeClearance()
          refreshAll(false)
        }
      });
    },100)
  }
  function createQR(code){
    document.getElementById("qrcode").innerHTML=""
    var qrcode = new QRCode(document.getElementById('qrcode'), {
      text: code,
      width: 320,
      height: 320,
      colorDark : '#000',
      colorLight : '#fff',
      correctLevel : QRCode.CorrectLevel.H
    });

  }
  function printQR(){
    document.getElementById("headerPrintQR").style.display = "none"
    document.getElementById("btnPrintQR").style.display = "none"
    window.print();
    setTimeout(function(){
      document.getElementById("headerPrintQR").style.display = ""
      document.getElementById("btnPrintQR").style.display = ""
    }, 5000);
    return false;
  }
  function preventFormSubmit() {
    var forms = document.querySelectorAll('form');
    for (var i = 0; i < forms.length; i++) {
      forms[i].addEventListener('submit', function(event) {
        event.preventDefault();
      });
    }
  }
  window.addEventListener('load', preventFormSubmit);

  function handleFormSubmit(formObject){
    orita("txtFecha")
    var cantidad = document.getElementById("txtCantidad").value
    var estilo = document.getElementById("btnEstilo").innerHTML
    var fermentador = document.getElementById("btnFermentador").innerHTML
    cantidad = cantidad.replace(",","")
    // alert(material)
    if (cantidad == ""){
      alert("Favor de capturar la cantidad")
    } else if (estilo == "ESTILO"){
      alert("Favor de seleccionar estilo")
    } else if (fermentador == "FERMENTADOR"){
      alert("Favor de seleccionar el fermentador")
    } else {
      refreshAll(true)
      var modalCrearQR = document.getElementById("modalCrearQR")
      modalCrearQR.style.display = "none"
      // var modalFermentadores = document.getElementById("modalFermentadores")
      // modalFermentadores.style.display = ""
      google.script.run.withSuccessHandler(updateUrl).withFailureHandler(onFailure).uploadFiles(formObject);
    }

  }
  function handleFormSubmitEmp(formObject){
    orita("txtFechaEmp")
    var nombre = document.getElementById("txtNombre").value
    var apellidos = document.getElementById("txtApellidos").value
    var puesto = document.getElementById("btnPuesto").innerHTML
    // alert(material)
    if (nombre == ""){
      alert("Favor de capturar el nombre")
    } else if (apellidos == ""){
      alert("Favor de capturar los apellidos")
    } else if (puesto == "PUESTO"){
      alert("Favor de seleccionar el puesto")
    } else {
      refreshAll(true)
      var modalCrearQREmp = document.getElementById("modalCrearQREmp")
      modalCrearQREmp.style.display = "none"
      google.script.run.withSuccessHandler(updateUrl3).withFailureHandler(onFailure3).crearEmpleado(formObject);
    }
  }
  function handleFormSubmitEdit(formObject){
    refreshAll(true)
    document.getElementById("modalPakaEdit").style.display="none"
    google.script.run.withSuccessHandler(updateUrl2).withFailureHandler(onFailure2).editPaka(formObject);
    // setTimeout(function(){
      document.getElementById("modalKegscaneada").style.display="block"
    //   var paka = kegToKey(document.getElementById("lblKegTitulo").innerHTML)
    //   popKeg(paka)
    // }, 1500);
  }
  function handleFormSubmitEditEmp(formObject){
    // alert('')
    refreshAll(true)
    document.getElementById("modalEmpleadoEdit").style.display="none"
    // setTimeout(function(){
    //   document.getElementById("modalEmpleadoScan").style.display="block"
    //   refreshAll(false)
    // }, 1500);
    google.script.run.withSuccessHandler(updateUrl4).withFailureHandler(onFailure4).editEmpleado(formObject);
  }

  function updateUrl(url) {
    // popFermentadores()
    // refreshAll(false)
    setTimeout(function(){
      // document.getElementById("modalFermentadores").style.display = "block"
      refreshAll(false)
    }, 1000);
    setTimeout(function(){
      var key = vesselToKey(document.getElementById("txtFermentador").value)
      popFermentador(key)
    }, 500);
    setTimeout(function(){
      var key =document.getElementById("txtFermentador").value
      popPasosV(key)
      key = vesselToKey(key)
      popFermentador(key)
    }, 1500);
  }

  function onFailure(error) {
    // alert(error)
    setTimeout(function(){
      // popKegs("Activo");
    }, 1000);
  }
  function updateUrl2(url) {
    
    setTimeout(function(){
      document.getElementById("modalKegscaneada").style.display="block"
      var paka = kegToKey(document.getElementById("lblKegTitulo").innerHTML)
      popKeg(paka)
    }, 1000);
  }

  function onFailure2(error) {
    setTimeout(function(){
      document.getElementById("modalKegscaneada").style.display="block"
      var paka = kegToKey(document.getElementById("lblKegTitulo").innerHTML)
      popKeg(paka)
    }, 1500);
  }
  function updateUrl3(url) {
    // popEmpleados()
    getQRcodeEmp()
    setTimeout(function(){
      // getQRcodeEmp()
      // document.getElementById("modalEmpleados").style.display="block"
      // var empleadosCont = document.getElementById("tablaEmpleados")
      // empleadosCont.scrollIntoView({ behavior: 'smooth', block: 'start' })
      refreshAll(false)
    }, 2000);
  }

  function onFailure3(error) {
    // alert(error)
    setTimeout(function(){
      document.getElementById("modalKegscaneada").style.display="block"
      var paka = kegToKey(document.getElementById("lblKegTitulo").innerHTML)
      popKeg(paka)
    }, 1500);
  }
  function updateUrl4(url) {
    
    setTimeout(function(){
      // getQRcodeEmp()
      document.getElementById("modalEmpleadoScan").style.display="block"
      refreshAll(false)
    }, 1000);
  }

  function onFailure4(error) {
    setTimeout(function(){
      document.getElementById("modalEmpleadoScan").style.display="block"
      refreshAll(false)
    }, 1500);
  }

  function isValidURL(string) {
    var res = string.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);
    return (res !== null);
  }
  function disableScroll() {
       // Get the current page scroll position in the vertical direction
      scrollTop =
          window.pageYOffset || document.documentElement.scrollTop;
           
           
 // Get the current page scroll position in the horizontal direction 
 
    scrollLeft =
      window.pageXOffset || document.documentElement.scrollLeft;
      
      
     // if any scroll is attempted,
    // set this to the previous value
    window.onscroll = function() {
     window.scrollTo(scrollLeft, scrollTop);
    };
   }
  function getQRcodeKey(){
    var qr = document.getElementById("qrcode")
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit#gid=0')
    var queryf = "SELECT A"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      qr.innerHTML = data.getNumberOfRows()

      var code =  "KEG"
      switch(qr.innerHTML.length) {
        case 1:
          code = "00000" + qr.innerHTML
          break;
        case 2:
          code = "0000" + qr.innerHTML
          break;
        case 3:
          code = "000" + qr.innerHTML
          break;
        case 4:
          code = "00" + qr.innerHTML
          break;
        case 5:
          code = "0" + qr.innerHTML
          break;
        case 6:
          code = qr.innerHTML
          break;
      }  
      code = "KEG"+code
      // alert(code)
      createQR(code)
      var titulo = document.getElementById("lblKegTitulo")
      var tituloPrint = document.getElementById("lblKegTituloPrint")
      var fechaPrint = document.getElementById("lblPakaFechaPrint")
      var capacidadPrint = document.getElementById("lblKegCapacidadPrint")
      var contenidoPrint = document.getElementById("lblKegContenidoPrint")
      var fecha = document.getElementById("txtFecha").value
      var capacidad = document.getElementById("txtCantidad").value
      var tipo = document.getElementById("txtEstilo").value
      var modalPrintQR = document.getElementById("modalPrintQR")
      modalPrintQR.style.display = "block"
      titulo.innerHTML = code
      tituloPrint.innerHTML = code
      fechaPrint.innerHTML = getFormattedFecha(fecha)
      capacidadPrint.innerHTML = "PESO: " + capacidad + " L"
      contenidoPrint.innerHTML = tipo
      refreshAll(false)
    });
  }
  function getQRcodeEmp(){
    var qr = document.getElementById("qrcode")
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1wC_1GWyh6NTdxnphzrmvbp5kBqbMFeFv3IyvRllQ50c/edit?gid=0#gid=0')
    var queryf = "SELECT A"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      qr.innerHTML = data.getNumberOfRows()

      var code =  "EMP"
      switch(qr.innerHTML.length) {
        case 1:
          code = "00" + qr.innerHTML
          break;
        case 2:
          code = "0" + qr.innerHTML
          break;
        case 3:
          code = qr.innerHTML
          break;
      }  
      code = "EMP"+code
    //   // alert(code)
      document.getElementById('modalEmpleadoScan').style.display='block';
      var emp = document.getElementById('lblEmpleadoTitulo').innerHTML
      // createQR(emp)
     //  var titulo = document.getElementById("lblKegTitulo")
      var tituloPrint = document.getElementById("lblKegTituloPrint")
      var fechaPrint = document.getElementById("lblPakaFechaPrint")
      var capacidadPrint = document.getElementById("lblKegCapacidadPrint")
      var contenidoPrint = document.getElementById("lblKegContenidoPrint")
      var fecha = document.getElementById("txtFechaEmp").value
      var nombre = document.getElementById("txtNombre").value
      var apellidos = document.getElementById("txtApellidos").value
      var puesto = document.getElementById("txtPuesto").value
      var modalPrintQR = document.getElementById("modalPrintQR")

      // modalPrintQR.style.display = "block"
      tituloPrint.innerHTML = nombre.toUpperCase()
      fechaPrint.innerHTML = puesto
      capacidadPrint.innerHTML = emp
      popEmpleado(code)
      refreshAll(false)
      // initEmpleado()
    });
    
  }
  function getQRcodeEmp2(){
    // var qr = document.getElementById("qrcode")
    // var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1YrhPDShc_9PSE2vZCVYamjJXrPao3_hiPJ6B7t0cd-Y/edit#gid=0')
    // var queryf = "SELECT A"
    // query.setQuery(queryf);
    // // alert('')
    // query.send(function(response){
    //   if (response.isError()) {
    //     // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
    //     return;
    //   }
    //   var data = response.getDataTable();
    //   qr.innerHTML = data.getNumberOfRows()

    //   var code =  "EMP"
    //   switch(qr.innerHTML.length) {
    //     case 1:
    //       code = "00" + qr.innerHTML
    //       break;
    //     case 2:
    //       code = "0" + qr.innerHTML
    //       break;
    //     case 3:
    //       code = qr.innerHTML
    //       break;
    //   }  
    //   code = "EMP"+code
    //   // alert(code)
      document.getElementById('modalEmpleadoScan').style.display='none';
      var emp = document.getElementById('lblEmpleadoTitulo').innerHTML
      createQR(emp)
     //  var titulo = document.getElementById("lblKegTitulo")
      var tituloPrint = document.getElementById("lblKegTituloPrint")
      var fechaPrint = document.getElementById("lblPakaFechaPrint")
      var capacidadPrint = document.getElementById("lblKegCapacidadPrint")
      var contenidoPrint = document.getElementById("lblKegContenidoPrint")
      var fecha = document.getElementById("txtFechaEmp").value
      var nombre = document.getElementById("txtNombre").value
      var apellidos = document.getElementById("txtApellidos").value
      var puesto = document.getElementById("txtPuesto").value
      var modalPrintQR = document.getElementById("modalPrintQR")

      modalPrintQR.style.display = "block"
      tituloPrint.innerHTML = nombre.toUpperCase()
      fechaPrint.innerHTML = puesto
      capacidadPrint.innerHTML = emp
      // contenidoPrint.innerHTML = code
      refreshAll(false)
    // });
  }
  function kegToQR(){
      var titulo = document.getElementById("lblKegTitulo").innerHTML
      createQR(titulo)
      var tituloPrint = document.getElementById("lblKegTituloPrint")
      var fechaPrint = document.getElementById("lblPakaFechaPrint")
      var capacidadPrint = document.getElementById("lblKegCapacidadPrint")
      var contenidoPrint = document.getElementById("lblKegContenidoPrint")
      var fecha = document.getElementById("lblFechaScanK").innerHTML
      var capacidad = document.getElementById("lblCapacidadScanK").innerHTML
      var tipo = document.getElementById("lblContenidoScanK").innerHTML
      var modalPrintQR = document.getElementById("modalPrintQR")
      modalPrintQR.style.display = "block"
      tituloPrint.innerHTML = titulo
      fechaPrint.innerHTML = fecha
      capacidadPrint.innerHTML = "CONTENIDO: " + capacidad + " L"
      contenidoPrint.innerHTML = tipo
      refreshAll(false)
  }
  function fermentadorToQR(){
      var titulo = document.getElementById("lblFermentadorTitulo").innerHTML
      createQR(titulo)
      var tituloPrint = document.getElementById("lblKegTituloPrint")
      var fechaPrint = document.getElementById("lblPakaFechaPrint")
      var capacidadPrint = document.getElementById("lblKegCapacidadPrint")
      var contenidoPrint = document.getElementById("lblKegContenidoPrint")
      var fecha = document.getElementById("lblFechaScanV").innerHTML
      var capacidad = document.getElementById("lblCapacidadScanV").innerHTML
      var tipo = document.getElementById("lblContenidoScanV").innerHTML
      var modalPrintQR = document.getElementById("modalPrintQR")
      modalPrintQR.style.display = "block"
      tituloPrint.innerHTML = titulo
      fechaPrint.innerHTML = fecha
      capacidadPrint.innerHTML = "CONTENIDO: " + capacidad + " L"
      // contenidoPrint.innerHTML = tipo
      refreshAll(false)
  }
  function borrarPaka(){
    refreshAll(true)
    var paka = document.getElementById("lblKegTitulo").innerHTML
    paka = kegToKey(paka).toString()
    var range = "I"+paka
    google.script.run.updKeg("Cancelado",range)
    // alert(sts)
    document.getElementById("modalBorrarPaka").style.display = "none"
    document.getElementById("modalPakaEdit").style.display = "none"
    initKegs("Cancelado")
    // setTimeout(function(){
    //   document.getElementById("modalKegs").style.display = "block"
    //   popKegs(document.getElementById("lblSts").innerHTML)
    //   refreshAll(false)
    // }, 1500);
  }
  function borrarEmpleado(){
    refreshAll(true)
    var emp = document.getElementById("lblEmpleadoTitulo").innerHTML
    emp = empToKey(emp).toString()
    var range = "G"+emp
    google.script.run.updEmp("Cancelado",range)
    // alert(sts)
    document.getElementById("modalBorrarEmpleado").style.display = "none"
    document.getElementById("modalEmpleadoEdit").style.display = "none"
    setTimeout(function(){
      popEmpleados();
    }, 1500);
    setTimeout(function(){
      document.getElementById("modalEmpleados").style.display="block"
      refreshAll(false)
    }, 2000);
  }
  function reactivarPaka(){
    refreshAll(true)
    var paka = document.getElementById("lblKegTitulo").innerHTML
    paka = kegToKey(paka).toString()
    var range = "H"+paka
    google.script.run.updKeg("Activo",range)
    // alert(sts)
    document.getElementById("modalReactivarPaka").style.display = "none"
    document.getElementById("modalPakaEdit").style.display = "none"
    initKegs("Activo")
  }
  function terminarPaka(){
    refreshAll(true)
    var fecha = Date.parse(new Date())
    var paka = document.getElementById("lblKegTitulo")
    var paso = document.getElementById("txtPasoScan")
    var empleado = document.getElementById("lblEmpleadoScan")
    var peso = document.getElementById("txtCantidadScanK")
    var nota = document.getElementById("txtNotaScan")
    var btnPaso = document.getElementById("btnPasoScan")
    var material = document.getElementById("lblContenidoScanK")
    var color = document.getElementById("lblColorScan")
    document.getElementById("modalTerminarPaka").style.display = "none"
    google.script.run.savePaso(fecha,paka.innerHTML,"TERMINAR PAKA",peso.value,material.innerHTML,nota.value,empleado.innerHTML,color.innerHTML)
    paka = kegToKey(paka.innerHTML).toString()
    var range = "H"+paka

    google.script.run.updKeg("Terminado",range)
    getPasos();
    btnPaso.innerHTML = "PASO"
    paso.value = "PASO"
    peso.value = ""
    nota.value = ""
  }
  function dfDate(date){  
    var fecha = new Date(date).toString()
    var d = new Date(date),
    dfTime = [ (d.getMonth()+1).padLeft(),
                      d.getDate().padLeft(),
                      d.getFullYear()].join('/')+
                      ' ' +
                    [ d.getHours().padLeft(),
                      d.getMinutes().padLeft(),
                      d.getSeconds().padLeft()].join(':');
                      alert(dfTime)
                      return dfTime
  }
  function getFormattedFecha(fecha){
    fecha = parseInt(fecha)
    var d = new Date(fecha)
    // alert(d)
    var dia = d.getDate();
    var mes = d.getMonth();
    var ano = d.getFullYear();
    var hora = d.getHours();
    var min = d.getMinutes();
    var seg = d.getSeconds();
    mes = getMonthName(mes)
    // alert(seg.toString().length)
    if (hora.toString().length == 1){hora = "0"+hora}
    if (min.toString().length == 1){min = "0"+min}
    if (seg.toString().length == 1){seg = "0"+seg}
    var fechaFormato = dia + '/' + mes + '/' + ano + " " + hora + ':' + min + ':' + seg
    return fechaFormato;
  }
  function getFormattedDate(date) {
    var year = date.getFullYear();

    var month = (1 + date.getMonth()).toString();
    month = month.length > 1 ? month : '0' + month;

    var day = date.getDate().toString();
    day = day.length > 1 ? day : '0' + day;
    
    return month + '/' + day + '/' + year;
  }
  function getMonthName(mes){
    switch(mes)
    {
    case 0:
      month="Ene";
      break;
    case 1:
      month="Feb";
      break;
    case 2:
      month="Mar";
      break;
    case 3:
      month="Abr";
      break;
    case 4:
      month="May";
      break;
    case 5:
      month="Jun";
      break;
    case 6:
      month="Jul";
      break;
    case 7:
      month="Ago";
      break;
    case 8:
      month="Sep";
      break;
    case 9:
      month="Oct";
      break;
    case 10:
      month="Nov";
      break;
    case 11:
      month="Dic";
      break;
    }
    return month
  }
  function format(date, format) {
    var d = toDate(date);

    return format
      .replace(/Y/gm, d.getFullYear().toString())
      .replace(/m/gm, ('0' + (d.getMonth() + 1)).substr(-2))
      .replace(/d/gm, ('0' + (d.getDate() + 1)).substr(-2))
      .replace(/H/gm, ('0' + (d.getHours() + 0)).substr(-2))
      .replace(/i/gm, ('0' + (d.getMinutes() + 0)).substr(-2))
      .replace(/s/gm, ('0' + (d.getSeconds() + 0)).substr(-2));
  }
  function initQR(){
    var modalCrearQR = document.getElementById('modalCrearQR')
    modalCrearQR.style.display='block'
    // var modalBrewSheet = document.getElementById("modalReceta")
    // modalBrewSheet.style.display='block'
    // popKegs()
  }
  function initVentaKegs(){
    var modalVentaKegs = document.getElementById('modalVentaKegs')
    modalVentaKegs.style.display='block'
    popVentaKegs()
  }
  function initQREmp(){
    // alert('')
    var modalCrearQREmp = document.getElementById('modalCrearQREmp')
    modalCrearQREmp.style.display='block'
    var modalEmpleados = document.getElementById('modalEmpleados')
    modalEmpleados.style.display='none'
    // popKegs()
  }
  function initKegs(sts){
    refreshAll(true)
    popKegs(sts)
    document.getElementById("lblSts").innerHTML = sts
    setTimeout(function(){
      var sts = document.getElementById('lblSts').innerHTML
      popKegs(sts)
    }, 900);
    setTimeout(function(){
      var sts = document.getElementById('lblSts').innerHTML
      popKegs(sts)
    }, 1200);
    setTimeout(function(){
      var modalKegs = document.getElementById('modalKegs')
      modalKegs.style.display='block'
      var sts = document.getElementById('lblSts').innerHTML
      popKegs(sts)
      refreshAll(false)      
    }, 1500);
  }
  function initFermentadores(sts){
    refreshAll(true)
    popFermentadores(sts)
    document.getElementById("lblSts").innerHTML = sts
    setTimeout(function(){
      var sts = document.getElementById('lblSts').innerHTML
      popFermentadores(sts)
    }, 900);
    setTimeout(function(){
      var sts = document.getElementById('lblSts').innerHTML
      popFermentadores(sts)
    }, 1200);
    setTimeout(function(){
      var modalFermentadores = document.getElementById('modalFermentadores')
      modalFermentadores.style.display='block'
      var sts = document.getElementById('lblSts').innerHTML
      popFermentadores(sts)
      refreshAll(false)      
    }, 1500);
  }
  function initEmpleados(){
    refreshAll(true)
    popEmpleados()
    setTimeout(function(){
      var modalEmpleados = document.getElementById('modalEmpleados')
      modalEmpleados.style.display='block'
      refreshAll(false)      
    }, 1500);
  }
  function popKegs(sts){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit#gid=0')
    var queryf = "SELECT A,C,E,F,G,I,J,K,L,B WHERE H = '"+sts+"'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaKegs = document.getElementById("tablaKegs")
      document.getElementById("txtFiltrarKegs").value = ""
      var titulo = document.getElementById("lblKegsTitulo")
      // alert('')
      var table = "";
      data.sort({column: 9, desc: true});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var key = data.getValue(i, 0)
        var nota = data.getValue(i, 1)
        var img = data.getValue(i, 2)
        var litros = data.getValue(i, 3)
        var estilo = data.getValue(i, 4)
        var ubicacion = data.getValue(i, 5)
        var sts = data.getValue(i, 6)
        var cap = data.getValue(i, 7)
        var lote = data.getValue(i, 8)
        var fecha = data.getValue(i, 9)
        if (lote==null){lote=""}
        if (sts==null){sts=""}
        table = table + '<tr onclick="initKeg(keyToKeg('+key+'))">'+
                          '<td style="padding:10px;" colspan="3" >'+
                            '<div class="w3-container">'+
                              '<table class="w3-card w3-container" style="padding-top:20px;">'+
                                '<tr>'+
                                  '<td style="padding-bottom:15px">'+
                                    '<div style="padding:10px">'+
                                      '<img id="imgScanV" src="'+img+'" width="80px"/>'+
                                    '</div>'+
                                  '</td>'+
                                  '<td style="padding:10px;width:75%">'+
                                  // '<td colspan="3" style="width:60%;word-wrap:break-word;padding-left:10px">'+
                                    '<a><b>'+keyToKeg(key)+'</a></b><br>'+
                                    '<img src="https://lh3.googleusercontent.com/pw/AP1GczPflFo1mJL3uESUsetaLZymcecNzD1tB23k2LqqDNuQG_PEHx7jdO6HKbRgtpVvKwj7I9ksbKro0m4exp2mABraZnL6mDR8uBYrm6OAQfQNBvGvSa_5mC1QzCiTs9nlSBQPd4vvRuEImtUUn44C3GLScg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"><a style="padding:10px">'+formatoFechaIni(fecha)+'</a><br>'+
                                    '<img src="https://lh3.googleusercontent.com/pw/AP1GczOKZM3WX_1W23huHtCBqQoUBKHqfdihJ9hlX7TADe5yPyjQnvnpfFNyhocqXwg0bDOpIyS6ostDn8TBx_vIOL423DnFTtjj_48yH6N3GScCdzOqXarBLg5GmKKLSRuIIOEc4yFCreiQL_bDAHL84-v-gA=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"><a style="padding:10px"><b>'+litros+' L, ' +lote+'</a></b><br>'+
                                    '<b><a style="padding-left:40px">'+estilo+'</a></b><br>'+
                                    '<img src="https://lh3.googleusercontent.com/pw/AP1GczM1beb8QzHgq5PgAJVvNw3t1YfnRk07SrRYlMVSisRtephLppjLurgjJQIFhfYyUr0kQYUBtwYkXvvCEvrSYokuh2JYA9k8-mUitWGreFiHmbgCOeMM9ilT_pp7gJPCXCQIEXtjImHy47ldQwq9pSC2ww=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"><a style="padding:10px">'+ubicacion+'</a><br>'+
                                    '<img src="https://lh3.googleusercontent.com/pw/AP1GczOfVYKsphW-Jg40dFW-KMkjO537VauVsSYZa5-ztDx05McFPxfXZX5fuaW8Hm9YARFArGXncU8CCUyoTaPcaoNIzpvpf6P28FAbdH0TI8Lw5-Bkq_l51HZ_LxHNh6Imf86-KVWaQBj8T68Sz65pjUi3Ug=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"><a style="padding:10px;padding-bottom:25px;">'+sts+'</a><br>'+
                                  '</td>'+
                                '</tr>'+
                              '</table>'+
                            '</div>'+
                          '</td>'+
                        '</tr>'

      }
      // alert(table)
      tablaKegs.innerHTML = table;
      // alert(sts)
      switch(sts) {
        case "Activo":
          titulo.innerHTML = "KEGS ACTIVOS"
          break;
        case "Terminado":
          titulo.innerHTML = "KEGS TERMINADOS"
          break;
        case "Cancelado":
          titulo.innerHTML = "KEGS CANCELADOS"
          break;
      }
      // tablaKegs.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;overflow-y:scroll;height:640px;display:block")
      // alert(key)
      tablaKegs.onclick = function(e) {cerrarModal("modalKegs");};
    });
  }
  function popVentaKegs(){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit?gid=0#gid=0')
    var queryf = "SELECT A,B,F,G,I,J,L WHERE I != 'PLANTA'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaClientes = document.getElementById("tblClientesScan")
      var tablaVentaKegs = document.getElementById("tablaVentaKegs")
      document.getElementById("lblVentaTitulo").innerHTML = "VENTA DE KEGS"
      // alert('')
      var table = "";
      data.sort({column: 1, desc: true});
      // alert(data.getNumberOfRows())
      // alert(tablaClientes.innerHTML)
      for (var j=0; j<tablaClientes.rows.length; j++){
        var cliente = tablaClientes.rows[j].cells[0].innerHTML
        // alert(cliente)
        table = table + '<tr style="background-color:black;margin-bottom:10px;" onclick="popVentaCliente('+cliente+')"><td colspan="4" style="color:white;padding:10px;font-size:14px">'+cliente+'</td></tr>'
        for (var i=0; i<data.getNumberOfRows(); i++){
          var key = data.getValue(i, 0)
          var fecha = data.getValue(i, 1)
          var litros = data.getValue(i, 2)
          var estilo = data.getValue(i, 3)
          var ubicacion = data.getValue(i, 4)
          var sts = data.getValue(i, 5)
          var lote = data.getValue(i, 6)
          if (lote==null){lote=""}
          if (cliente == ubicacion){
            // alert(i+ubicacion+" | "+j+cliente)
            table = table + '<tr style="font-size:12px;">'+
                              '<td style="width:330px;">'+
                                '<table>'+
                                  '<tr onclick="popVentaCliente('+cliente+')">'+
                                    '<td style="display:none">'+cliente+'</td>'+
                                    '<td style="border:1px solid black;padding:5px;width:20%">'+keyToKeg(key)+'</td>'+
                                    '<td style="border:1px solid black;padding:5px;width:40%;font-size:12px">'+litros+' L: '+lote+'</td>'+
                                    '<td style="border:1px solid black;padding:5px;width:40%;font-size:11px">'+estilo+'</td>'+
                                  '</tr>'+
                                '</table>'+
                              '</td>'+
                            '</tr>'
          }
        }
      }
      // alert(table)
      tablaVentaKegs.innerHTML = table;
      // alert(sts)
      // tablaVentaKegs.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;overflow-y:scroll;")
      tablaVentaKegs.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;overflow-y:scroll;height:100%;width:310px")
      // alert(key)
      tablaVentaKegs.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var cliente = seleccion[0] 
          popVentaCliente(cliente)
        }
      };
    });
  }
  function popVentaCliente(cliente){
    // alert(cliente)
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-zGHeNPOyt-4umBS7RIB-pl1IqLTvtPacaI411rf0dE/edit?gid=0#gid=0')
    var queryf = "SELECT B,C,D,E,F,H,K,L,M,N,G WHERE I = 'Activo' AND J = '"+cliente+"' AND D = 'VENDER KEG' OR I = 'Activo' AND J = '"+cliente+"' AND D = 'COBRAR KEG'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaVentaKegs = document.getElementById("tablaVentaKegs")
      document.getElementById("lblVentaTitulo").innerHTML = "VENTA EN "+cliente
      // alert('')
      var table = "";
      data.sort({column: 0, desc: true});
      // alert(data.getNumberOfRows())
      // alert(tablaClientes.innerHTML)
      for (var i=0; i<data.getNumberOfRows(); i++){
        var fecha = data.getValue(i, 0)
        var keg = data.getValue(i, 1)
        var paso = data.getValue(i, 2)
        var litros = data.getValue(i, 3)
        var estilo = data.getValue(i, 4)
        var empleado = data.getValue(i, 5)
        var monto = data.getValue(i, 6)
        var moneda = data.getValue(i, 7)
        var metodo = data.getValue(i, 8)
        var lote = data.getValue(i, 9)
        var nota = data.getValue(i, 10)
        var notaStr = ""
        if (nota==""){notaStr=""}else{notaStr = '<br>'}
        // alert(notaStr)
        if (lote==null){lote=""}
        if (moneda==null){moneda=""}
        if (metodo==null){metodo=""}
        if (nota==null){nota=""}
        if (paso == "VENDER KEG"){
          
          table = table + '<tr style="font-size:11px;">'+
                            '<td style="border:1px solid black;padding:5px;width:20%">'+keg+'</td>'+
                            '<td style="border:1px solid black;padding:5px;width:80%">'+
                              '<a>'+formatoFechaIni(fecha)+'</a><br>'+
                              '<a>'+litros+' L: '+lote+' INSTALADO CON CLIENTE</a>'+notaStr+
                              '<a>'+nota+'</a>'+
                            '</td>'+
                          '</tr>'
        } else {
          table = table + '<tr style="font-size:11px;">'+
                            '<td style="border:1px solid black;padding:5px;width:20%">'+keg+'</td>'+
                            '<td style="border:1px solid black;padding:5px;width:80%">'+
                              '<a>'+formatoFechaIni(fecha)+' </a><a>'+formatCurrency(monto)+' </a><a>'+moneda+'</a><br>'+
                              '<a>'+litros+' L: '+lote+' </a><a>'+metodo+'</a>'+notaStr+
                              '<a>'+nota+'</a>'+
                            '</td>'+
                          '</tr>'
        }
      }
      // alert(table)
      tablaVentaKegs.innerHTML = table;
      // alert(sts)
      tablaVentaKegs.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;overflow-y:scroll;height:640px;display:block;width:310px")
      tablaVentaKegs.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var keg = seleccion[0] 
          initKeg(keg)
          cerrarModal("modalVentaKegs")
        }
      };
      abrirModal("btnBackVenta")
    });
  }
  function popFermentadores(sts){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1gI7FaJxPMtfHrIqfZL3KS6Ursc3RxbjzUbz9hI5wpQw/edit?gid=0#gid=0')
    var queryf = "SELECT A,B,C,D,E,F,G,H,I,J,K,L WHERE H = '"+sts+"'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaFermentadores = document.getElementById("tablaFermentadores")
      var titulo = document.getElementById("lblFermentadoresTitulo")
      // alert('')
      var table = "";
      var key,fecha,notas,url1,url2,litros,capacidad,status,lote,categoria,estilo
      data.sort({column: 1, desc: true});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        key = data.getValue(i, 0);
        fecha = data.getValue(i, 1)
        notas = data.getValue(i, 2)
        url1 = data.getValue(i, 3)
        url2 = data.getValue(i, 4)
        litros = data.getValue(i, 5)
        capacidad = data.getValue(i, 6)
        status = data.getValue(i, 7)
        lote = data.getValue(i, 8)
        categoria = data.getValue(i, 9)
        estilo = data.getValue(i, 10)
        sts = data.getValue(i, 11)
        if (lote==null){lote = ""}
        if (estilo==null){estilo = ""}
        if (categoria==null){categoria = ""}
        if (sts==null){sts = ""}
        litros = formatCurrency(litros)
        capacidad = formatCurrency(capacidad)
        // alert(capacidad)
        table = table + '<tr style="padding-top:10px;">'+
                          '<td style="padding:10px;" colspan="3" >'+
                            '<div class="w3-container">'+
                              '<table class="w3-card w3-container" style="padding-top:0px;">'+
                                '<tr>'+
                                  '<td style="padding:10px" colspan="3" >'+
                                    '<div style="padding:10px">'+
                                      '<img id="imgScanV" src="'+url2+'" width="100px"/>'+
                                    '</div></td>'+
                                  '<td style="display:none">'+ url1 +'</td>' +
                                  '<td colspan="3" style="word-wrap:break-word;padding:10px;width:70%">'+
                                    '<a><b>'+keyToVessel(key,categoria)+'</a></b><br>'+
                                    '<a>'+litros+' / ' +capacidad+'</a> L<br>'+
                                    '<b><a>'+sts+'</a></b><br>'+
                                    '<a>'+lote+'</a><br>'+
                                    '<b><a>'+estilo+'</a></b><br>'+
                                  '</td>'+
                                  '<td style="display:none">'+key+'</td>' +
                                  '<td style="display:none">'+categoria+'</td>' +
                                '</tr>'+
                              '</table>'+
                            '</div>'+
                          '</td>'+
                        '</tr>'
      }
      // alert(table)
      tablaFermentadores.innerHTML = table;
      // alert(sts)
      switch(sts) {
        case "Activo":
          titulo.innerHTML = "FERMENTADORES ACTIVOS"
          break;
        case "Terminado":
          titulo.innerHTML = "FERMENTADORES TERMINADOS"
          break;
        case "Cancelado":
          titulo.innerHTML = "FERMENTADORES CANCELADOS"
          break;
      }
      tablaFermentadores.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;overflow-y:scroll;height:640px;display:block;")
      tablaFermentadores.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var fermentador = seleccion[3] 
          var categoria = seleccion[4] 
          // alert(seleccion[4])
          // alert(fermentador)
          document.getElementById("lblCategoriaV").innerHTML = categoria 
          popPasosV(keyToVessel(fermentador,categoria))
          popFermentador(fermentador)
          document.getElementById("modalFermentadores").style.display="none"
        }
      };
    });
  }
  function popEmpleados(){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1wC_1GWyh6NTdxnphzrmvbp5kBqbMFeFv3IyvRllQ50c/edit?gid=0#gid=0')
    var queryf = "SELECT A,B,C,D,E,F,H,I WHERE G = 'Activo'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaEmpleados = document.getElementById("tablaEmpleados")
      // var titulo = document.getElementById("lblPTitulo")
      // alert(usuario)
      var key,fecha,nombre,role,url1,url2,lvl,user
      var table = "<tr><th style='text-align:center;padding:10px;background-color:black;color:white;'>DETALLES</th><th style='text-align:center;padding:10px;background-color:black;color:white;'>FOTO</th></tr>";
      data.sort({column: 0, desc: true});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        key = data.getValue(i, 0)
        fecha = data.getValue(i, 1)
        nombre = data.getValue(i, 2)
        role = data.getValue(i, 3)
        url1 = data.getValue(i, 4)
        url2 = data.getValue(i, 5)
        lvl = data.getValue(i, 6)
        user = data.getValue(i, 7)
        table = table + "</tr><tr style='border-bottom:2px solid black;padding:10px'></tr>" +
                        '<tr style="margin:10px">'+
                          '<td style="display:none>'+key+'</td>' +
                          '<td colspan="3" style="whord-wrap:break-word;width:50%">'+
                            '<a>#: </a>'+
                            '<b><a>'+keyToEmp(key)+'</a></b><br>'+
                            '<a>ALTA: </a>'+
                            '<b><a>'+getFormattedFecha(parseInt(fecha))+'</a></b><br>'+
                            '<a>NOMBRE: </a>'+
                            '<b><a>'+nombre+'</a></b><a><br>'+
                            '<a>PUESTO: </a>'+
                            '<b><a>'+role+'</a></b><br>'+
                          '</td>'+      
                          '<td style="padding:10px" colspan="3" >'+
                            '<div class="w3-card" style="padding:10px">'+
                              '<img id="imgScanK" src="'+url2+'" width="160px"/>'+
                            '</div>'+
                          '</td>' +
                          '</td><td style="display:none">'+ lvl +'</td>'
                          '</td><td style="display:none">'+ user +'</td>'
                        '</tr>'
      }
      // alert(table)
      tablaEmpleados.innerHTML = table;
      tablaEmpleados.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;word-wrap:break-word;overflow-y:scroll;height:640px;display:block")
      // tablaKegs.setAttribute("class","")
      tablaEmpleados.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var emp = seleccion[2] 
          // alert(emp)
          // emp = keyToEmp(emp)
          // paka = kegToKey(paka)
          initEmp(emp)
          // popPasos(keyToKeg(paka))
          document.getElementById("modalEmpleados").style.display="none"
        }
      };
    });
  }
  function popFuenteBtn(div,div2){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1gI7FaJxPMtfHrIqfZL3KS6Ursc3RxbjzUbz9hI5wpQw/edit?gid=0#gid=0')
    var queryf = "SELECT A,F,I,J,K WHERE L = 'CARBONATADO'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaEstilos = document.getElementById("tblFuenteScanK1")
      // var titulo = document.getElementById("lblPTitulo")
      // alert(tablaEstilos.innerHTML)
      
      var table = "";
      data.sort({column: 0, desc: false});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var fuente = data.getValue(i, 0)
        var litros = data.getValue(i, 1)
        var lote = data.getValue(i, 2)
        var categoria = data.getValue(i, 3)
        var estilo = data.getValue(i, 4)
        table = table + '<tr style="margin:10px">'+
                            '<td style="display:none;">'+fuente+'</td>' +
                            '<td style="display:none;">'+categoria+'</td>' +
                            '<td style="display:none;">'+lote+'</td>' +
                            '<td style="display:none;">'+estilo+'</td>' +
                            '<td style="display:none;">'+litros+'</td>' +
                          '<td class="w3-bar-item w3-button"><b>'+keyToVessel(fuente,categoria)+'</b> '+litros+' L, <b>'+lote+'</b> '+estilo+'</td>' +
                        '</tr>'
      }
      // alert(table)
      tablaEstilos.innerHTML = table;
      tablaEstilos.setAttribute("style","font-size:12px;display:none")
      tablaEstilos.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var fuente = seleccion[0] 
          // alert(fuente)
          var categoria = seleccion[1]
          var lote = seleccion[2]
          var estilo = seleccion[3]
          var litros = seleccion[4]
          fuente = keyToVessel(fuente,categoria)
          setDropdown('btnFuenteScan','txtFuenteScanK',fuente)
          // alert(estilo)
          document.getElementById("lblFuenteEstilo").innerHTML = estilo
          document.getElementById("lblFuenteLote").innerHTML = lote
          document.getElementById("lblFuenteLitros").innerHTML = litros + " L"
          // closeMenuBtn("tblFuenteScanK")
          cerrarModal("tblFuenteScanK")
        }
        // 
      }
    });
    setTimeout(function(){
      query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit?gid=0#gid=0')
      var queryf = "SELECT A,F,G,L WHERE J = 'LLENADO'"
      query.setQuery(queryf);
      // alert(queryf)
      query.send(function(response){
        if (response.isError()) {
          // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var data = response.getDataTable();
        var tablaEstilos2 = document.getElementById("tblFuenteScanK")
        var tablaEstilos = document.getElementById("tblFuenteScanK").innerHTML 
        // alert('')
        var leftTable = document.getElementById('tblFuenteScanK');
        // leftTable.querySelectorAll('tbody').forEach((tbody, i) => {if (i !== 0) {leftTable.removeChild(tbody);}});
        // tablaEstilos.toString().replace("<tbody>","")
        // tablaEstilos.toString().replace("</tbody>","")
        var table2 = "<tr style='background-color:black;user-select:none'><td colspan='3' style='font-weight:bold;padding:12px;color:white'>FERMENTADORES</td></tr>"+leftTable.innerHTML+
                     "<tr style='background-color:black;user-select:none'><td colspan='3' style='font-weight:bold;padding:12px;color:white'>BARRILES</td></tr>"
        // alert(table2)
        // tablaEstilos.innerHTML = ""
        data.sort({column: 0, desc: false});
        // alert(data.getNumberOfRows())
        for (var i=0; i<data.getNumberOfRows(); i++){
          var fuente = data.getValue(i, 0)
          var litros = data.getValue(i, 1)
          var estilo = data.getValue(i, 2)
          var lote = data.getValue(i, 3)
          table2 = table2 + '<tr style="margin:10px">'+
                            '<td style="display:none;">'+fuente+'</td>' +
                            '<td style="display:none;">'+fuente+'</td>' +
                            '<td style="display:none;">'+lote+'</td>' +
                            '<td style="display:none;">'+estilo+'</td>' +
                            '<td style="display:none;">'+litros+'</td>' +
                            '<td class="w3-bar-item w3-button"><b>'+keyToKeg(fuente)+'</b> '+litros+' L, <b>'+lote+'</b> '+estilo+'</td>' +
                          '</tr>'
        }
        // alert(table2)
        table2 = "<tr><td><table><tr><td class='w3-bar-item w3-button material-icons'>qr_code_scanner</td><td> Scan Fuente</td></tr></table></td></tr>" + table2
        // alert(table2)
        tablaEstilos2.innerHTML = table2;
        tablaEstilos2.setAttribute("style","font-size:12px;display:none")
        tablaEstilos2.onclick = function(e) {
          e = e || window.event;
          var seleccion = [];
          var target = e.srcElement || e.target;
          while (target && target.nodeName !== "TR") {
            target = target.parentNode;
          }
          if (target) {
            
            var cells = target.getElementsByTagName("td");
            for (var i = 0; i < cells.length; i++) {
              seleccion.push(cells[i].innerHTML);
            }
          }
          if (seleccion[0].length>0){
            var fuente = seleccion[0] 
            // alert(fuente)
            var categoria = seleccion[1]
            var lote = seleccion[2]
            var estilo = seleccion[3]
            var litros = seleccion[4]
            if (fuente != "FERMENTADORES" && fuente != "BARRILES"){
              if (fuente == "qr_code_scanner"){
                initQRscan("fuenteSelect")
              } else {
                if (categoria == fuente){
                  fuente = keyToKeg(fuente)
                } else {
                  fuente = keyToVessel(fuente,categoria)
                }
                setDropdown('btnFuenteScan','txtFuenteScanK',fuente)
                // alert(estilo)
                document.getElementById("lblFuenteEstilo").innerHTML = estilo
                document.getElementById("lblFuenteLote").innerHTML = lote
                document.getElementById("lblFuenteLitros").innerHTML = litros + " L"

                // document.getElementById("tblFuenteScanK").innerHTML = ""
                // document.getElementById("tblFuenteScanK1").innerHTML = ""
                cerrarModal("tblFuenteScanK")
                cerrarModal("tblFuenteScanK1")
              }
            }
          }
        };
      });
      var tbl1 = document.getElementById("tblFuenteScanK1").innerHTML
      document.getElementById("tblFuenteScanK").innerHTML = tbl1
      // document.getElementById("tblFuenteScanK").innerHTML = ""
      document.getElementById("tblFuenteScanK1").innerHTML = ""
      document.getElementById("tblFuenteScanK").setAttribute("style","font-size:12px")
      // closeMenuBtn("tblFuenteScanK")
      // closeMenuBtn("tblFuenteScanK1")
    }, 1000);
    setTimeout(function(){
        // cerrarModal("tblFuenteScanK")
        // cerrarModal("tblFuenteScanK1")
    }, 1300);
  }
  function popDestinoBtn(){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1gI7FaJxPMtfHrIqfZL3KS6Ursc3RxbjzUbz9hI5wpQw/edit?gid=0#gid=0')
    var queryf = "SELECT A,F,G,J WHERE I = 'LIMPIO'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaDestino = document.getElementById("divFermentador")
      var key,destino;
      // var titulo = document.getElementById("lblPTitulo")
      // alert('')
      
      var table = "";
      data.sort({column: 1, desc: false});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        key = data.getValue(i, 0)
        litros = data.getValue(i, 1)
        capacidad = data.getValue(i, 2)
        categoria = data.getValue(i, 3)
        destino = keyToVessel(key,categoria)
        if (destino.includes("FV")){
          table = table + '<tr style="margin:10px">'+
                            '<td style="display:none">'+key+'</td>'+
                            '<td style="display:none">'+categoria+'</td>'+
                            '<td class="w3-bar-item w3-button">'+destino+': '+litros+' L, '+capacidad+' L</td>' +
                          '</tr>'
        }
      }
      // alert(table)
      table = "<tr><td><table><tr><td class='w3-bar-item w3-button material-icons'>qr_code_scanner</td><td> Scan Destino</td></tr></table></td></tr>" + table
      tablaDestino.innerHTML = table;
      // tablakegs.setAttribute("class","w3-card")
      tablaDestino.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var key = seleccion[0] 
          var categoria = seleccion[1] 
          key = keyToVessel(key,categoria)
          // alert(key)
          // emp = keyToEmp(emp)
          // paka = kegToKey(paka)
          // popPasos(keyToKeg(paka))
          if (key == " Scan Destino"){
            initQRscan("destinoSelect")
            // cerrarModal("modalFermentadorScaneado")
          } else {
            setDropdown("btnFermentador",'txtFermentador',key)
          }
          closeMenuBtn("divFermentador")
        }
      };
    });
  }
  function popKegsBtn(){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1gI7FaJxPMtfHrIqfZL3KS6Ursc3RxbjzUbz9hI5wpQw/edit?gid=0#gid=0')
    var queryf = "SELECT A,F,G,J WHERE I != 'SUCIO'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaFermentador = document.getElementById("tblKegSelect1")
      var key;
      var table = "";
      data.sort({column: 1, desc: false});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        key = data.getValue(i, 0)
        litros = data.getValue(i, 1)
        capacidad = data.getValue(i, 2)
        categoria = data.getValue(i, 3)
        table = table + '<tr style="margin:10px">'+
                          '<td style="display:none">'+key+'</td>'+
                          '<td style="display:none">'+categoria+'</td>'+
                          '<td class="w3-bar-item w3-button">'+keyToVessel(key,categoria)+': '+litros+' L, '+capacidad+' L</td>' +
                        '</tr>'
      }
      // alert(table)
      tablaFermentador.innerHTML = table;
    });
    setTimeout(function(){
      query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit?gid=0#gid=0')
      var queryf = "SELECT A,B,F,K WHERE G != 'SUCIO'"
      query.setQuery(queryf);
      // alert('')
      query.send(function(response){
        if (response.isError()) {
          // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
          return;
        }
        var data = response.getDataTable();
        var tablakegs = document.getElementById('tblKegSelect')
        var tablaFermentador = document.getElementById('tblKegSelect1')
        var key;
        var table = tablaFermentador.innerHTML;
        tablaFermentador.innerHTML = "";
        data.sort({column: 2, desc: false});
        // alert(data.getNumberOfRows())
        for (var i=0; i<data.getNumberOfRows(); i++){
          key = data.getValue(i, 0)
          litros = data.getValue(i, 2)
          capacidad = data.getValue(i, 3)
          table = table + '<tr style="margin:10px"><td style="display:none">'+key+'</td><td style="display:none">'+key+'</td>'+
                            '<td class="w3-bar-item w3-button">'+keyToKeg(key)+': '+litros+' L, '+capacidad+' L</td>' +
                          '</tr>'
        }
        // alert(table)
        var sts = "kegSelect"
        table = "<tr><td><table><tr><td class='w3-bar-item w3-button material-icons'>qr_code_scanner</td><td> Scan Destino</td></tr></table></td></tr>" + table
        tablakegs.innerHTML = table;
        // tablakegs.setAttribute("class","w3-card")
        tablakegs.onclick = function(e) {
          e = e || window.event;
          var seleccion = [];
          var target = e.srcElement || e.target;
          while (target && target.nodeName !== "TR") {
            target = target.parentNode;
          }
          if (target) {
            
            var cells = target.getElementsByTagName("td");
            for (var i = 0; i < cells.length; i++) {
              seleccion.push(cells[i].innerHTML);
            }
          }
          if (seleccion[0].length>0){
            var key = seleccion[0] 
            var categoria = seleccion[1] 
            // key = keyToKeg(key)
            if (categoria.includes("BT") || categoria.includes("FV")){
              key = keyToVessel(key,categoria)
            } else {
              key = keyToKeg(key)
            }
            // emp = keyToEmp(emp)
            // paka = kegToKey(paka)
            // popPasos(keyToKeg(paka))
            if (key != "KEGKEG"){
              setDropdown('btnKegSelect','txtKegSelect',key)
            } else {
              initQRscan("kegSelect")
              // cerrarModal("modalFermentadorScaneado")
            }
            closeMenuBtn('tblKegSelect')
          }
        };
      });
    }, 1000);
  }
  function popClientes(){
    // alert('')
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/15PQIC_XJDHCQ-jUlbaW8IhZ3I5Emz72wlrVI2jH5-sI/edit?gid=0#gid=0')
    var queryf = "SELECT A,B WHERE C = 'Activo'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaClientes = document.getElementById("tblClientesScan")
      // var titulo = document.getElementById("lblPTitulo")
      // alert('')
      
      var table = "";
      data.sort({column: 0, desc: false});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        table = table + '<tr style="margin:10px">'+
                          '<td class="w3-bar-item w3-button">'+data.getValue(i, 1)+'</td>' +
                        '</tr>'
      }
      // alert(table)
      tablaClientes.innerHTML = table;
      tablaClientes.setAttribute("style","font-family:Raleway, sans-serif;letter-spacing:1px;font-size:12px;display:none")
      // tablaClientes.setAttribute("class","w3-table")
      tablaClientes.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          var cliente = seleccion[0] 
          // alert(emp)
          // emp = keyToEmp(emp)
          // paka = kegToKey(paka)
          // popPasos(keyToKeg(paka))
          setDropdown('btnClienteScan','txtClienteScan',cliente)
          closeMenuBtn("tblClientesScan")
        }
      };
    });
  }
  function popPasosRef(){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-zGHeNPOyt-4umBS7RIB-pl1IqLTvtPacaI411rf0dE/edit#gid=0')
    var queryf = "SELECT A,B,C,D,E,F,G,H"
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaStats = document.getElementById("tablaStats")
      var table = "";
      data.sort({column: 0, desc: true});
      for (var i=0; i<data.getNumberOfRows(); i++){
        table = table + "<tr><td>"+data.getValue(i, 0)+"</td>"+
                            "<td>"+data.getValue(i, 1)+"</td>"+
                            "<td>"+data.getValue(i, 2)+"</td>"+
                            "<td>"+data.getValue(i, 3)+"</td>"+
                            "<td>"+data.getValue(i, 4)+"</td>"+
                            "<td>"+data.getValue(i, 5)+"</td>"+
                            "<td>"+data.getValue(i, 6)+"</td>"+
                            "<td>"+data.getValue(i, 7)+"</td></tr>"
      }
      tablaStats.innerHTML = table;
    });
  }
  function popEmpleadosRef(){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1Fh9rTnwggwJvrJ3xSn-qGsv9II-cawhkspMuOUquft8/edit?gid=0#gid=0')
    var queryf = "SELECT A,C,H,I WHERE G = 'Activo'"
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaEmpleados = document.getElementById("tablaEmpleadosRef")
      var usuario = document.getElementById("lblUsuario").innerHTML
      var table = "";
      var key,user
      data.sort({column: 0, desc: true});
      for (var i=0; i<data.getNumberOfRows(); i++){
        key = data.getValue(i, 0)
        user = data.getValue(i, 3)
        table = table + "<tr><td>"+key+"</td><td>"+data.getValue(i, 1)+"</td><td>"+data.getValue(i, 2)+"</td></tr>"
        if (usuario == user){
          document.getElementById("lblUsuario").innerHTML = keyToEmp(key)
          document.getElementById("txtEmpleado").value = keyToEmp(key)
          // alert(keyToEmp(key))
        }
      }
      tablaEmpleados.innerHTML = table;
      // alert(tablaEmpleados.rows.length)
    });
  }

  function popKeg(keg){
    refreshAll(true)
    popFuenteBtn("tblFuenteScanK","tblFuenteScanK2")
    // alert(keg)
    // var sts = document.getElementById("lblSts").innerHTML
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit#gid=0')
    // var queryf = "SELECT A,B,C,D,E,F,G WHERE H = '"+sts+"' AND A = "+keg
    var queryf = "SELECT A,B,C,D,E,F,G,H,I,J,K,L WHERE A = "+keg
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      data.sort({column: 0, desc: true});
      // alert(data.getValue(0, 5))
      document.getElementById("lblKegTitulo").innerHTML = keyToKeg(data.getValue(0, 0))
      document.getElementById("txtIDedit").value = data.getValue(0, 0)
      document.getElementById("lblKegTituloEdit").innerHTML = keyToKeg(data.getValue(0, 0))
      document.getElementById("lblFechaScanK").innerHTML = getFormattedFecha(data.getValue(0, 1))
      document.getElementById("lblFechaEdit").innerHTML = getFormattedFecha(data.getValue(0, 1))
      // alert(data.getValue(0, 2))
      // alert(paka)
      // document.getElementById("lblNotaScan").innerHTML = data.getValue(0, 2)
      document.getElementById("txtNotaEdit").value = data.getValue(0, 2)
      document.getElementById("lblURLScanK").innerHTML = data.getValue(0, 3)
      document.getElementById("lblURLEdit").innerHTML = data.getValue(0, 3)
      document.getElementById("imgScanK").src = data.getValue(0, 4)
      document.getElementById("imgEdit").src = data.getValue(0, 4)
      document.getElementById("lblCapacidadScanK").innerHTML = data.getValue(0, 5)
      document.getElementById("lblCapacidadTotalK").innerHTML = data.getValue(0, 10)
      document.getElementById("txtCantidadEdit").value = data.getValue(0, 5)
      document.getElementById("lblContenidoScanK").innerHTML = data.getValue(0, 6)
      document.getElementById("txtEstiloEdit").value = data.getValue(0, 6)
      document.getElementById("lblSts").innerHTML = data.getValue(0, 7)
      document.getElementById("lblUbicacionScan").innerHTML = data.getValue(0, 8)
      document.getElementById("lblStatusScanK").innerHTML = data.getValue(0, 9)
      // document.getElementById("lblColorScan").innerHTML = data.getValue(0, 8)
      document.getElementById("lblLoteScanK").innerHTML = data.getValue(0, 11)
      document.getElementById("btnColorEdit").style.backgroundColor = data.getValue(0, 8)
      // document.getElementById("lblColorScan").style.color = data.getValue(0, 8)
      // document.getElementById("lblColorScan").style.backgroundColor = data.getValue(0, 8)
      // google.script.run.borrarPaka()
      popPasos(keyToKeg(data.getValue(0, 0)))
    });
    setTimeout(function(){
      document.getElementById('modalKegscaneada').style.display='block';
      refreshAll(false)
    }, 1000);
    setTimeout(function(){
      var pakaScan = document.getElementById("modalKegscanCont")
      // pakaScan.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'start' })
      // pakaScan.scrollBy(0,300)
    }, 1300);
  }
  function popFermentador(fermentador){
    refreshAll(true)
    popKegsBtn()
    // alert(fermentador)
    // var sts = document.getElementById("lblSts").innerHTML
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1gI7FaJxPMtfHrIqfZL3KS6Ursc3RxbjzUbz9hI5wpQw/edit?gid=0#gid=0')
    // var queryf = "SELECT A,B,C,D,E,F,G WHERE H = '"+sts+"' AND A = "+keg
    var queryf = "SELECT A,B,C,D,E,F,G,H,I,J,K,L WHERE A = "+fermentador
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      data.sort({column: 0, desc: true});
      // alert(data.getValue(0, 9))
      document.getElementById("lblFermentadorTitulo").innerHTML = keyToVessel(data.getValue(0, 0),data.getValue(0, 9))
        // document.getElementById("txtIDedit").value = data.getValue(0, 0)
        // document.getElementById("lblKegTituloEdit").innerHTML = keyToKeg(data.getValue(0, 0))
      document.getElementById("lblFechaScanV").innerHTML = getFormattedFecha(data.getValue(0, 1))
      document.getElementById("lblNotaScanV").innerHTML = data.getValue(0, 2)
      document.getElementById("txtNotaEdit").value = data.getValue(0, 2)
      document.getElementById("lblURLScanV").innerHTML = data.getValue(0, 3)
      // document.getElementById("lblURLEdit").innerHTML = data.getValue(0, 3)
      document.getElementById("imgScanV").src = data.getValue(0, 4)
      // document.getElementById("imgEdit").src = data.getValue(0, 4)
      document.getElementById("lblCapacidadScanV").innerHTML = formatCurrency(data.getValue(0, 5))
      // document.getElementById("txtCantidadEdit").value = data.getValue(0, 5)
      document.getElementById("lblContenidoScanV").innerHTML = formatCurrency(data.getValue(0, 6))
      document.getElementById("lblEstiloScanV").innerHTML = data.getValue(0, 10)
      document.getElementById("lblLoteScanV").innerHTML = data.getValue(0, 8)
      // document.getElementById("txtEstiloEdit").value = data.getValue(0, 6)
      // document.getElementById("lblSts").innerHTML = data.getValue(0, 7)
      // document.getElementById("lblUbicacionScan").innerHTML = data.getValue(0, 8)
      document.getElementById("lblStatusScanV").innerHTML = data.getValue(0, 11)
      // document.getElementById("lblColorScan").innerHTML = data.getValue(0, 8)
      // document.getElementById("txtColorPakaEdit").value = data.getValue(0, 8)
      // document.getElementById("btnColorEdit").style.backgroundColor = data.getValue(0, 8)
      // document.getElementById("lblColorScan").style.color = data.getValue(0, 8)
      // document.getElementById("lblColorScan").style.backgroundColor = data.getValue(0, 8)
      // google.script.run.borrarPaka()
      // popPasos(keyToKeg(data.getValue(0, 0)))
    });
    setTimeout(function(){
      document.getElementById('modalFermentadorScaneado').style.display='block';
      refreshAll(false)
    }, 1000);
    setTimeout(function(){
      var pakaScan = document.getElementById('modalFermentadorScanCont')
      // pakaScan.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'start' })
      // pakaScan.scrollBy(0,300)
    }, 1300);
  }
  function popEmpleado(emp){
    refreshAll(true)
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1wC_1GWyh6NTdxnphzrmvbp5kBqbMFeFv3IyvRllQ50c/edit?gid=0#gid=0')
    emp = empToKey(emp)
    // alert(emp)
    var queryf = "SELECT A,B,C,D,E,F,G WHERE A = "+emp
    // alert(queryf)
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      // alert(data.getNumberOfRows())
      data.sort({column: 0, desc: true});
      document.getElementById("lblEmpleadoTituloEdit").innerHTML = keyToEmp(data.getValue(0, 0))
      document.getElementById("lblEmpleadoTitulo").innerHTML = keyToEmp(data.getValue(0, 0))
      document.getElementById("txtIDeditEmp").value = data.getValue(0, 0)
      document.getElementById("lblFechaEmp").innerHTML = getFormattedFecha(data.getValue(0, 1))
      document.getElementById("txtFechaEmp").innerHTML = getFormattedFecha(data.getValue(0, 1))
      // document.getElementById("lblFechaEdit").innerHTML = getFormattedFecha(data.getValue(0, 1))
      document.getElementById("lblNombre").innerHTML = data.getValue(0, 2)
      document.getElementById("txtNombre").value = data.getValue(0, 2)
      document.getElementById("txtNombreEdit").value = data.getValue(0, 2)
      document.getElementById("lblPuesto").innerHTML = data.getValue(0, 3)
      document.getElementById("txtPuesto").value = data.getValue(0, 3)
      document.getElementById("txtPuestoEdit").value = data.getValue(0, 3)
      document.getElementById("imgEditEmp").src = data.getValue(0, 5)
      document.getElementById("lblURLEmp").innerHTML = data.getValue(0, 4)
      document.getElementById("lblURLEditEmp").innerHTML = data.getValue(0, 4)
      document.getElementById("imgEmp").src = data.getValue(0, 5)
    });
            //     <h1 id="lblKegTituloPrint"></h1>
            // <h2 id="lblPakaFechaPrint"></h2>
            // <h2 id="lblKegCapacidadPrint"></h2>
            // <h2 id="lblKegContenidoPrint"></h2>

    setTimeout(function(){
      document.getElementById('modalEmpleadoScan').style.display='block'; 
      refreshAll(false)
    }, 1000);
    setTimeout(function(){
      var empScan = document.getElementById("modalEmpleadoScanCont")
      empScan.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'start' })
    }, 1300);
  }
  function popPasos(keg){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-zGHeNPOyt-4umBS7RIB-pl1IqLTvtPacaI411rf0dE/edit#gid=0')
    var queryf = "SELECT A,B,D,E,F,G,H,J,K,L,M,N,O WHERE I = 'Activo' AND C = '" + keg + "'"
    // var queryf = "SELECT A,B,D,E,F,G,H,J,K,L,M,N,O WHERE I = 'Activo' AND C = " + keg 
    query.setQuery(queryf);
    // alert(queryf)
    query.send(function(response){
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaPasos = document.getElementById("tablaKegscan")

      // alert(keg)
      var table = "";
      data.sort({column: 0, desc: true});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var fecha = getFormattedFecha(data.getValue(i, 1))
        var paso = data.getValue(i, 2)
        var cantidad = data.getValue(i, 3)
        var contenido = data.getValue(i, 4)
        var nota = data.getValue(i, 5)
        var emp = data.getValue(i, 6)
        var ubicacion = data.getValue(i, 7)
        var cobro = data.getValue(i, 8)
        var moneda = data.getValue(i, 9)
        var metodo = data.getValue(i, 10)
        var lote = data.getValue(i, 11)
        var estilo = data.getValue(i, 12)
        // alert(estilo)
        if (cobro ==  0){cobro = "none";moneda = "";metodo = ""} else (cobro = formatCurrency(cobro))
        
        // emp = empToKey(emp)
        emp = checkEmpleado(emp)
        // alert(emp)
        if (nota==null){nota = ""}
        if (lote==null){lote = ""}
        if (estilo==null){estilo = ""}
        // alert(table)
        table = table + 
        "<tr style='padding:0px;padding-top:30px;text-transform:uppercase'><td style='display:none;'>" + data.getValue(i, 0) + "</td>"+
          '<td>'+
            '<table class="w3-card">'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczOsiNpXwXktbcPqI6vVWla8GGPKHRtkjOkuOU0M6PceCt5VIpBPf3E3ZLi7EkpO3_qoSJa4Kj5ms6WEHyXthL18iGwHbj-Ie9Q8J3hl93nZNyEI6Gz1iUuGiOQzLdnSfanbTpJSXSLagDJ0WTWrhkB-Fg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td><b>'+paso+'</b></td><td class="material-icons" onclick="closePasoKeg('+data.getValue(i, 0)+')">close</td>'+
              '</tr>'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczPflFo1mJL3uESUsetaLZymcecNzD1tB23k2LqqDNuQG_PEHx7jdO6HKbRgtpVvKwj7I9ksbKro0m4exp2mABraZnL6mDR8uBYrm6OAQfQNBvGvSa_5mC1QzCiTs9nlSBQPd4vvRuEImtUUn44C3GLScg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td colspan="2">'+fecha+'</td>'+
              '</tr>'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczOKZM3WX_1W23huHtCBqQoUBKHqfdihJ9hlX7TADe5yPyjQnvnpfFNyhocqXwg0bDOpIyS6ostDn8TBx_vIOL423DnFTtjj_48yH6N3GScCdzOqXarBLg5GmKKLSRuIIOEc4yFCreiQL_bDAHL84-v-gA=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td colspan="2">'+cantidad+' L, <b>'+lote+'</b> '+estilo +
                  // '<table>'+
                  //   '<tr><td>'+cantidad+' L, '+lote+' '+contenido+'</td></tr>' +
                  //   '<tr><td>'+contenido+'</td></tr>' +
                  // '</table>'+
                '</td>'+
              '</tr>'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczM1beb8QzHgq5PgAJVvNw3t1YfnRk07SrRYlMVSisRtephLppjLurgjJQIFhfYyUr0kQYUBtwYkXvvCEvrSYokuh2JYA9k8-mUitWGreFiHmbgCOeMM9ilT_pp7gJPCXCQIEXtjImHy47ldQwq9pSC2ww=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td colspan="2">'+ubicacion+'</td>'+
              '</tr>'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczMkaDgf2MN15N-ZhdKAGMpN0YvDqvelO148mpanDmZnwpYahOjgz_lL4KVBbXFM8Bw0Q4aG-J7qXFtRFMqemVauoU963T_see1y6B3T8ayX7PEr4OZdIlRkUMJpvgg3Jsp6iwWHwhjIOew2mTAtDH5rIA=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td>'+emp+'</td>'+
              '</tr>'+
              '<tr style="display:'+cobro+'" colspan="3">'+
                '<td class="material-icons"><img src="https://lh3.googleusercontent.com/pw/AP1GczNSNmDMpu1t-oSQoy7TVW0HlHvzK93x52fg3dkkxxI8hgQGLW71nqIxRDWMVfZ-KEoOEcjup8eHZCBwCVa-PlG33XCoeVTTBocO5UE9Lom770E_ashepTvRAsYgld6c7VR6mrJn0d3jmiN3ekeOBv1_HQ=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td colspan="2">'+cobro+' '+moneda+' '+metodo+'</td>'+
              '</tr>'+
              '<tr>'+
                '<td colspan="3">'+nota+'</td>'+
              '</tr>'+
            '</table>'+
          '</td>'+
          // '<td class="material-icons">close</td>'+
        '</tr>' 

      }
      // alert(table)
      tablaPasos.innerHTML = table;
      // tablaPasos.setAttribute("style","font-size:14px;font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;width:300px;word-wrap:break-word")
      // tablaKegs.setAttribute("class","")
      tablaPasos.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        var targetInicial = target
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          if (targetInicial.innerHTML == "close"){
            // alert(seleccion[0])
            // var range = "I"+seleccion[0]
            // // alert(range)
            // google.script.run.updPasosKeg("Cancelado",range)
            // // alert(paka)
            // refreshAll(true)
            // setTimeout(function(){
            //   var paka = document.getElementById("lblKegTitulo")
            //   popPasos(paka.innerHTML)
            //   refreshAll(false)
            // }, 2500);
          } else {
          }
          // window.open(url)
          // alert(targetInicial.innerHTML)
        }
      };
    });
  }
  function popPasosV(fermentador){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1l5mXjbLjBrajqku6WnG_XZ3nkddd9R-YOYwp-SSXo3s/edit?gid=0#gid=0')
    var queryf = "SELECT A,B,D,E,F,H,I,J,K WHERE G = 'Activo' AND C = '" + fermentador + "'"
    query.setQuery(queryf);
    // alert('')
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaPasos = document.getElementById("tablaFermentadorScan")
      var table = "";
      var display,display2
      data.sort({column: 1, desc: true});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var fecha = getFormattedFecha(data.getValue(i, 1))
        var paso = data.getValue(i, 2)
        var nota = data.getValue(i, 3)
        var emp = data.getValue(i, 4)
        var keg = data.getValue(i, 5)
        var litros = data.getValue(i, 6)
        var lote = data.getValue(i, 7)
        var estilo = data.getValue(i, 8)
        emp = checkEmpleado(emp)
        // alert(emp)
        if (nota==null){nota = ""}
        if (lote==null){lote = ""}
        if (estilo==null){estilo = ""}
        if (nota==null){nota = ""}
        if (keg==null){keg = "";display = "none"}
        if (litros==null){litros = "";display = "none"} else {litros = formatCurrency(litros)}
        if (paso!="LLENAR FERMENTADOR" && paso!="LLENAR BRIGHT TANK"){display2 = "none"}else{display2 = ""}
        table = table + 
        "<tr style='padding:20px;padding-top:30px;text-transform:uppercase'><td style='display:none;'>" + data.getValue(i, 0) + "</td>"+
          '<td>'+
            '<table class="w3-card">'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczOsiNpXwXktbcPqI6vVWla8GGPKHRtkjOkuOU0M6PceCt5VIpBPf3E3ZLi7EkpO3_qoSJa4Kj5ms6WEHyXthL18iGwHbj-Ie9Q8J3hl93nZNyEI6Gz1iUuGiOQzLdnSfanbTpJSXSLagDJ0WTWrhkB-Fg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td><b>'+paso+'</b></td><td class="material-icons" onclick="closePasoFermentador('+data.getValue(i, 0)+')">close</td>'+
              '</tr>'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczPflFo1mJL3uESUsetaLZymcecNzD1tB23k2LqqDNuQG_PEHx7jdO6HKbRgtpVvKwj7I9ksbKro0m4exp2mABraZnL6mDR8uBYrm6OAQfQNBvGvSa_5mC1QzCiTs9nlSBQPd4vvRuEImtUUn44C3GLScg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td colspan="2">'+fecha+'</td>'+
              '</tr>'+
              '<tr style="display:'+display+'">'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczOKZM3WX_1W23huHtCBqQoUBKHqfdihJ9hlX7TADe5yPyjQnvnpfFNyhocqXwg0bDOpIyS6ostDn8TBx_vIOL423DnFTtjj_48yH6N3GScCdzOqXarBLg5GmKKLSRuIIOEc4yFCreiQL_bDAHL84-v-gA=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td>'+keg+': '+litros+' L '+estilo+'</td>'+
              '</tr>'+
              '<tr style="display:'+display2+'">'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczPTkdmODXZVEPmmnJUrquoO7YevWIIEd06dZ2cMmPgUd4RJSH6qOQYB5saWL25njV290K-mqKx7TPlq5MTimGb_Ui2bNCh7itguRH5EzkLL0H4vPHz1zqq_Xwo0CceePkSshB5wdzAkLt3ET2HRJkdGGg=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td>'+lote+': '+litros+' L '+estilo+'</td>'+
              '</tr>'+
              '<tr>'+
                '<td><img src="https://lh3.googleusercontent.com/pw/AP1GczMkaDgf2MN15N-ZhdKAGMpN0YvDqvelO148mpanDmZnwpYahOjgz_lL4KVBbXFM8Bw0Q4aG-J7qXFtRFMqemVauoU963T_see1y6B3T8ayX7PEr4OZdIlRkUMJpvgg3Jsp6iwWHwhjIOew2mTAtDH5rIA=w512-h512-s-no-gm?authuser=0" width="30" height="30" valign="center"></td><td>'+emp+'</td>'+
              '</tr>'+
              '<tr>'+
                '<td colspan="3" style="font-size:14px">'+nota+'</td>'+
              '</tr>'+
            '</table>'+
          '</td>'+
          // '<td class="material-icons">close</td>'+
        '</tr>' 

      }
      // alert(table)
      tablaPasos.innerHTML = table;
      // tablaPasos.setAttribute("style","font-size:14px;font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;width:300px;word-wrap:break-word")
      // tablaKegs.setAttribute("class","")
      tablaPasos.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        var targetInicial = target
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          if (targetInicial.innerHTML == "close"){

          } else {
          }
          // window.open(url)
          // alert(targetInicial.innerHTML)
        }
      };
    });
  }
  function popPasosEmp(emp){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-zGHeNPOyt-4umBS7RIB-pl1IqLTvtPacaI411rf0dE/edit#gid=0')
    var queryf = "SELECT A,B,C,D,E,F,G,H WHERE I = 'Activo' AND H = '" + emp + "'"
    query.setQuery(queryf);
    // alert(emp)
    query.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tablaPasos = document.getElementById("tablaEmpleadoScan")
      // alert('')
      var table = "";
      data.sort({column: 1, desc: true});
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var fecha = getFormattedFecha(data.getValue(i, 1))
        var paka = data.getValue(i, 2)
        var paso = data.getValue(i, 3)
        var peso = data.getValue(i, 4)
        var nota = data.getValue(i, 5)
        // alert(emp)
        if (nota==null){nota = ""}
        table = table + 
        "<tr style='padding:20px;padding-top:30px;text-transform:uppercase'><td style='display:none;'>" + data.getValue(i, 0) + "</td>"+
          '<td colspan="3" >'+
            '<a>PAKA: </a>'+
            '<b><a>'+paka+'</a></b><br>'+
            '<a>PASO: </a>'+
            '<b><a>'+paso+'</a></b><br>'+
            '<a> PESO: </a>'+
            '<b><a>'+peso+'</a></b><a> KG</a><br>'+
            '<a>FECHA: </a>'+
            '<b><a>'+fecha+'</a></b><br>'+
            '<a>NOTA: </a>'+
            '<b><a>'+nota+'</a></b><br>'+
            '<div class="w3-center"><h6 class="material-icons">arrow_drop_down</h6></div>'+
          '</td>'+      
          '<td class="material-icons">close</td>'+
          '<td style="display:none">'+data.getValue(i, 0)+'</td' +
        '</tr>'
      }
      // alert(table)
      tablaPasos.innerHTML = table;
      // tablaPasos.setAttribute("style","font-size:14px;font-family:Raleway, sans-serif;letter-spacing:1px;text-transform:uppercase;width:300px;word-wrap:break-word")
      // tablaKegs.setAttribute("class","")
      tablaPasos.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        var targetInicial = target
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          if (targetInicial.innerHTML == "close"){
            // alert(seleccion[3])
            var range = "H"+seleccion[3]
            // alert(range)
            google.script.run.updPasosKeg("Cancelado",range)
            // alert(paka)
            refreshAll(true)
            setTimeout(function(){
              var paka = document.getElementById("lblKegTitulo")
              var emp = document.getElementById("lblEmpleadoTitulo")
              popPasos(paka.innerHTML)
              popPasosEmp(emp.innerHTML)
              refreshAll(false)
            }, 1500);
            setTimeout(function(){
              var paka = document.getElementById("lblKegTitulo")
              var emp = document.getElementById("lblEmpleadoTitulo")
              popPasos(paka.innerHTML)
              popPasosEmp(emp.innerHTML)
              refreshAll(false)
            }, 2500);
          } else {
          }
          // window.open(url)
          // alert(targetInicial.innerHTML)
        }
      };
    });
  }
  function guardarPaso(){
    var fecha = Date.parse(new Date())
    var keg = document.getElementById("lblKegTitulo")
    var paso = document.getElementById("txtPasoScan")
    var litros = document.getElementById("txtCantidadScanK").value 
    var nota = document.getElementById("txtNotaScan")
    var lote = document.getElementById("lblLoteScanK")
    var cantidad = document.getElementById("lblCapacidadScanK").innerHTML 
    var fuenteLote = document.getElementById("lblFuenteLote").innerHTML
    var fuenteEstilo = document.getElementById("lblFuenteEstilo").innerHTML 
    var fuenteLitros = document.getElementById("lblFuenteLitros").innerHTML 
    var contenido = document.getElementById("lblContenidoScanK").innerHTML 
    var fuente = document.getElementById("txtFuenteScanK").value
    var cliente = document.getElementById("txtClienteScan").value
    var cobro = document.getElementById("txtCobroScan").value
    var moneda = document.getElementById("txtMonedaScan").value
    var metodo = document.getElementById("txtMetodoScan").value
    var emp = document.getElementById("lblEmpleadoScan")
    var chk = document.getElementById("chkInvoice")
    cobro = parseInt(cobro.replace(",",""))
    // alert(emp.innerHTML)
    var btnPaso = document.getElementById("btnPasoScan")
    var ubicacion = document.getElementById("lblUbicacionScan").innerHTML 
    // alert(document.getElementById("txtPasoScan").value)
    var sts;
    if (btnPasoScan.innerHTML=="PASO"){
      document.getElementById("modalKegscaneada").style.display = "block"
      alert("Favor de seleccionar el paso")
      refreshAll(false)
      // initKeg(keg)
    } else {
      if (litros != 0){cantidad = litros}
      // if (estilo != ""){contenido = estilo}
      if (cliente != ""){ubicacion = cliente}
      // if (fuente != ""){ubicacion = cliente}
      // alert(fuenteLote)
      if (fuenteLote == ""){fuenteLote = lote.innerHTML}
      if (fuenteEstilo == ""){fuenteEstilo = contenido}

      switch(btnPaso.innerHTML) {
        case "LAVAR KEG":
          ubicacion = "PLANTA";cantidad = 0; contenido = "LIMPIO"; cobro = 0; sts = "LAVADO"
          break;
        case "LLENAR KEG":
          cobro = 0; sts = "LLENADO"; contenido = fuenteEstilo
          break;
        case "RECOGER KEG":
          ubicacion = "PLANTA";cantidad = 0; contenido = "SUCIO"; cobro = 0; sts = "REGRESADO"
          break;
        case "VENDER KEG":
          cobro = 0; sts = "VENDIDO"
          break;
        case "COBRAR KEG":
          sts = "COBRADO"
          if (chk.checked){sendInvoice()}
          break;
        case "DESACTIVAR KEG":
          cobro = 0; sts = "INACTIVO"
          break;
        case "REACTIVAR KEG":
          cobro = 0; sts = "SUCIO"
          break;
      }
      var categoria,total,estatus
      fuenteLitros = parseInt(fuenteLitros.replace(" L",""))
      total = fuenteLitros - cantidad
      // alert(fuente)
      if (total <= 0){estatus = "SUCIO"}
      if (fuente.includes("FV") || fuente.includes("BT")){
        if (fuente.includes("FV")){categoria="FV"} else {categoria="BT"}
        var key = vesselToKey(fuente).toString()
        var range = "F"+key
        // alert(range)
        google.script.run.updVessel(fecha,"B"+key)
        google.script.run.updVessel(total,range)
        if (estatus=="SUCIO"){
          google.script.run.updVessel(estatus,"K"+vesselToKey(fuente))
          google.script.run.updVessel(" ","I"+vesselToKey(fuente))
          google.script.run.updVessel("VACIADO","L"+vesselToKey(fuente))
        }
        google.script.run.savePasoV(fecha,fuente,"LLENAR KEG",nota.value,emp.innerHTML,keg.innerHTML,litros)
      } else {
        google.script.run.updKeg(fecha,"B"+kegToKey(fuente))
        google.script.run.updKeg(total,"F"+kegToKey(fuente))
        if (estatus=="SUCIO"){
          google.script.run.updKeg(estatus,"G"+kegToKey(fuente))
          google.script.run.updKeg("VACIADO","J"+kegToKey(fuente))
          google.script.run.updKeg("","L"+kegToKey(fuente))
        }
        if (fuente != ""){
          google.script.run.savePaso(fecha,fuente,"KEG TRANSFER",cantidad,fuenteEstilo,nota.value,emp.innerHTML,ubicacion,cobro,moneda,metodo)
        }
      }
      // alert(fuenteEstilo)
      google.script.run.savePaso(fecha,keg.innerHTML,paso.value,cantidad,contenido,nota.value,emp.innerHTML,ubicacion,cobro,moneda,metodo,fuenteLote,fuenteEstilo)
      google.script.run.updKeg(fecha,"B"+kegToKey(keg.innerHTML))
      google.script.run.updKeg(cantidad,"F"+kegToKey(keg.innerHTML))
      google.script.run.updKeg(contenido,"G"+kegToKey(keg.innerHTML))
      google.script.run.updKeg(ubicacion,"I"+kegToKey(keg.innerHTML))
      google.script.run.updKeg(sts,"J"+kegToKey(keg.innerHTML))
      google.script.run.updKeg(fuenteLote,"L"+kegToKey(keg.innerHTML))
      if (btnPaso.innerHTML == "DESACTIVAR KEG"){
        google.script.run.updKeg("Inactivo","H"+kegToKey(keg.innerHTML))
      } else if (btnPaso.innerHTML == "REACTIVAR KEG"){
        google.script.run.updKeg("Activo","H"+kegToKey(keg.innerHTML))
      }
      btnPaso.innerHTML = "PASO"
      paso.value = "PASO"
      document.getElementById("txtCantidadScanK").value = 0
      document.getElementById("txtFuenteScanK").value = ""
      document.getElementById("txtClienteScan").value = ""
      document.getElementById("lblFuenteEstilo").innerHTML = ""
      document.getElementById("lblFuenteLote").innerHTML = ""
      document.getElementById("lblFuenteLitros").innerHTML = ""
      document.getElementById("btnFuenteScan").innerHTML = "FUENTE"
      nota.value = ""
      emp.innerHTML = ""
      // closeMenuBtn('divPasoScan');
      cerrarModal('divCantidadScanK');
      cerrarModal('divClienteScan');
      cerrarModal('divFuenteScanK');
      cerrarModal('divCobroScan');
      setTimeout(function(){
        initKeg(document.getElementById("lblKegTitulo").innerHTML);
        popPasos(document.getElementById("lblKegTitulo").innerHTML)
        popFuenteBtn("tblFuenteScanK","tblFuenteScanK2")
        refreshAll(false)
      }, 1500);
      setTimeout(function(){
        initKeg(document.getElementById("lblKegTitulo").innerHTML);
        popPasos(document.getElementById("lblKegTitulo").innerHTML)
      }, 2500);
      document.getElementById("modalKegscaneada").style.display = "block"
    }
  }
  function guardarPasoV(){
    var fecha = Date.parse(new Date())
    var fermentador = document.getElementById("lblFermentadorTitulo").innerHTML
    var paso = document.getElementById("txtPasoScanV").value
    var estilo = document.getElementById("txtEstilo").value
    var nota = document.getElementById("txtNotaScanV").value
    var btnPaso = document.getElementById("btnPasoScanV").innerHTML
    var capacidad = document.getElementById("lblCapacidadScanV").innerHTML
    var emp = document.getElementById("lblEmpleadoScan").innerHTML
    var cat = document.getElementById("lblCategoriaV").innerHTML
    var contenido = document.getElementById("lblContenidoScanV").innerHTML
    var keg = document.getElementById("txtKegSelect").value
    var litros = document.getElementById("txtCantidadScanV").value
    var lote = document.getElementById("lblLoteScanV").innerHTML
    var estilo = document.getElementById("lblEstiloScanV").innerHTML
    total = capacidad - litros
    if (total.toString()=="NaN"){total = capacidad}
    key = vesselToKey(fermentador)
    key2 = kegToKey(keg)
    // alert(btnPasoScan.innerHTML)
    var status,sts,key,total,key2,lote,sts2,estatus
    if (btnPaso.innerHTML=="PASO"){
      document.getElementById("modalFermentadorScaneado").style.display = "block"
      alert("Favor de seleccionar el paso")
      refreshAll(false)
      // initKeg(keg)
    } else {
      switch(btnPaso) {
        case "LAVAR FERMENTADOR":
          sts = "LAVADO";lote = "LIMPIO";sts2 = "LIMPIO";estilo = " ";total = 0;
          break;
        case "LLENAR FERMENTADOR":
          sts = "LLENADO"
          break;
        case "BAJAR TEMP":
          sts = "COOLING"
          break;
        case "HARVEST":
          sts = "COOLING"
          break;
        case "INICIAR COLD CRASH":
          sts = "COLD CRASHING"
          break;
        case "INICIAR CARB":
          sts = "CARBONATANDO"
          break;
        case "TERMINAR CARB":
          sts = "CARBONATADO"
          break;
        case "TRANSFER":
          sts = "CARBONATADO"
          if (keg.includes("FV")){
            google.script.run.savePasoV(fecha,keg,"LLENAR FERMENTADOR",nota,emp,"",litros,lote,estilo)
            google.script.run.editFermentador(vesselToKey(keg),fecha,nota,"Activo",sts,litros,lote,estilo)
          } else if (keg.includes("BT")){
            // alert(vesselToKey(keg))
            google.script.run.savePasoV(fecha,keg,"LLENAR BRIGHT TANK",nota,emp,"",litros,lote,estilo)
            google.script.run.editFermentador(vesselToKey(keg),fecha,nota,"Activo",sts,litros,lote,estilo)
          } else {
            google.script.run.savePaso(fecha,keg,"LLENAR KEG",litros,lote,nota,emp,"PLANTA","0","PESOS","EFECTIVO",lote,estilo)
            google.script.run.updKeg(fecha,"B"+key2)
            google.script.run.updKeg(litros,"F"+key2)
            google.script.run.updKeg(estilo,"G"+key2)
            google.script.run.updKeg("LLENADO","J"+key2)
            google.script.run.updKeg(lote,"L"+key2)
          }
          break;
        case "DESACTIVAR FERMENTADOR":
          sts = "INACTIVO"
          break;
        case "REACTIVAR FERMENTADOR":
          sts = "SUCIO"
          break;
      }
      // alert(total)
      if (status == "INACTIVO"){status = "Inactivo"} else {status = "Activo"}
      google.script.run.savePasoV(fecha,fermentador,paso,nota,emp,keg,litros,lote,estilo)
      if (paso == "TRANSFER" && total <= 0){
        google.script.run.editFermentador(key,fecha,nota,status,"VACIADO",total,"SUCIO","")
      } else {
        google.script.run.editFermentador(key,fecha,nota,status,sts,total,lote,estilo)
      }
      document.getElementById("btnPasoScanV").innerHTML = "PASO"
      document.getElementById("txtPasoScanV").value = "PASO"
      document.getElementById("txtNotaScanV").value = ""
      document.getElementById("btnKegSelect").innerHTML = "DESTINO"
      document.getElementById("txtKegSelect").value = ""
      // emp.innerHTML = ""
      cerrarModal('divCantidadScanV');
      // // cerrarModal('divClienteScan');
      // // cerrarModal('divFuenteScanK');
      // // cerrarModal('divCobroScan');
      setTimeout(function(){
        var fermentador = document.getElementById("lblFermentadorTitulo").innerHTML
        popFermentador(vesselToKey(fermentador)); 
        popPasosV(fermentador)
        popFermentadores("Activo")
        refreshAll(false)
      }, 1500);
      setTimeout(function(){
        var fermentador = document.getElementById("lblFermentadorTitulo").innerHTML
        popFermentador(vesselToKey(fermentador)); 
        popPasosV(fermentador)
        // popFermentadores()
        // popb
      }, 2500);
      // setTimeout(function(){
      //   var fermentador = document.getElementById("lblFermentadorTitulo").innerHTML
      //   popFermentador(vesselToKey(fermentador)); 
      //   popPasosV(fermentador)
      //   // popb
      // }, 3500);
      document.getElementById("modalFermentadorScaneado").style.display = "block" 
    }
  }
  function checkAuth(emp){
    emp = empToKey(emp)
    var tablaEmpleados  = document.getElementById("tablaEmpleadosRef")
    // alert(tablaEmpleados.rows.length)
    for (i=0;i<tablaEmpleados.rows.length;i++){
      var empleadoTabla = tablaEmpleados.rows[i].cells[0].innerHTML
      // alert(empleadoTabla)
      var key = tablaEmpleados.rows[i].cells[2].innerHTML
      // alert(empleadoTabla)
      if (empleadoTabla == emp){
        // alert(key)
        return key
      }
    }
  }
  function checkEmpleado(emp){
    emp = empToKey(emp)
    var tablaEmpleados  = document.getElementById("tablaEmpleadosRef")
    // alert(tablaEmpleados.rows.length)
    for (i=0;i<tablaEmpleados.rows.length;i++){
      var empleadoTabla = tablaEmpleados.rows[i].cells[0].innerHTML
      // alert(empleadoTabla)
      var key = tablaEmpleados.rows[i].cells[1].innerHTML
      // alert(empleadoTabla)
      if (empleadoTabla == emp){
        // alert(key)
        return key
      }
    }
  }
  
  function getPasos(){
    refreshAll(true)
    setTimeout(function(){
      var paka = document.getElementById("lblKegTitulo")
      popPasos(paka.innerHTML)
      refreshAll(false)
    }, 2500);
    setTimeout(function(){
      var pakaScan = document.getElementById("modalKegscanCont")
      pakaScan.scrollIntoView({ behavior: 'smooth', block: 'end', inline: 'start' })
      pakaScan.scrollBy(0,300)
    }, 3000);
  }
  function initPasos(){
    setTimeout(function(){
      var paka = document.getElementById("lblKegTitulo")
      // popPasos(paka.innerHTML)
    }, 100);
  }
  function initKeg(keg){
    // alert(keg) 
      document.getElementById("lblKegTitulo").innerHTML = keg
      setTimeout(function(){
        var keg = document.getElementById("lblKegTitulo").innerHTML
        // alert(keg)
        popPasos(keg)
        keg = kegToKey(keg)
        // alert(keg)
        popKeg(keg)
      }, 1200);
  }
  function initEmp(emp){
    // alert(paka) 
      document.getElementById("lblEmpleadoTitulo").innerHTML = keyToEmp(emp)
      setTimeout(function(){
        var emp = document.getElementById("lblEmpleadoTitulo").innerHTML
        // alert(emp)
        popPasosEmp(emp)
        // alert(emp)
        popEmpleado(emp)
      }, 100);
  }
  function initEmpleado(emp){
    // alert(paka) 
      setTimeout(function(){

        popPasosEmp(emp)
        // paka = paka.replace("PAKA","")
        // paka = parseInt(paka)
        // popKeg(paka)
      }, 100);
  }
  function abrirModal(mod){
    var modal = document.getElementById(mod);
    modal.style.display = "";
  }
  function cerrarModal(mod){
    var modal = document.getElementById(mod);
    modal.style.display = "none";
  }
  function closeAll(){
    cerrarModal("divHome");
    cerrarModal("divScanner");
    cerrarModal("modalKegs");
    cerrarModal("modalCrearQR");
    cerrarModal("modalFermentadores");
    // cerrarModal("modal")
  }
  function closeMenuBtn(tbl){
    // alert(tbl)
    var display = document.getElementById(tbl).style.display
    // alert(display)
    if (display == "none"){
      // alert(tbl)
      // display = "block"
      // document.getElementById(tbl).setAttribute("style","display:block")
      abrirModal(tbl)
      // display = ""
      // alert(display)
    } else {
      cerrarModal(tbl)
    }
  }
  function closeMenuBtnD(tbl,tbl2){
    // alert(tbl)
    var display = document.getElementById(tbl).style.display
    var display2 = document.getElementById(tbl2).style.display
    if (display == "none"){
      abrirModal(tbl)
    } else {
      cerrarModal(tbl)
    }
    if (display2 == "none"){
      abrirModal(tbl2)
    } else {
      cerrarModal(tbl2)
    }
  }
  function setDropdown(id,id2,lbl){
    document.getElementById(id).innerHTML = lbl
    document.getElementById(id2).value = lbl
    document.getElementById(id).setAttribute("class","w3-button")
  }
  function setColor(id,id2,lbl){
    // document.getElementById(id).innerHTML = lbl
    document.getElementById(id2).value = lbl
    document.getElementById(id).setAttribute("style","font-size:16px;letter-spacing:1px;color:white;font-weight:bold;width:50px;background-color:"+lbl)
    document.getElementById(id).setAttribute("class","w3-button material-icons")
  }
  function orita(txt) {
    var datee = new Date();
    var parseFecha = Date.parse(datee)
    document.getElementById(txt).value = parseFecha;
  }
  function refreshAll(status){
    var bloque = document.getElementById("bloque")
    var todo = document.getElementById("todo")
    if (status == true){
      // abrirModal("bloque");
      abrirModal("refshSpin");
      // todo.setAttribute('style','filter: blur(8px);-webkit-filter: blur(8px);margin:0;padding-top:105px;');
    } else {
      // cerrarModal("bloque")
      cerrarModal("refshSpin")
      // todo.setAttribute('style','filter: blur(0px);-webkit-filter: blur(0px);margin:0;padding-top:105px;');
    }
  }
  function printDiv(id) {
    var printContents = document.getElementById(id).innerHTML;
    var originalContents = document.body.innerHTML;
    document.body.innerHTML = printContents;
    window.print();
    document.body.innerHTML = originalContents;  
  }
  function lotToKey(lot){
    lot = lot.replace("LOTE","")
    lot = parseInt(lot)
    return lot
  }
  function keyToLot(key){
    var code =  "LOTE"
    switch(key.toString().length) {
      case 1:
        code = "00" + key
        break;
      case 2:
        code = "0" + key.toString()
        break;
      case 3:
        code = "" + key
        break;
      case 4:
        code = "" + key
        break;
      case 5:
        code = "" + key
        break;
      case 6:
        code = key
        break;
    }  
    code = "LOTE" + code
    return code
  }
  function kegToKey(keg){
    keg = keg.replace("KEG","")
    keg = parseInt(keg)
    return keg
  }
  function keyToKeg(key){
    var code =  "KEG"
    switch(key.toString().length) {
      case 1:
        code = "00" + key
        break;
      case 2:
        code = "0" + key.toString()
        break;
      case 3:
        code = "" + key
        break;
      case 4:
        code = "" + key
        break;
      case 5:
        code = "" + key
        break;
      case 6:
        code = key
        break;
    }  
    code = "KEG" + code
    return code
  }
  function vesselToKey(fermentador){
    if (fermentador.includes("FV")){
      fermentador = fermentador.replace("FV","")
    } else {
      fermentador = fermentador.replace("BT","")
    }
    fermentador = parseInt(fermentador)
    return fermentador
  }
  function keyToVessel(key,vessel){
    var code =  ""
    // alert(vessel)
    switch(key.toString().length) {
      case 1:
        code = "00" + key.toString()
        break;
      case 2:
        code = "0" + key.toString()
        break;
      case 3:
        code = "" + key
        break;
      case 4:
        code = "" + key
        break;
      case 5:
        code = "" + key
        break;
      case 6:
        code = key
        break;
    }  
    code = vessel + code
    // alert(code)
    return code
  }
  function keyToEmp(key){
    var code =  ""
    switch(key.toString().length) {
      case 1:
        code = "00" + key
        break;
      case 2:
        code = "0" + key
        break;
      case 3:
        code = key
        break;
    }  
    code = "EMP" + code
    return code
  }
  function empToKey(emp){
    emp = emp.replace("EMP","")
    emp = parseInt(emp)
    return emp
  }
  function reactivatePaka(){
    // document.getElementById("modalPakaEdit").style.display="none"
    document.getElementById("modalReactivarPaka").style.display="block"
    
  }
  function eliminarPaka(){
    // document.getElementById("modalPakaEdit").style.display="none"
    document.getElementById("modalBorrarPaka").style.display="block"
    
  }
  function eliminarEmpleado(){
    // document.getElementById("modalPakaEdit").style.display="none"
    document.getElementById("modalBorrarEmpleado").style.display="block"
    
  }
  function finarPaka(){
    // document.getElementById("modalPakaEdit").style.display="none"
    document.getElementById("modalTerminarPaka").style.display="block"
    
  }
  function initStats(){
    refreshAll(true)
    document.getElementById("modalStats").style.display = "block"
    popPasosRef()
    setDtps("hoy")
    setTimeout(function(){
      getStats()
    }, 100);
    setTimeout(function(){
      refreshAll(false)
    }, 1100);
    // setFechas(hoy())
  }
  function saveQR(){
    // alert("")
    html2canvas(document.getElementById("divQRprint"), {
      onrendered: function(canvas) {
        // document.body.appendChild(canvas);
        return Canvas2Image.saveAsPNG(canvas);
      }
    });
  }
  function beep() {
    var snd = new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=");  
    snd.play();
  }
  function setInicioStats(){
    var fecha = document.getElementById("dtpInicioStats").value
    var d = new Date(fecha)
    d = Date.parse(d)
    document.getElementById("dtpInicioStats").innerHTML = d 
  }
  function setFinStats(){
    var fecha = document.getElementById("dtpFinStats").value
    var d = new Date(fecha)
    d = Date.parse(d)
    document.getElementById("dtpFinStats").innerHTML = d
  }
  function filterStats(){
    // alert('')
    var strTurno = document.getElementById("lblTurnoStats").innerHTML
    // alert(strTurno)
    var strEmpleado = document.getElementById("lblEmpleadoStats").innerHTML
    var strMaterial = document.getElementById("lblMaterialStats").innerHTML
    var strColor = document.getElementById("lblColorStats").innerHTML
    var tabla = document.getElementById("tablaStats")
    var tablaTemp = document.getElementById("tablaStatsTemp")
    tablaTemp.innerHTML=""
    // if (strEmpleado.toString() != ""){
      // alert(tabla)
    var arrTurno = strTurno.split(",")
    var arrEmpleado = strEmpleado.split(",")
    var arrMaterial = strMaterial.split(",")
    var arrColor = strColor.split(",")
    var pakasProcesadas = 0;
    var primerTurnoCont = 0
    var primerTurnoScrapCont = 0
    var segundoTurnoCont = 0
    var segundoTurnoScrapCont = 0
    var tercerTurnoCont = 0
    var tercerTurnoScrapCont = 0
    var primerTurnoPeso = 0
    var primerTurnoScrapPeso = 0
    var segundoTurnoPeso = 0
    var segundoTurnoScrapCont = 0
    var segundoTurnoScrapPeso = 0
    var tercerTurnoPeso = 0
    var tercerTurnoScrapPeso = 0
    var tercerTurnoScrapCont = 0
    document.getElementById("lblPakasProcesadas").innerHTML = 0
    document.getElementById("lblPesoProcesadas").innerHTML = 0
    document.getElementById("lblScrapProcesadas").innerHTML = 0
    document.getElementById("lblPrimerTurnoCont").innerHTML = 0
    document.getElementById("lblPrimerTurnoPeso").innerHTML = 0
    document.getElementById("lblPrimerTurnoScrapCont").innerHTML = 0
    document.getElementById("lblPrimerTurnoScrapPeso").innerHTML = 0
    document.getElementById("lblSegundoTurnoCont").innerHTML = 0
    document.getElementById("lblSegundoTurnoPeso").innerHTML = 0
    document.getElementById("lblSegundoTurnoScrapCont").innerHTML = 0
    document.getElementById("lblSegundoTurnoScrapPeso").innerHTML = 0
    document.getElementById("lblTercerTurnoCont").innerHTML = 0
    document.getElementById("lblTercerTurnoPeso").innerHTML = 0
    document.getElementById("lblTercerTurnoScrapCont").innerHTML = 0
    document.getElementById("lblTercerTurnoScrapPeso").innerHTML = 0
    for (var i = 1;i < tabla.rows.length+1; i ++){
      var turno = tabla.rows[i].cells[6].innerHTML
      var empleado = tabla.rows[i].cells[5].innerHTML
      var material = tabla.rows[i].cells[4].innerHTML
      var color = tabla.rows[i].cells[7].innerHTML
      var peso = parseInt(tabla.rows[i].cells[3].innerHTML)
      var paso = tabla.rows[i].cells[2].innerHTML
      // alert(paso)
      if (strTurno.toString() == "" && strEmpleado.toString() == "" && strMaterial.toString() == "" && strColor.toString() == ""){ // temc
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
      } else if (strTurno.toString() != "" && strEmpleado.toString() == "" && strMaterial.toString() == "" && strColor.toString() == ""){ //emc
        if (arrTurno.indexOf(turno)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() != "" && strMaterial.toString() == "" && strColor.toString() == ""){ //tmc
        if (arrEmpleado.indexOf(empleado)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() == "" && strMaterial.toString() != "" && strColor.toString() == ""){ //tec
        if (arrMaterial.indexOf(material)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() == "" && strMaterial.toString() == "" && strColor.toString() != ""){ //tem
        if (arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() != "" && strEmpleado.toString() != "" && strMaterial.toString() == "" && strColor.toString() == ""){ //mc
        if (arrTurno.indexOf(turno)>-1 && arrEmpleado.indexOf(empleado)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() != "" && strEmpleado.toString() == "" && strMaterial.toString() != "" && strColor.toString() == ""){ //ec
      // alert(strTurno.toString())  
        if (arrTurno.indexOf(turno)>-1 && arrMaterial.indexOf(material)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() != "" && strEmpleado.toString() == "" && strMaterial.toString() == "" && strColor.toString() != ""){ //em
      // alert(strTurno.toString())  
        if (arrTurno.indexOf(turno)>-1 && arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() != "" && strMaterial.toString() != "" && strColor.toString() == ""){ //tc
      // alert(strTurno.toString())  
        if (arrEmpleado.indexOf(empleado)>-1 && arrMaterial.indexOf(material)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() != "" && strMaterial.toString() == "" && strColor.toString() != ""){ //tm
      // alert(strTurno.toString())  
        if (arrEmpleado.indexOf(empleado)>-1 && arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() == "" && strMaterial.toString() != "" && strColor.toString() != ""){ //te
      // alert(strTurno.toString())  
        if (arrMaterial.indexOf(material)>-1 && arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() == "" && strEmpleado.toString() != "" && strMaterial.toString() != "" && strColor.toString() != ""){ //t
      // alert(strTurno.toString())  
        if (arrMaterial.indexOf(material)>-1 && arrEmpleado.indexOf(empleado)>-1 && arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() != "" && strEmpleado.toString() == "" && strMaterial.toString() != "" && strColor.toString() != ""){ //e
      // alert(strTurno.toString())  
        if (arrTurno.indexOf(turno)>-1 && arrMaterial.indexOf(material)>-1 && arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() != "" && strEmpleado.toString() != "" && strMaterial.toString() == "" && strColor.toString() != ""){ //m
      // alert(strTurno.toString())  
        if (arrTurno.indexOf(turno)>-1 && arrEmpleado.indexOf(empleado)>-1 && arrColor.indexOf(color)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      } else if (strTurno.toString() != "" && strEmpleado.toString() != "" && strMaterial.toString() != "" && strColor.toString() == ""){ //c
      // alert(strTurno.toString())  
        if (arrTurno.indexOf(turno)>-1 && arrEmpleado.indexOf(empleado)>-1 && arrMaterial.indexOf(material)>-1){
          tabla.rows[i].style.display = ""
          sumaContStats(turno,paso,peso,color)
        } else {
          tabla.rows[i].style.display = "none"
        }
      }
    }
    // alert(tablaStatsTemp.innerHTML)
  }
  function popEmpleadoFiltro(){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-zGHeNPOyt-4umBS7RIB-pl1IqLTvtPacaI411rf0dE/edit#gid=0')
    var queryf = "SELECT H,count(H) GROUP BY H"
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var table = ""
      // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var empleado = data.getValue(i, 0)
        if (empleado==null){empleado="";}
        var table = table + "<tr style='cursor:pointer;background-color:white;'>"+
                                                  "<td style='padding-left:10px'><input name='chkEmpleado"+i+"' type='checkbox' class='w3-input' value='"+empleado+"' style='padding-left:10px' id='chkEmpleado"+i+"'></td>"+
                                                  "<td style='padding:10px' for='chkempleado"+i+"' style='padding-left:10px'>"+empleado+"</td>"+"<td style='display:none'>"+i+"</td></tr>" 
      }    
                    // <tr style="background-color:white;">
                    //   <td style="padding-left:10px">
                    //     <input id="lbl2doStats" type="checkbox" class="w3-input" style="padding-left:10px;" value="2DO TURNO" onclick="saveChkStats('lbl2doStats','lblTurnoStats')">
                    //   </td>
                    //   <td style="padding:10px;">
                    //     <label onclick="checarChk('lbl2doStats','lblTurnoStats')">2DO TURNO</label>
                    //   </td>  
                    // </tr>
      var tabla = document.getElementById("divEmpleadoStats")
      tabla.innerHTML = ""
      tabla.innerHTML = table
      tabla.onclick = function(e) {
        e = e || window.event;
        var seleccion = [];
        var target = e.srcElement || e.target;
        var targetInicial = target
        while (target && target.nodeName !== "TR") {
          target = target.parentNode;
        }
        if (target) {
          var cells = target.getElementsByTagName("td");
          for (var i = 0; i < cells.length; i++) {
            seleccion.push(cells[i].innerHTML);
          }
        }
        if (seleccion[0].length>0){
          // alert(targetInicial.innerHTML)
          var metodo = seleccion[1]
          var key = seleccion[2]
          // alert(seleccion[1])
          if (cells[0].children[0].checked && targetInicial.innerHTML == metodo){
            cells[0].children[0].checked = false
          } else if (cells[0].children[0].checked == false && targetInicial.innerHTML == metodo){
            cells[0].children[0].checked = true
          } else {
          }
          // alert('')
          // saveChkStats(cells[0].children[0],"lblEmpleadoStats")
          saveChkStats("chkEmpleado"+key,"lblEmpleadoStats")
        }
        // getPagosCorte();
      };
    });
  }
  function saveChkStats(chk,lbl){
    // alert(chk.innerHTML)
    chk = document.getElementById(chk)
    // alert(chk.innerHTML)
    var str = document.getElementById(lbl).innerHTML
    if (chk.checked){

    }
    if (str == null){
      var arr
      arr.push(chk.value)
    } else{
      var arr = str.split(",");
      if (chk.checked==true){
        arr.push(chk.value)
      } else {
        var index = arr.indexOf(chk.value)
        arr.splice(index, 1)
      }

      getStats()
    }
    var index = arr.indexOf(chk.value.toString())
    // alert(index)
    document.getElementById(lbl).innerHTML = arr.toString()
  }
  function checarChk(chk,lbl){  
    var  check = document.getElementById(chk)
    if (check.checked){
      check.checked=false
    } else {
      check.checked=true
    }
    saveChkStats(chk,lbl)
  }



  function getStats(){
    refreshAll(true)
    var start = document.getElementById("dtpInicioStats").value
    var finish = document.getElementById("dtpFinStats").value
    var inicio = Date.parse(start)
    var fin = Date.parse(finish)
    fin = fin + (86400000) 
    // inicio = inicio + (3600000*7)
    // alert(new Date(start))
    var fechaN = new Date(inicio)
    var fini = new Date(fin)
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1-zGHeNPOyt-4umBS7RIB-pl1IqLTvtPacaI411rf0dE/edit#gid=0')
    var queryf = "SELECT A,B,C,D,E,F,G,H,I,J WHERE I = 'Activo' AND B > "+inicio+" AND B <= "+fin+" AND D = 'REGISTRAR KG' OR " +
                                                "I = 'Activo' AND B > "+inicio+" AND B <= "+fin+" AND D = 'REGISTRAR SCRAP' OR " +
                                                "I = 'Activo' AND B > "+inicio+" AND B <= "+fin+" AND D = 'TERMINAR PAKA'" 
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      var tabla = document.getElementById('tablaStats')
      var table = "<tr><th>FECHA</th><th>PAKA</th><th>PASO</th><th>PESO</th><th>MATERIAL</th><th>EMPLEADO</th><th>TURNO</th><th>NOTA</th></tr>";
      var index,fechaF;
      var total = 0;
      var prods = 0;
      var procs = 0;
      var procsR = 0;
      var prodsCont = 0;
      var procsCont = 0;
      var procsContR = 0;
      var pakasProcesadas = 0;
      var primerTurnoCont = 0
      var primerTurnoScrapCont = 0
      var segundoTurnoCont = 0
      var segundoTurnoScrapCont = 0
      var tercerTurnoCont = 0
      var tercerTurnoScrapCont = 0
      var primerTurnoPeso = 0
      var primerTurnoScrapPeso = 0
      var segundoTurnoPeso = 0
      var segundoTurnoScrapCont = 0
      var segundoTurnoScrapPeso = 0
      var tercerTurnoPeso = 0
      var tercerTurnoScrapPeso = 0
      var tercerTurnoScrapCont = 0
      
      var turno;
      // alert(tablaPreal.innerHTML)
      data.sort({column: 2, desc: true});
  // alert(data.getNumberOfRows())
      for (var i=0; i<data.getNumberOfRows(); i++){
        var fechaF = parseInt(data.getValue(i, 1))
        var paka = data.getValue(i, 2)
        var paso = data.getValue(i, 3)
        var peso = data.getValue(i, 4)
        var material = data.getValue(i, 5)
        var nota = data.getValue(i, 6)
        var empleado = data.getValue(i, 7)
        var status = data.getValue(i, 8)
        var color = data.getValue(i, 9)
        var hora = new Date(fechaF).getHours()
        // alert(turno)
        // if (paso=="TERMINAR PAKA" || paso=="REGISTAR KG" || paso=="REGISTAR SCRAP"){
          pakasProcesadas++;
          switch(hora){
            case 1:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 2:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 3:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 4:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 5:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 6:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 7:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
            case 8:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 9:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 10:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 11:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 12:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 13:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 14:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 15:
              turno = "1ER TURNO"
              primerTurnoCont++;
              primerTurnoPeso = primerTurnoPeso + peso
              break;
            case 16:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 17:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 18:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 19:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 20:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 21:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 22:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 23:
              turno = "2DO TURNO"
              segundoTurnoCont++;
              segundoTurnoPeso = segundoTurnoPeso + peso
              break;
            case 0:
              turno = "3ER TURNO"
              tercerTurnoCont++;
              tercerTurnoPeso = tercerTurnoPeso + peso
              break;
          }
          var table = table + "<tr><td>" + formatoFechaIni(fechaF) + "</td><td>" + 
                                      paka + "</td><td>" + 
                                      paso + "</td><td>" + 
                                      peso + "</td><td>" + 
                                      material + "</td><td>" + 
                                      empleado + "</td><td>" + 
                                      turno + "</td><td>" + 
                                      color + "</td><td>" + 
                                      nota + "</td></tr>"  
        // }
      }  
      // document.getElementById("lblPakasProcesadas").innerHTML = pakasProcesadas
      // document.getElementById("lblPesoProcesadas").innerHTML = primerTurnoPeso + segundoTurnoPeso + tercerTurnoPeso
      // document.getElementById("lblScrapProcesadas").innerHTML = primerTurnoScrapPeso + segundoTurnoScrapPeso + tercerTurnoScrapPeso
      // document.getElementById("lblPrimerTurnoCont").innerHTML = primerTurnoCont
      // document.getElementById("lblPrimerTurnoPeso").innerHTML = primerTurnoPeso
      // document.getElementById("lblPrimerTurnoScrapCont").innerHTML = primerTurnoScrapCont
      // document.getElementById("lblPrimerTurnoScrapPeso").innerHTML = primerTurnoScrapPeso
      // document.getElementById("lblSegundoTurnoCont").innerHTML = segundoTurnoCont
      // document.getElementById("lblSegundoTurnoPeso").innerHTML = segundoTurnoPeso
      // document.getElementById("lblSegundoTurnoScrapCont").innerHTML = segundoTurnoScrapCont
      // document.getElementById("lblSegundoTurnoScrapPeso").innerHTML = segundoTurnoScrapPeso
      // document.getElementById("lblTercerTurnoCont").innerHTML = tercerTurnoCont
      // document.getElementById("lblTercerTurnoPeso").innerHTML = tercerTurnoPeso
      // document.getElementById("lblTercerTurnoScrapCont").innerHTML = tercerTurnoScrapCont
      // document.getElementById("lblTercerTurnoScrapPeso").innerHTML = tercerTurnoScrapPeso
      tabla.innerHTML = table;
      // alert(new Intl.NumberFormat().format(procs))
      // document.getElementById("lblCorteProcedimientos").innerHTML = new Intl.NumberFormat().format(procs)
      // document.getElementById("lblCorteProcedimientosReal").innerHTML = new Intl.NumberFormat().format(procsR)
      // document.getElementById("lblCorteProductos").innerHTML = new Intl.NumberFormat().format(prods)
      // document.getElementById("lblCorteTotal").innerHTML = new Intl.NumberFormat().format(total)
      // document.getElementById("lblCorteProcsCont").innerHTML = procsCont
      // document.getElementById("lblCorteProcsContReal").innerHTML = procsCont
      // document.getElementById("lblCorteProdsCont").innerHTML = prodsCont
      // // alert(table)
      // tabla.setAttribute('class','w3-table-all w3-hoverable w3-scrollable subtitle')
      // tabla.setAttribute('style','cursor:pointer;text-transform:uppercase;font-size:12px')
    });
    setTimeout(function(){
      filterStats();
    }, 1000);
    setTimeout(function(){
      refreshAll(false);
    }, 1500);
  }
  function setDtps(fecha){
    switch(fecha){
      case "hoy":
        var valorInicio = diaHoy()
        var valorFinal = diaHoy()
        document.getElementById("dtpInicioStats").value = valorInicio
        document.getElementById("dtpFinStats").value = valorFinal
        break;
      case "ayer":
        var valorInicio = ayer()
        var valorFinal = ayer()
        document.getElementById("dtpInicioStats").value = valorInicio
        document.getElementById("dtpFinStats").value = valorFinal
        break;
      case "semana":
        var valorInicio = getInicioWeek()
        var valorFinal = getFinWeek()
        document.getElementById("dtpInicioStats").value = valorInicio
        document.getElementById("dtpFinStats").value = valorFinal
        break;
    }
  }
  function diaHoy() {
    var datee = new Date();
    var month = datee.getMonth() + 1; //if (month.length == 1) { month = "0" + month; }
    var day = datee.getDate(); 
    var dia = day.toString()
    var mes = month.toString()
    // alert(mes.length)
    if (dia.length == 1) { dia = "0" + dia; }
    if (mes.length == 1) { mes = "0" + mes }
    var year = datee.getFullYear()
    var fecha = year + "-" + mes + "-" + dia
    return fecha
  }
  function ayer() {
    var datee = new Date();
    var month = datee.getMonth() + 1; //if (month.length == 1) { month = "0" + month; }
    var day = datee.getDate(); 
    var dia = day  - 1
    dia = dia.toString()
    var mes = month.toString()
    // alert(mes.length)
    if (dia.length == 1) { dia = "0" + dia; }
    if (mes.length == 1) { mes = "0" + mes }
    var year = datee.getFullYear()
    var fecha = year + "-" + mes + "-" + dia
    return fecha
  }
  function formatoFechaIni(fecha) {
    var datee = new Date(fecha);
    var ampm;
    var month = datee.getMonth() + 1; //if (month.length == 1) { month = "0" + month; }
    var day = "" + datee.getDate(); if (day.length == 1) { day = "0" + day; }
    var hour = "" + datee.getHours();
    var minute = "" + datee.getMinutes(); if (minute.length == 1) { minute = "0" + minute; }
    var second = "" + datee.getSeconds(); if (second.length == 1) { second = "0" + second; }
      var weekday = new Array(7);
      weekday[0] = "Dom";
      weekday[1] = "Lun";
      weekday[2] = "Mar";
      weekday[3] = "Mie";
      weekday[4] = "Jue";
      weekday[5] = "Vie";
      weekday[6] = "Sab";
      var name = weekday[datee.getDay()];
      var monthn = new Array(12);
      monthn[1] = "Ene";
      monthn[2] = "Feb";
      monthn[3] = "Mar";
      monthn[4] = "Abr";
      monthn[5] = "May";
      monthn[6] = "Jun";
      monthn[7] = "Jul";
      monthn[8] = "Ago";
      monthn[9] = "Sep";
      monthn[10] = "Oct";
      monthn[11] = "Nov";
      monthn[12] = "Dic";

      var mes = monthn[month];

    return  name + "/" + day + "/" + mes + " " + hour + ":" + minute + ":" + second;
  }
  function sumaContStats(turno,paso,peso,color){
    // alert(tabla.rows.length)
    var pakasProcesadas = document.getElementById("lblPakasProcesadas").innerHTML;
    var primerTurnoCont = document.getElementById("lblPrimerTurnoCont").innerHTML
    var primerTurnoScrapCont = document.getElementById("lblPrimerTurnoScrapCont").innerHTML

    var segundoTurnoCont = document.getElementById("lblSegundoTurnoCont").innerHTML
    var segundoTurnoScrapCont = document.getElementById("lblSegundoTurnoScrapCont").innerHTML

    var tercerTurnoCont = document.getElementById("lblTercerTurnoCont").innerHTML
    var tercerTurnoScrapCont = document.getElementById("lblTercerTurnoScrapCont").innerHTML

    var primerTurnoPeso = document.getElementById("lblPrimerTurnoPeso").innerHTML
    var primerTurnoScrapPeso = document.getElementById("lblPrimerTurnoScrapPeso").innerHTML

    var segundoTurnoPeso = document.getElementById("lblSegundoTurnoPeso").innerHTML
    var segundoTurnoScrapPeso = document.getElementById("lblSegundoTurnoScrapPeso").innerHTML

    var tercerTurnoPeso = document.getElementById("lblTercerTurnoPeso").innerHTML
    var tercerTurnoScrapPeso = document.getElementById("lblTercerTurnoPeso").innerHTML
    pakasProcesadas++;
    // alert(paso)
    if (paso=="TERMINAR PAKA"){
      switch(turno){
        case "1ER TURNO":
          primerTurnoCont++;
          primerTurnoPeso = parseInt(primerTurnoPeso) + parseInt(peso)
          break;
        case "2DO TURNO":
          segundoTurnoCont++;
          segundoTurnoPeso = parseInt(segundoTurnoPeso) + parseInt(peso)
          break;
        case "3ER TURNO":
          tercerTurnoCont++;
          tercerTurnoPeso = parseInt(tercerTurnoPeso) + parseInt(peso)
          break;
      }
    } else if (paso=="REGISTRAR KG"){
      switch(turno){
        case "1ER TURNO":
          primerTurnoCont++;
          primerTurnoPeso = parseInt(primerTurnoPeso) + parseInt(peso)
          break;
        case "2DO TURNO":
          segundoTurnoCont++;
          segundoTurnoPeso = parseInt(segundoTurnoPeso) + parseInt(peso)
          break;
        case "3ER TURNO":
          tercerTurnoCont++;
          tercerTurnoPeso = parseInt(tercerTurnoPeso) + parseInt(peso)
          break;
      }
    } else if (paso=="REGISTRAR SCRAP"){
      switch(turno){
        case "1ER TURNO":
          primerTurnoScrapCont++;
          primerTurnoScrapPeso = parseInt(primerTurnoScrapPeso) + parseInt(peso)
          break;
        case "2DO TURNO":
          segundoTurnoScrapCont++;
          segundoTurnoScrapPeso = parseInt(segundoTurnoScrapPeso) + parseInt(peso)
          break;
        case "3ER TURNO":
          tercerTurnoScrapCont++;
          // alert(peso)
          tercerTurnoScrapPeso = parseInt(tercerTurnoScrapPeso) + parseInt(peso)
          // alert(tercerTurnoScrapPeso)
          break;
      }
    }
    // alert(peso)
    document.getElementById("lblPakasProcesadas").innerHTML = parseInt(primerTurnoCont) + parseInt(segundoTurnoCont) + parseInt(tercerTurnoCont)
    document.getElementById("lblPesoProcesadas").innerHTML = parseInt(primerTurnoPeso) + parseInt(segundoTurnoPeso) + parseInt(tercerTurnoPeso)
    document.getElementById("lblScrapProcesadas").innerHTML = parseInt(primerTurnoScrapPeso) + parseInt(segundoTurnoScrapPeso) + parseInt(tercerTurnoScrapPeso)
    document.getElementById("lblPrimerTurnoCont").innerHTML = primerTurnoCont
    document.getElementById("lblPrimerTurnoPeso").innerHTML = primerTurnoPeso
    document.getElementById("lblPrimerTurnoScrapCont").innerHTML = primerTurnoScrapCont
    document.getElementById("lblPrimerTurnoScrapPeso").innerHTML = primerTurnoScrapPeso
    document.getElementById("lblSegundoTurnoCont").innerHTML = segundoTurnoCont
    document.getElementById("lblSegundoTurnoPeso").innerHTML = segundoTurnoPeso
    document.getElementById("lblSegundoTurnoScrapCont").innerHTML = segundoTurnoScrapCont
    document.getElementById("lblSegundoTurnoScrapPeso").innerHTML = segundoTurnoScrapPeso
    document.getElementById("lblTercerTurnoCont").innerHTML = tercerTurnoCont
    document.getElementById("lblTercerTurnoPeso").innerHTML = tercerTurnoPeso
    document.getElementById("lblTercerTurnoScrapCont").innerHTML = tercerTurnoScrapCont
    // alert(tercerTurnoScrapPeso)
    document.getElementById("lblTercerTurnoScrapPeso").innerHTML = tercerTurnoScrapPeso
    // tabla.innerHTML = table;
  }
  function getInicioWeek(){
    var d = new Date()
    var numDia = d.getDay();
    switch(numDia){
      case 0:
        d.setDate(d.getDate() - 6);
        break;
      case 1:
        d.setDate(d.getDate());
        break;
      case 2:
        d.setDate(d.getDate() - 1);
        break;
      case 3:
        d.setDate(d.getDate() - 2);
        break;
      case 4:
        d.setDate(d.getDate() - 3);
        break;
      case 5:
        d.setDate(d.getDate() - 4);
        break;
      case 6:
        d.setDate(d.getDate() - 5);
        break;
    }
    var parseFecha  = Date.parse(d)
    var year = d.getFullYear();

    var month = (1 + d.getMonth()).toString();
    month = month.length > 1 ? month : '0' + month;

    var day = d.getDate().toString();
    day = day.length > 1 ? day : '0' + day;
    var ano = new Date(parseFecha).getFullYear();
    var fechaFormato = year + "-" + month + "-" + day
    // alert(fechaFormato)
      return (fechaFormato)
  }
  function getFinWeek(){
    var d = new Date()
    var numDia = d.getDay();
    // alert(numDia)
    switch(numDia){
      case 0:
        // d.setDate(d.getDate());
        d.setDate(d.getDate());
        break;
      case 1:
        d.setDate(d.getDate() + 6);
        break;
      case 2:
        d.setDate(d.getDate() + 5);
        break;
      case 3:
        d.setDate(d.getDate() + 4);
        break;
      case 4:
        d.setDate(d.getDate() + 3);
        break;
      case 5:
        d.setDate(d.getDate() + 2);
        break;
      case 6:
        d.setDate(d.getDate() + 1);
        break;
    }
    var parseFecha  = Date.parse(d)
    var year = d.getFullYear();

    var month = (1 + d.getMonth()).toString();
    month = month.length > 1 ? month : '0' + month;

    var day = d.getDate().toString();
    day = day.length > 1 ? day : '0' + day;
    var ano = new Date(parseFecha).getFullYear();
    var fechaFormato = year + "-" + month + "-" + day
      return (fechaFormato)
  }
  function setPeriodo(){
    // alert('')
    document.getElementById("chkPeriodoStats").click()
  }
  function closePasoKeg(paso){
    var range = "I"+paso
    // alert(range)
    google.script.run.updPasosKeg("Cancelado",range)
    // alert(paka)
    refreshAll(true)
    setTimeout(function(){
      var keg = document.getElementById("lblKegTitulo")
      popPasos(keg.innerHTML)
      refreshAll(false)
    }, 2500);
  }
  function closePasoFermentador(paso){
    var range = "G"+paso
    // alert(range)
    google.script.run.updPasosFermentador("Cancelado",range)
    // alert(paka)
    refreshAll(true)
    setTimeout(function(){
      var fermentador = document.getElementById("lblFermentadorTitulo")
      popPasosV(fermentador.innerHTML)
      refreshAll(false)
    }, 1000);
    setTimeout(function(){
      var fermentador = document.getElementById("lblFermentadorTitulo")
      popPasosV(fermentador.innerHTML)
    }, 1500);
  }
  function hidePasos(){
    closeMenuBtn('divPasoScan');
    cerrarModal('divCantidadScanK');
    cerrarModal('divClienteScan');
    cerrarModal('divFuenteScanK');cerrarModal('divCobroScan');
  }
  function getFuenteKeg(fuente){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1XJjKyHv_U8tBkdxer5EpUL8_EcHk7plyW5M6kYCe9e0/edit?gid=0#gid=0')
    var queryf = "SELECT F,G,L WHERE A = "+kegToKey(fuente)
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      // alert(data.getValue(0, 2))
      document.getElementById("lblFuenteEstilo").innerHTML = data.getValue(0, 1)
      document.getElementById("lblFuenteLote").innerHTML = data.getValue(0, 2)
      document.getElementById("lblFuenteLitros").innerHTML = data.getValue(0, 0) + " L"
    });
  }
  function getFuenteVessel(fuente){
    var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1gI7FaJxPMtfHrIqfZL3KS6Ursc3RxbjzUbz9hI5wpQw/edit?gid=0#gid=0')
    var categoria
    if (fuente.includes("FV")){
      categoria = "FV"
    } else {
      categoria = "BT"
    }
    fuente = vesselToKey(fuente)
    // alert(fuente)
    var queryf = "SELECT F,I,K WHERE A = "+fuente
    query.setQuery(queryf);
    query.send(function(response){
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      var data = response.getDataTable();
      // alert(data.getValue(0, 2))
      document.getElementById("lblFuenteEstilo").innerHTML = data.getValue(0, 2)
      document.getElementById("lblFuenteLote").innerHTML = data.getValue(0, 1)
      document.getElementById("lblFuenteLitros").innerHTML = data.getValue(0, 0) + " L"
    });
  }
  function formatCurrency(valor){
    var mmll,cmll,dmll,mll,dm,m,c,d,u,final,txt
    txt = valor.toString()
    if (txt.includes(",")){
      txt = txt.replace(",","")
    }
    if (txt.includes("'")){
      txt = txt.replace("'","")
    }
    txt = txt.replace(/\D/g,'')
    switch (txt.length){
      case 0:
        final = "0"
        break
      case 1:
        final = parseInt(txt)
        break
      case 2:
        final = parseInt(txt)
        break
      case 3:
        final = parseInt(txt)
        break
      case 4:
      // alert(valor.length)
        m = txt.charAt(0)
        c = txt.charAt(1)
        d = txt.charAt(2)
        u = txt.charAt(3)
        final = m+","+c+d+u
        break
      case 5:
        dm = txt.charAt(0)
        m = txt.charAt(1)
        c = txt.charAt(2)
        d = txt.charAt(3)
        u = txt.charAt(4)
        final = dm+m+","+c+d+u
        break
      case 6:
        cm = txt.charAt(0)
        dm = txt.charAt(1)
        m = txt.charAt(2)
        c = txt.charAt(3)
        d = txt.charAt(4)
        u = txt.charAt(5)
        final = cm+dm+m+","+c+d+u
        break
      case 7:
        mll = txt.charAt(0)
        cm = txt.charAt(1)
        dm = txt.charAt(2)
        m = txt.charAt(3)
        c = txt.charAt(4)
        d = txt.charAt(5)
        u = txt.charAt(6)
        final = mll+"'"+cm+dm+m+","+c+d+u
        break
      case 8:
        dmll = txt.charAt(0)
        mll = txt.charAt(1)
        cm = txt.charAt(2)
        dm = txt.charAt(3)
        m = txt.charAt(4)
        c = txt.charAt(5)
        d = txt.charAt(6)
        u = txt.charAt(7)
        final = dmll+mll+"'"+cm+dm+m+","+c+d+u
        break
      case 9:
        cmll = txt.charAt(0)
        dmll = txt.charAt(1)
        mll = txt.charAt(2)
        cm = txt.charAt(3)
        dm = txt.charAt(4)
        m = txt.charAt(5)
        c = txt.charAt(6)
        d = txt.charAt(7)
        u = txt.charAt(8)
        final = cmll+dmll+mll+"'"+cm+dm+m+","+c+d+u
        break
      default:
        final = txt
        break
    }
    // document.getElementById("txtCobroScan").value = final
    // alert(final)
    return final
  }

// var result = document.fullscreenEnabled;
// var elem = document.requestFullscreen();
// alert(elem)
var elem = document.getElementById("cuerpo");

/* View in fullscreen */
function openFullscreen() {
  if (elem.requestFullscreen) {
    alert(elem.fullscreenEnabled)
    elem.requestFullscreen();
  } else if (elem.webkitRequestFullscreen) { /* Safari */
    elem.webkitRequestFullscreen();
  } else if (elem.msRequestFullscreen) { /* IE11 */
    elem.msRequestFullscreen();
  }
}

/* Close fullscreen */
function closeFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.webkitExitFullscreen) { /* Safari */
    document.webkitExitFullscreen();
  } else if (document.msExitFullscreen) { /* IE11 */
    document.msExitFullscreen();
  }
}
function toggleFullscreen() {
  // alert('')
  abrirModal("closeFSbtn")
  document.documentElement.requestFullscreen();
}
function fs_status() {
    if (document.fullscreenElement || document.webkitFullscreenElement ||
        document.mozFullScreenElement)
            return 1;
    else
            return -1;
}
function filtrarTabla(filtro,tabla) {
    
    var input, filter, found, table, tr, td, i, j;
//alert(filtro)
    input = document.getElementById(filtro);
    filter = input.value.toUpperCase();
    table = document.getElementById(tabla);
    tr = table.getElementsByTagName("tr");
  //  if (filter.length==0){
  //    table.setAttribute('style','cursor:pointer;display:none;');
  //  } else {
  //    table.setAttribute('style','cursor:pointer;');
  //  }
  //   table.setAttribute('class','w3-table-all w3-hoverable')
//        alert(document.getElementById('conten').offsetHeight);
    filter = filter.replace("Á","A")
    filter = filter.replace("É","E")
    filter = filter.replace("Í","I")
    filter = filter.replace("Ó","O")
    filter = filter.replace("Ú","U")
    filter = filter.replace("á","A")
    filter = filter.replace("é","E")
    filter = filter.replace("í","I")
    filter = filter.replace("ó","O")
    filter = filter.replace("ú","U")
    // alert(filter)
    var valorTabla = "";
    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td");
        for (j = 0; j < td.length; j++) {
          valorTabla = td[j].innerHTML
          valorTabla = valorTabla.replace("Á","A")
          valorTabla = valorTabla.replace("É","E")
          valorTabla = valorTabla.replace("Í","I")
          valorTabla = valorTabla.replace("Ó","O")
          valorTabla = valorTabla.replace("Ú","U")
          valorTabla = valorTabla.replace("á","A")
          valorTabla = valorTabla.replace("é","E")
          valorTabla = valorTabla.replace("í","I")
          valorTabla = valorTabla.replace("ó","O")
          valorTabla = valorTabla.replace("ú","U")
          // valorTabla = valorTabla.replace(" ","")
          // alert(valorTabla)
            if (valorTabla.toUpperCase().indexOf(filter) > -1) {
              found = true;
            }
        }
        if (found) {
            tr[i].style.display = "";
            // tr[i].className = tr[i].className.replace(" w3-show", "");
            found = false;
        } else {
            tr[i].style.display = "none";
//            document.getElementById("txtNombre").value="";
        }
    }
//    alert('')
}
function getRecetas(){
  var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1AWD13X2Z-EgVGKFfD7faKk_sVtsvf3kuLEcHmXX73JM/edit#gid=0')
  var queryf = "SELECT A,B,C"
  query.setQuery(queryf);
  query.send(function(response){
    if (response.isError()) {
      alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
      return;
    }
    var data = response.getDataTable();
//    data.sort({column: 4, desc: true});
    var table = '<tr><th>Fecha</th>'+
                                     '<th>Nombre</th></tr>'
    for (var i=0; i<data.getNumberOfRows(); i++){
      table = table + "<table><tr style='cursor:pointer;'><td style='display:none;'>" + data.getValue(i, 0) + "</td><td>" + 
                                   getFormattedDate(data.getValue(i, 1)) + "</td><td>" + 
                                   data.getValue(i, 2) + "</td></tr></table>"
    }  
    document.getElementById('tabla').innerHTML=table
//    document.getElementById('tabla').setAttribute('style','cursor:pointer;');
    document.getElementById('tabla').onclick = function(e) {
      e = e || window.event;
      var seleccion = [];
      var target = e.srcElement || e.target;
      while (target && target.nodeName !== "TR") {
        target = target.parentNode;
      }
      if (target) {
        
        var cells = target.getElementsByTagName("td");
        for (var i = 0; i < cells.length; i++) {
          seleccion.push(cells[i].innerHTML);
        }
      }
      if (seleccion[0].length>0){
//        document.getElementById('lblOrden').innerHTML = seleccion[0];
//        document.getElementById('lblModelo').innerHTML = seleccion[1];
//          abrirModal("modalReqWO");
      }
    };
  });
  abrirModal("modalCont")
}
function getTablaKitt(status){
  popTablaKitt(status);
  document.getElementById('wo').value="";
  setTimeout(function(){
    abrirModal("modalCont")
  }, 2000);
}
function setBoilTimer(){
    var x = setInterval(function() {
      if (document.getElementById("lblBoilTimout").innerHTML == "off"){clearInterval(x);}
      var valorCelda,boil;
        boil = document.getElementById("lblBoilTime").innerHTML
        valorCelda = document.getElementById("lblIBh").innerHTML
        boil = boil * 60000;
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda + boil
        var now = new Date().getTime();
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var days = Math.floor(distance / (1000 * 60 * 60 * 24));
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblBoilTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        } else {
          distance = countDownDate - now;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblBoilTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        }
    }, 1000);
}
function setMashTimer(){
    var x = setInterval(function() {
      if (document.getElementById("lblMashTimeout").innerHTML == "off"){clearInterval(x);}
      if (document.getElementById("lblIDMh").innerHTML == ""){
//        document.getElementById("lblMashTimer").innerHTML = "00:00:00"
        clearInterval(x);
      } else {
        var now = new Date().getTime();
        var valorCelda,boil;
        boil = document.getElementById("lblMashTime").innerHTML
        valorCelda = document.getElementById("lblIDMh").innerHTML
        boil = boil * 60000;
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda + boil
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var days = Math.floor(distance / (1000 * 60 * 60 * 24));
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblMashTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
          } else {
          distance = countDownDate - now;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblMashTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
          }
        }
    }, 1000);
}
function setCASSW(){
    var x = setInterval(function() {
      if (document.getElementById("lblCASTimeout").innerHTML == "off"){clearInterval(x);}
      if (document.getElementById("lblCASh").innerHTML == ""){
        document.getElementById("lblCASTimeout").innerHTML = "00:00:00"
        cerrarModal("divCASTimer");;
        clearInterval(x);
      } else {
        abrirModal("divCASTimer");;
        var valorCelda,boil;
        valorCelda = document.getElementById("lblCASh").innerHTML
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda 
        var now = new Date().getTime();
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblCASTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        }
      }
    }, 1000);
}
function setCAMSW(){
    var x = setInterval(function() {
      if (document.getElementById("lblCAMTimeout").innerHTML == "off"){clearInterval(x);}
      if (document.getElementById("lblCAMh").innerHTML == ""){
        document.getElementById("lblCAMTimeout").innerHTML = "00:00:00"
        cerrarModal("divCAMTimer");
        clearInterval(x);
      } else {
        abrirModal("divCAMTimer");
        var valorCelda,boil;
        valorCelda = document.getElementById("lblCAMh").innerHTML
        // alert(diaHoy()+" "+valorCelda)
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda 
        // alert(valorCelda)
        var now = new Date().getTime();
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblCAMTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        }
      }
    }, 1000);
}
function setVorlauffSW(){
    var x = setInterval(function() {
      if (document.getElementById("lblVorlauffTimeout").innerHTML == "off"){clearInterval(x);}
      if (document.getElementById("lblIDVh").innerHTML == ""){
        document.getElementById("lblVorlauffTimeout").innerHTML = "00:00:00"
        cerrarModal("divVorlauffTimer");;
        clearInterval(x);
      } else {
        abrirModal("divVorlauffTimer");;
        var valorCelda,boil;
        valorCelda = document.getElementById("lblIDVh").innerHTML
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda 
        var now = new Date().getTime();
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblVorlauffTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        }
      }
    }, 1000);
}
function setCABSW(){
    var x = setInterval(function() {
      if (document.getElementById("lblCABTimeout").innerHTML == "off"){clearInterval(x);}
      if (document.getElementById("lblCABh").innerHTML == ""){
        document.getElementById("lblCABTimeout").innerHTML = "00:00:00"
        cerrarModal("divCABTimer");
        clearInterval(x);
      } else {
        abrirModal("divCABTimer");
        var valorCelda,boil;
        valorCelda = document.getElementById("lblCABh").innerHTML
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda 
        var now = new Date().getTime();
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblCABTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        }
      }
    }, 1000);
}
function setIWSW(){
    var x = setInterval(function() {
      if (document.getElementById("lblIWTimeout").innerHTML == "off"){clearInterval(x);}
      if (document.getElementById("lblIWh").innerHTML == ""){
        document.getElementById("lblIWTimeout").innerHTML = "00:00:00"
        cerrarModal("divIWTimer");
        clearInterval(x);
      } else {
        abrirModal("divIWTimer");
        var valorCelda,boil;
        valorCelda = document.getElementById("lblIWh").innerHTML
        valorCelda = Date.parse(diaHoy()+" "+valorCelda);
        var countDownDate = valorCelda 
        var now = new Date().getTime();
        var distance = countDownDate - now;
        if (distance < 1) {
          distance = now - countDownDate;
          var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          var seconds = Math.floor((distance % (1000 * 60)) / 1000);
          if (hours.toString().length==1){hours="0"+hours;}
          if (minutes.toString().length==1){minutes="0"+minutes;}
          if (seconds.toString().length==1){seconds="0"+seconds;}
          document.getElementById("lblIWTimer").innerHTML = hours + ":" + minutes + ":" + seconds 
        }
      }
    }, 1000);
}
function reloadTimer(){
  var x = setInterval(function() {
    var tiempoTimer = document.getElementById('lblBoilTimer').innerHTML
    var boil = document.getElementById("lblBoilTimer").innerHTML
    boil = boil + 60000;
    var now = new Date().getTime();
    var countDownDate = new Date(diaHoy()+" "+tiempoTimer);
//    alert(countDownDate)
    // Find the distance between now and the count down date
    var distance = countDownDate + boil - now;
//    alert(distance)
    // Time calculations for days, hours, minutes and seconds
//    var days = Math.floor(distance / (1000 * 60 * 60 * 24));
    var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);
      
    // Output the result in an element with id="demo"
    document.getElementById("lblBoilTimer").innerHTML =  hours + ":" + minutes + ":" + seconds;
      
    // If the count down is over, write some text 
//    if (distance < 0) {
//      clearInterval(x);
//      var now = new Date().getTime();
//      var enUnRato = (now + 30000)
//      document.getElementById("lblTiempoTimer").innerHTML = enUnRato;
//      popTablaKitt("pendiente");
//      reloadTimer();
//    }
  }, 1000);
}
function goBackMenu(){
  var caso = document.getElementById('lblMenu').innerHTML
  if (caso == "pendientes"){ 
    woOUT();
    cerrarModal('modalCont');
    popTablaProd();
  } else if (caso == "hxh"){
    cerrarModal('modalCont');
    getHxH();
  }
}
function addReceta(){
    var fecha = Date.parse(ahorita());
    var titulo = document.getElementById('txtTitulo').value 
    var VAD = document.getElementById('txtVADR').value 
    var TAD = document.getElementById('txtTADR').value 
    var PAD = document.getElementById('txtPADR').value 
    var TDM = document.getElementById('txtTDMR').value 
    var TDD = document.getElementById('txtTDDR').value 
    var PDD = document.getElementById('txtPDDR').value 
    var TDV = document.getElementById('txtTDVR').value 
    var VAS = document.getElementById('txtVASR').value 
    var TAS = document.getElementById('txtTASR').value 
    var TDS = document.getElementById('txtTDSR').value 
    var DFR = document.getElementById('txtDFRR').value 
    var TAD = document.getElementById('txtTADR').value 
    var DFR = document.getElementById('txtDFRR').value 
    var DLR = document.getElementById('txtDLRR').value 
    var DAB = document.getElementById('txtDABR').value 
    var VAB = document.getElementById('txtVABR').value 
    var HR1 = document.getElementById('txtHopR1').value 
    var HW1 = document.getElementById('txtHopW1').value 
    var HT1 = document.getElementById('txtHopT1').value 
    var HR2 = document.getElementById('txtHopR2').value 
    var HW2 = document.getElementById('txtHopW2').value 
    var HT2 = document.getElementById('txtHopT2').value 
    var HR3 = document.getElementById('txtHopR3').value 
    var HW3 = document.getElementById('txtHopW3').value 
    var HT3 = document.getElementById('txtHopT3').value 
    var AR1 = document.getElementById('txtAdjR1').value 
    var AW1 = document.getElementById('txtAdjW1').value 
    var AT1 = document.getElementById('txtAdjT1').value 
    var VDT = document.getElementById('txtVDTR').value 
    var TDT = document.getElementById('txtTDTR').value 
    var PDT = document.getElementById('txtPDTR').value 
      google.script.run.appendReceta(fecha,titulo,VAD,TAD,PAD,TDM,TDD,PDD,VAS,TAS,TDS,DFR,TAD,DFR,DLR,DAB,VAB,HR1,HW1,HT1,HR2,HW2,HT2,HR3,HW3,HT3,AR1,AW1,AT1,VDT,TDT,PDT)
//          setTimeout(function(){
//            var orden = document.getElementById('lblOrden').innerHTML 
//            var modelo = document.getElementById('lblModelo').innerHTML 
//            popTablaWO(orden,modelo);
//          popTablaKitt("pendiente");
//          abrirModal('modalCont');
//          }, 2000);
}
function completarPaso(index){
  cerrarModal("modalCont")
  var horita = Date.parse(ahorita());
  google.script.run.finishPedido(horita,index)
  setTimeout(function(){
    popTablaKitt("pendiente");
  }, 1000);
  setTimeout(function(){
    abrirModal("modalCont")
  }, 2000);
}
function cancelarPaso(index){
  cerrarModal("modalCont")
  var horita = Date.parse(ahorita());
  google.script.run.cancelPedido(horita,index)
  setTimeout(function(){
    var status = document.getElementById('lblStatus').innerHTML
    if (status == "pendiente"){
      popTablaKitt("pendiente");
    } else if (status == "completada"){
      popTablaKitt("completada");
    } else if (status == "cancelada"){
      popTablaKitt("cancelada");
    }
  }, 1000);
  setTimeout(function(){
    abrirModal("modalCont")
  }, 2000);
}
function limpiarPedido(index){
  cerrarModal("modalCont")
  google.script.run.cleanPedido(index)
  setTimeout(function(){
    var status = document.getElementById('lblStatus').innerHTML
    if (status == "pendiente"){
      popTablaKitt("pendiente");
    } else if (status == "completada"){
      popTablaKitt("completada");
    } else if (status == "cancelada"){
      popTablaKitt("cancelada");
    }
  }, 1000);
  setTimeout(function(){
    abrirModal("modalCont")
  }, 2000);
}
function convertTemp(valor,label,textbox,meta){
  var lbl = document.getElementById(label).innerHTML
  var goal = document.getElementById(meta).innerHTML
  goal = goal.substring(0,goal.length-2)
  var resultado,meta;
  if (lbl==" C"){
    resultado = (valor * 9 / 5) + 32;
    goal = (goal * 9 / 5) + 32;
//    resultado = resultado / 5;
//    resultado = resultado + 32;
    document.getElementById(textbox).value = resultado.toFixed(1);
    document.getElementById(label).innerHTML = " F";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " F";
  } else {
    resultado = (valor - 32) * .5555555;
    goal = (goal - 32) * .5555555;
    document.getElementById(textbox).value = resultado.toFixed(1);
    document.getElementById(label).innerHTML = " C";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " C";
  }
}
function convertVol(valor,label,textbox,meta){
  var lbl = document.getElementById(label).innerHTML
  var goal = document.getElementById(meta).innerHTML
  goal = goal.substring(0,goal.length-2)
  var resultado;
//  alert(lbl)
  if (lbl==" L"){
    resultado = valor * .264172;
    goal = goal * .264172;
    document.getElementById(textbox).value = resultado.toFixed(1);
    document.getElementById(label).innerHTML = " G";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " G";
  } else {
    resultado = valor * 3.78541;
    goal = goal * 3.78541;
    document.getElementById(textbox).value = Math.round(resultado);
    document.getElementById(label).innerHTML = " L";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " L";
  }
}
function convertDens(valor,label,textbox,meta){
  var lbl = document.getElementById(label).innerHTML
  var goal = document.getElementById(meta).innerHTML
  var resultado;
  if (lbl==" P"){
    goal = goal.substring(0,goal.length-2)
    resultado = 1 + (valor / (258.6 - ((valor / 258.2) * 227.1)))
    goal = 1 + (goal / (258.6 - ((goal / 258.2) * 227.1)))
    document.getElementById(textbox).value = resultado.toFixed(3);
    document.getElementById(label).innerHTML = " sg";
    document.getElementById(meta).innerHTML = goal.toFixed(3) + " sg";
  } else {
    goal = goal.substring(0,goal.length-3)
    resultado = (-616.868) + (1111.14 * valor) - (630.272 * valor * valor) + (135.997 * valor * valor * valor);
    goal = (-616.868) + (1111.14 * goal) - (630.272 * goal * goal) + (135.997 * goal * goal * goal);
    document.getElementById(textbox).value = resultado.toFixed(1);
    document.getElementById(label).innerHTML = " P";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " P";
  }
}
function convertPeso(valor,label,textbox,meta){
  var lbl = document.getElementById(label).innerHTML
  var goal = document.getElementById(meta).innerHTML
  var resultado;
  if (lbl==" gr"){
    goal = goal.substring(0,goal.length-3)
    resultado = valor * 0.035274
    goal = goal * 0.035274
    document.getElementById(textbox).value = resultado.toFixed(1);
    document.getElementById(label).innerHTML = " oz";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " oz";
  } else {
    goal = goal.substring(0,goal.length-3)
    resultado = valor / 0.035274
    goal = goal / 0.035274
    document.getElementById(textbox).value = resultado.toFixed(1);
    document.getElementById(label).innerHTML = " gr";
    document.getElementById(meta).innerHTML = goal.toFixed(1) + " gr";
  }
}
function saveDate(lblDia,lblHora){
  var lbl = document.getElementById(lblHora).innerHTML
  var resultado;
  if (lbl==""){
    document.getElementById(lblHora).setAttribute('style','color: #026440;');
    document.getElementById(lblHora).innerHTML = horaHoy();
  } else {
    document.getElementById(lblDia).innerHTML = "";
    document.getElementById(lblHora).innerHTML = "";
  }
}
function setTimerout(id){
  var lbltimeout = document.getElementById(id).innerHTML
  if (lbltimeout == "on"){
    document.getElementById(id).innerHTML = "off"
  } else {
    document.getElementById(id).innerHTML = "on"
  }
}
function reloadBoilTimer(){
    var lbltimeout = document.getElementById("lblBoilTimout").innerHTML
    if (lbltimeout=="on"){
      setBoilTimer();
    }
}
function reloadMashTimer(){
  var lbltimeout = document.getElementById("lblMashTimeout").innerHTML
  if (lbltimeout=="on"){
    setMashTimer();
  }
}
function stopVorlauffTimer(){
  var lblVtimeout = document.getElementById("lblVorlauffTimeout").innerHTML
  var lblCtimeout = document.getElementById("lblCASTimeout").innerHTML
  if (lblVtimeout=="on"){
    setVorlauffSW();
  } else {
    lblVtimeout="off"
    lblCtimeout="off"
  }
}
function stopCAMTimer(){
  var lbltimeout = document.getElementById("lblCAMTimeout").innerHTML
  if (lbltimeout=="on"){
    setCAMSW();
  } else {
    document.getElementById("lblCAMTimeout").innerHTML="off"
  }
}
function ahorita(){
  var d = new Date, dfTime 
  dfTime = [ (d.getMonth()+1).padLeft(),
                    d.getDate().padLeft(),
                    d.getFullYear()].join('/')+
                    ' ' +
                  [ d.getHours().padLeft(),
                    d.getMinutes().padLeft(),
                    d.getSeconds().padLeft()].join(':');
     return dfTime;

}
function horaHoy(){
  var d = new Date(), dfTime 
  var hora = d.getHours().toString()
  var minuto = d.getMinutes().toString()
  var segundo = d.getSeconds().toString()
  if (hora.length == 1) { hora = "0" + hora; }
  if (minuto.length == 1) { minuto = "0" + minuto; }
  if (segundo.length == 1) { segundo = "0" + segundo; }
  // alert(segundo.length)
  dfTime = hora + ":" + minuto + ":" + segundo
  return dfTime;
}
function diaHoy(){
  var d = new Date, dfTime 
  var mes = parseInt(d.getMonth())+1
  var dia = d.getDate()
  var ano = d.getFullYear()
  mes = mes.toString()
  if (dia.length == 1) { dia = "0" + dia; }
  if (mes.length == 1) { mes = "0" + mes }
  dfTime = mes + "/" + dia + "/" + ano
  // dfTime = [ (d.getMonth()+1).padLeft(),
  //                   d.getDate().padLeft(),
  //                   d.getFullYear()].join('/')
     return dfTime;
}
function sendInvoice(){
  setRemision()
  setTimeout(function(){
    google.script.run.generatePdf()
  }, 1500);
}
function setRemision(){
  var cliente = document.getElementById("lblUbicacionScan").innerHTML
  var litros = document.getElementById("lblCapacidadScanK").innerHTML
  var capacidad = document.getElementById("lblCapacidadTotalK").innerHTML
  var monto = document.getElementById("txtCobroScan").value
  var estilo = document.getElementById("lblContenidoScanK").innerHTML
  var keg = document.getElementById("lblKegTitulo").innerHTML
  var moneda = document.getElementById("btnMonedaScan").innerHTML
  var metodo = document.getElementById("btnMetodoScan").innerHTML
  var amDue = ""
  if (moneda=="PESOS"){
    moneda = "MXN";
    amDue = "Amount Due (MXN):"
  } else {
    moneda = "USD";
    amDue = "Amount Due (USD):"
  }
  // alert(keg)
  var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/15PQIC_XJDHCQ-jUlbaW8IhZ3I5Emz72wlrVI2jH5-sI/edit?gid=0#gid=0')
  var queryf = "SELECT D,E,F,G WHERE B = '"+cliente+"'"
  query.setQuery(queryf);
  // alert('')
  query.send(function(response){
    if (response.isError()) {
      // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
      return;
    }
    var data = response.getDataTable();
    var nombre = data.getValue(0,0)
    var mail = data.getValue(0,1)
    var bar = data.getValue(0,2)
    var dire = data.getValue(0,3)
    var disc = ""
    if (capacidad.toString()=="20"){
      disc = "Se deja en comodato un envase de acero inoxidable cap. 20L (Valor: $2,000 m.n.)"
    } else {
      disc = "Se deja en comodato un envase de acero inoxidable cap. 60L (Valor: $5,000 m.n.)"
    }
    google.script.run.setClienteData(nombre,mail,bar,dire,litros,monto,keg,estilo,disc,moneda,metodo,amDue)
  });
  var user = empToKey(document.getElementById("lblUsuario").innerHTML)
  
  // alert(user)
  setTimeout(function(){
    var query2 = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1Fh9rTnwggwJvrJ3xSn-qGsv9II-cawhkspMuOUquft8/edit?gid=0#gid=0')
    var queryf2 = "SELECT C,J,I WHERE A = "+user
    query2.setQuery(queryf2);
    query2.send(function(response){
      if (response.isError()) {
        // alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }
      let data = response.getDataTable();
      let nombre = data.getValue(0,0)
      let phone = data.getValue(0,1)
      let mail = data.getValue(0,2)
      google.script.run.setUserData(nombre,phone,mail)
    });
  }, 200);
}
  </script>
</body>
</html>
